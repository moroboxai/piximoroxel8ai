<html>
    <head>
        <title>PixiMoroxel8AI Sample</title>
        <!-- For the player -->
        <script
            type="text/javascript"
            src="https://cdn.jsdelivr.net/npm/moroboxai-player-web@latest/lib/umd/moroboxai-player-web.min.js"
        ></script>
        <!-- For the editor -->
        <script
            type="text/javascript"
            src="https://cdn.jsdelivr.net/npm/moroboxai-editor-web@latest/lib/umd/moroboxai-editor-web.min.js"
        ></script>
    </head>

    <body class="vertical">
        <div class="horizontal">
            <div id="player"></div>
            <div id="editor"></div>
        </div>
        <div id="info">
            <div>
                moroboxai-game-sdk v<span
                    id="moroboxai-game-sdk-version"
                ></span>
            </div>
            <div>
                moroboxai-player-sdk v<span
                    id="moroboxai-player-sdk-version"
                ></span>
            </div>
            <div>
                moroboxai-player-web v<span
                    id="moroboxai-player-web-version"
                ></span>
            </div>
            <div>
                moroboxai-editor-sdk v<span
                    id="moroboxai-editor-sdk-version"
                ></span>
            </div>
            <div>
                moroboxai-editor-web v<span
                    id="moroboxai-editor-web-version"
                ></span>
            </div>
            <div>piximoroxel8ai v<span id="piximoroxel8ai-version"></span></div>
        </div>
    </body>
    <script type="module">
        import * as PixiMoroxel8AI from "./src/index.ts";

        // Hack for MoroboxAIPlayer to detect PixiMoroxel8AI
        window.PixiMoroxel8AI = PixiMoroxel8AI;

        document.getElementById("moroboxai-game-sdk-version").innerText =
            MoroboxAIPlayer.GAME_SDK_VERSION;
        document.getElementById("moroboxai-player-sdk-version").innerText =
            MoroboxAIPlayer.SDK_VERSION;
        document.getElementById("moroboxai-player-web-version").innerText =
            MoroboxAIPlayer.VERSION;
        document.getElementById("moroboxai-editor-sdk-version").innerText =
            MoroboxAIEditor.SDK_VERSION;
        document.getElementById("moroboxai-editor-web-version").innerText =
            MoroboxAIEditor.VERSION;
        document.getElementById("piximoroxel8ai-version").innerText =
            PixiMoroxel8AI.VERSION;

        const player = MoroboxAIPlayer.init(document.getElementById("player"), {
            // Replace with URL to your header.yml
            url: "https://raw.githubusercontent.com/moroboxai/moroboxai-games/master/piximoroxel8ai-sample/sample/header.yml",
            resizable: false,
            autoPlay: true,
            width: 256,
            height: 256,
            onReady: () => console.log("ready")
        });

        MoroboxAIEditor.init({
            element: document.getElementById("editor"),
            url: "https://raw.githubusercontent.com/moroboxai/moroboxai-games/master/piximoroxel8ai-sample/sample/agent.js",
            width: "500px",
            height: "400px",
            onLoad: (language, value) =>
                player.getController(0).loadAgent({
                    language: language,
                    code: value
                }),
            onUnload: () => player.getController(0).unloadAgent()
        });
    </script>

    <style type="text/css">
        body {
            height: 100%;
            margin: 0;
            padding: 0;
        }

        .vertical {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .horizontal {
            display: flex;
            flex-direction: row;
            align-items: center;
            justify-content: center;
        }

        #player {
            background-color: black;
            background-size: cover;
            margin-left: 10em;
            margin-right: 2em;
        }

        #info {
            margin-top: 2em;
            text-align: center;
        }
    </style>
</html>
