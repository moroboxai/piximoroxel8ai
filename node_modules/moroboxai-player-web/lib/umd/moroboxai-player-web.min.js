/*! For license information please see moroboxai-player-web.min.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.MoroboxAIPlayer=t():e.MoroboxAIPlayer=t()}(self,(()=>(()=>{var e={858:(e,t,n)=>{e.exports=function e(t,n,s){function r(o,a){if(!n[o]){if(!t[o]){if(i)return i(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[o]={exports:{}};t[o][0].call(c.exports,(function(e){return r(t[o][1][e]||e)}),c,c.exports,e,t,n,s)}return n[o].exports}for(var i=void 0,o=0;o<s.length;o++)r(s[o]);return r}({1:[function(e,t,n){"use strict";var s=e("./utils"),r=e("./support"),i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.encode=function(e){for(var t,n,r,o,a,l,c,h=[],u=0,f=e.length,d=f,p="string"!==s.getTypeOf(e);u<e.length;)d=f-u,r=p?(t=e[u++],n=u<f?e[u++]:0,u<f?e[u++]:0):(t=e.charCodeAt(u++),n=u<f?e.charCodeAt(u++):0,u<f?e.charCodeAt(u++):0),o=t>>2,a=(3&t)<<4|n>>4,l=1<d?(15&n)<<2|r>>6:64,c=2<d?63&r:64,h.push(i.charAt(o)+i.charAt(a)+i.charAt(l)+i.charAt(c));return h.join("")},n.decode=function(e){var t,n,s,o,a,l,c=0,h=0,u="data:";if(e.substr(0,5)===u)throw new Error("Invalid base64 input, it looks like a data url.");var f,d=3*(e=e.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(e.charAt(e.length-1)===i.charAt(64)&&d--,e.charAt(e.length-2)===i.charAt(64)&&d--,d%1!=0)throw new Error("Invalid base64 input, bad content length.");for(f=r.uint8array?new Uint8Array(0|d):new Array(0|d);c<e.length;)t=i.indexOf(e.charAt(c++))<<2|(o=i.indexOf(e.charAt(c++)))>>4,n=(15&o)<<4|(a=i.indexOf(e.charAt(c++)))>>2,s=(3&a)<<6|(l=i.indexOf(e.charAt(c++))),f[h++]=t,64!==a&&(f[h++]=n),64!==l&&(f[h++]=s);return f}},{"./support":30,"./utils":32}],2:[function(e,t,n){"use strict";var s=e("./external"),r=e("./stream/DataWorker"),i=e("./stream/Crc32Probe"),o=e("./stream/DataLengthProbe");function a(e,t,n,s,r){this.compressedSize=e,this.uncompressedSize=t,this.crc32=n,this.compression=s,this.compressedContent=r}a.prototype={getContentWorker:function(){var e=new r(s.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new o("data_length")),t=this;return e.on("end",(function(){if(this.streamInfo.data_length!==t.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")})),e},getCompressedWorker:function(){return new r(s.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},a.createWorkerFrom=function(e,t,n){return e.pipe(new i).pipe(new o("uncompressedSize")).pipe(t.compressWorker(n)).pipe(new o("compressedSize")).withStreamInfo("compression",t)},t.exports=a},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(e,t,n){"use strict";var s=e("./stream/GenericWorker");n.STORE={magic:"\0\0",compressWorker:function(){return new s("STORE compression")},uncompressWorker:function(){return new s("STORE decompression")}},n.DEFLATE=e("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(e,t,n){"use strict";var s=e("./utils"),r=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var s=0;s<8;s++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();t.exports=function(e,t){return void 0!==e&&e.length?"string"!==s.getTypeOf(e)?function(e,t,n,s){var i=r,o=0+n;e^=-1;for(var a=0;a<o;a++)e=e>>>8^i[255&(e^t[a])];return-1^e}(0|t,e,e.length):function(e,t,n,s){var i=r,o=0+n;e^=-1;for(var a=0;a<o;a++)e=e>>>8^i[255&(e^t.charCodeAt(a))];return-1^e}(0|t,e,e.length):0}},{"./utils":32}],5:[function(e,t,n){"use strict";n.base64=!1,n.binary=!1,n.dir=!1,n.createFolders=!0,n.date=null,n.compression=null,n.compressionOptions=null,n.comment=null,n.unixPermissions=null,n.dosPermissions=null},{}],6:[function(e,t,n){"use strict";var s;s="undefined"!=typeof Promise?Promise:e("lie"),t.exports={Promise:s}},{lie:37}],7:[function(e,t,n){"use strict";var s="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,r=e("pako"),i=e("./utils"),o=e("./stream/GenericWorker"),a=s?"uint8array":"array";function l(e,t){o.call(this,"FlateWorker/"+e),this._pako=null,this._pakoAction=e,this._pakoOptions=t,this.meta={}}n.magic="\b\0",i.inherits(l,o),l.prototype.processChunk=function(e){this.meta=e.meta,null===this._pako&&this._createPako(),this._pako.push(i.transformTo(a,e.data),!1)},l.prototype.flush=function(){o.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},l.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this._pako=null},l.prototype._createPako=function(){this._pako=new r[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var e=this;this._pako.onData=function(t){e.push({data:t,meta:e.meta})}},n.compressWorker=function(e){return new l("Deflate",e)},n.uncompressWorker=function(){return new l("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(e,t,n){"use strict";function s(e,t){var n,s="";for(n=0;n<t;n++)s+=String.fromCharCode(255&e),e>>>=8;return s}function r(e,t,n,r,o,h){var u,f,d=e.file,p=e.compression,m=h!==a.utf8encode,g=i.transformTo("string",h(d.name)),y=i.transformTo("string",a.utf8encode(d.name)),_=d.comment,b=i.transformTo("string",h(_)),v=i.transformTo("string",a.utf8encode(_)),w=y.length!==d.name.length,k=v.length!==_.length,S="",E="",x="",A=d.dir,O=d.date,C={crc32:0,compressedSize:0,uncompressedSize:0};t&&!n||(C.crc32=e.crc32,C.compressedSize=e.compressedSize,C.uncompressedSize=e.uncompressedSize);var I=0;t&&(I|=8),m||!w&&!k||(I|=2048);var N=0,T=0;A&&(N|=16),"UNIX"===o?(T=798,N|=function(e,t){var n=e;return e||(n=t?16893:33204),(65535&n)<<16}(d.unixPermissions,A)):(T=20,N|=function(e){return 63&(e||0)}(d.dosPermissions)),u=O.getUTCHours(),u<<=6,u|=O.getUTCMinutes(),u<<=5,u|=O.getUTCSeconds()/2,f=O.getUTCFullYear()-1980,f<<=4,f|=O.getUTCMonth()+1,f<<=5,f|=O.getUTCDate(),w&&(E=s(1,1)+s(l(g),4)+y,S+="up"+s(E.length,2)+E),k&&(x=s(1,1)+s(l(b),4)+v,S+="uc"+s(x.length,2)+x);var L="";return L+="\n\0",L+=s(I,2),L+=p.magic,L+=s(u,2),L+=s(f,2),L+=s(C.crc32,4),L+=s(C.compressedSize,4),L+=s(C.uncompressedSize,4),L+=s(g.length,2),L+=s(S.length,2),{fileRecord:c.LOCAL_FILE_HEADER+L+g+S,dirRecord:c.CENTRAL_FILE_HEADER+s(T,2)+L+s(b.length,2)+"\0\0\0\0"+s(N,4)+s(r,4)+g+S+b}}var i=e("../utils"),o=e("../stream/GenericWorker"),a=e("../utf8"),l=e("../crc32"),c=e("../signature");function h(e,t,n,s){o.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=t,this.zipPlatform=n,this.encodeFileName=s,this.streamFiles=e,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}i.inherits(h,o),h.prototype.push=function(e){var t=e.meta.percent||0,n=this.entriesCount,s=this._sources.length;this.accumulate?this.contentBuffer.push(e):(this.bytesWritten+=e.data.length,o.prototype.push.call(this,{data:e.data,meta:{currentFile:this.currentFile,percent:n?(t+100*(n-s-1))/n:100}}))},h.prototype.openedSource=function(e){this.currentSourceOffset=this.bytesWritten,this.currentFile=e.file.name;var t=this.streamFiles&&!e.file.dir;if(t){var n=r(e,t,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:n.fileRecord,meta:{percent:0}})}else this.accumulate=!0},h.prototype.closedSource=function(e){this.accumulate=!1;var t=this.streamFiles&&!e.file.dir,n=r(e,t,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(n.dirRecord),t)this.push({data:function(e){return c.DATA_DESCRIPTOR+s(e.crc32,4)+s(e.compressedSize,4)+s(e.uncompressedSize,4)}(e),meta:{percent:100}});else for(this.push({data:n.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},h.prototype.flush=function(){for(var e=this.bytesWritten,t=0;t<this.dirRecords.length;t++)this.push({data:this.dirRecords[t],meta:{percent:100}});var n=this.bytesWritten-e,r=function(e,t,n,r,o){var a=i.transformTo("string",o(r));return c.CENTRAL_DIRECTORY_END+"\0\0\0\0"+s(e,2)+s(e,2)+s(t,4)+s(n,4)+s(a.length,2)+a}(this.dirRecords.length,n,e,this.zipComment,this.encodeFileName);this.push({data:r,meta:{percent:100}})},h.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},h.prototype.registerPrevious=function(e){this._sources.push(e);var t=this;return e.on("data",(function(e){t.processChunk(e)})),e.on("end",(function(){t.closedSource(t.previous.streamInfo),t._sources.length?t.prepareNextSource():t.end()})),e.on("error",(function(e){t.error(e)})),this},h.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},h.prototype.error=function(e){var t=this._sources;if(!o.prototype.error.call(this,e))return!1;for(var n=0;n<t.length;n++)try{t[n].error(e)}catch(e){}return!0},h.prototype.lock=function(){o.prototype.lock.call(this);for(var e=this._sources,t=0;t<e.length;t++)e[t].lock()},t.exports=h},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(e,t,n){"use strict";var s=e("../compressions"),r=e("./ZipFileWorker");n.generateWorker=function(e,t,n){var i=new r(t.streamFiles,n,t.platform,t.encodeFileName),o=0;try{e.forEach((function(e,n){o++;var r=function(e,t){var n=e||t,r=s[n];if(!r)throw new Error(n+" is not a valid compression method !");return r}(n.options.compression,t.compression),a=n.options.compressionOptions||t.compressionOptions||{},l=n.dir,c=n.date;n._compressWorker(r,a).withStreamInfo("file",{name:e,dir:l,date:c,comment:n.comment||"",unixPermissions:n.unixPermissions,dosPermissions:n.dosPermissions}).pipe(i)})),i.entriesCount=o}catch(e){i.error(e)}return i}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(e,t,n){"use strict";function s(){if(!(this instanceof s))return new s;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var e=new s;for(var t in this)"function"!=typeof this[t]&&(e[t]=this[t]);return e}}(s.prototype=e("./object")).loadAsync=e("./load"),s.support=e("./support"),s.defaults=e("./defaults"),s.version="3.10.1",s.loadAsync=function(e,t){return(new s).loadAsync(e,t)},s.external=e("./external"),t.exports=s},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(e,t,n){"use strict";var s=e("./utils"),r=e("./external"),i=e("./utf8"),o=e("./zipEntries"),a=e("./stream/Crc32Probe"),l=e("./nodejsUtils");function c(e){return new r.Promise((function(t,n){var s=e.decompressed.getContentWorker().pipe(new a);s.on("error",(function(e){n(e)})).on("end",(function(){s.streamInfo.crc32!==e.decompressed.crc32?n(new Error("Corrupted zip : CRC32 mismatch")):t()})).resume()}))}t.exports=function(e,t){var n=this;return t=s.extend(t||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:i.utf8decode}),l.isNode&&l.isStream(e)?r.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):s.prepareContent("the loaded zip file",e,!0,t.optimizedBinaryString,t.base64).then((function(e){var n=new o(t);return n.load(e),n})).then((function(e){var n=[r.Promise.resolve(e)],s=e.files;if(t.checkCRC32)for(var i=0;i<s.length;i++)n.push(c(s[i]));return r.Promise.all(n)})).then((function(e){for(var r=e.shift(),i=r.files,o=0;o<i.length;o++){var a=i[o],l=a.fileNameStr,c=s.resolve(a.fileNameStr);n.file(c,a.decompressed,{binary:!0,optimizedBinaryString:!0,date:a.date,dir:a.dir,comment:a.fileCommentStr.length?a.fileCommentStr:null,unixPermissions:a.unixPermissions,dosPermissions:a.dosPermissions,createFolders:t.createFolders}),a.dir||(n.file(c).unsafeOriginalName=l)}return r.zipComment.length&&(n.comment=r.zipComment),n}))}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(e,t,n){"use strict";var s=e("../utils"),r=e("../stream/GenericWorker");function i(e,t){r.call(this,"Nodejs stream input adapter for "+e),this._upstreamEnded=!1,this._bindStream(t)}s.inherits(i,r),i.prototype._bindStream=function(e){var t=this;(this._stream=e).pause(),e.on("data",(function(e){t.push({data:e,meta:{percent:0}})})).on("error",(function(e){t.isPaused?this.generatedError=e:t.error(e)})).on("end",(function(){t.isPaused?t._upstreamEnded=!0:t.end()}))},i.prototype.pause=function(){return!!r.prototype.pause.call(this)&&(this._stream.pause(),!0)},i.prototype.resume=function(){return!!r.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},t.exports=i},{"../stream/GenericWorker":28,"../utils":32}],13:[function(e,t,n){"use strict";var s=e("readable-stream").Readable;function r(e,t,n){s.call(this,t),this._helper=e;var r=this;e.on("data",(function(e,t){r.push(e)||r._helper.pause(),n&&n(t)})).on("error",(function(e){r.emit("error",e)})).on("end",(function(){r.push(null)}))}e("../utils").inherits(r,s),r.prototype._read=function(){this._helper.resume()},t.exports=r},{"../utils":32,"readable-stream":16}],14:[function(e,t,n){"use strict";t.exports={isNode:"undefined"!=typeof Buffer,newBufferFrom:function(e,t){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(e,t);if("number"==typeof e)throw new Error('The "data" argument must not be a number');return new Buffer(e,t)},allocBuffer:function(e){if(Buffer.alloc)return Buffer.alloc(e);var t=new Buffer(e);return t.fill(0),t},isBuffer:function(e){return Buffer.isBuffer(e)},isStream:function(e){return e&&"function"==typeof e.on&&"function"==typeof e.pause&&"function"==typeof e.resume}}},{}],15:[function(e,t,n){"use strict";function s(e,t,n){var s,r=i.getTypeOf(t),a=i.extend(n||{},l);a.date=a.date||new Date,null!==a.compression&&(a.compression=a.compression.toUpperCase()),"string"==typeof a.unixPermissions&&(a.unixPermissions=parseInt(a.unixPermissions,8)),a.unixPermissions&&16384&a.unixPermissions&&(a.dir=!0),a.dosPermissions&&16&a.dosPermissions&&(a.dir=!0),a.dir&&(e=m(e)),a.createFolders&&(s=p(e))&&g.call(this,s,!0);var u="string"===r&&!1===a.binary&&!1===a.base64;n&&void 0!==n.binary||(a.binary=!u),(t instanceof c&&0===t.uncompressedSize||a.dir||!t||0===t.length)&&(a.base64=!1,a.binary=!0,t="",a.compression="STORE",r="string");var y;y=t instanceof c||t instanceof o?t:f.isNode&&f.isStream(t)?new d(e,t):i.prepareContent(e,t,a.binary,a.optimizedBinaryString,a.base64);var _=new h(e,y,a);this.files[e]=_}var r=e("./utf8"),i=e("./utils"),o=e("./stream/GenericWorker"),a=e("./stream/StreamHelper"),l=e("./defaults"),c=e("./compressedObject"),h=e("./zipObject"),u=e("./generate"),f=e("./nodejsUtils"),d=e("./nodejs/NodejsStreamInputAdapter"),p=function(e){"/"===e.slice(-1)&&(e=e.substring(0,e.length-1));var t=e.lastIndexOf("/");return 0<t?e.substring(0,t):""},m=function(e){return"/"!==e.slice(-1)&&(e+="/"),e},g=function(e,t){return t=void 0!==t?t:l.createFolders,e=m(e),this.files[e]||s.call(this,e,null,{dir:!0,createFolders:t}),this.files[e]};function y(e){return"[object RegExp]"===Object.prototype.toString.call(e)}var _={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(e){var t,n,s;for(t in this.files)s=this.files[t],(n=t.slice(this.root.length,t.length))&&t.slice(0,this.root.length)===this.root&&e(n,s)},filter:function(e){var t=[];return this.forEach((function(n,s){e(n,s)&&t.push(s)})),t},file:function(e,t,n){if(1!==arguments.length)return e=this.root+e,s.call(this,e,t,n),this;if(y(e)){var r=e;return this.filter((function(e,t){return!t.dir&&r.test(e)}))}var i=this.files[this.root+e];return i&&!i.dir?i:null},folder:function(e){if(!e)return this;if(y(e))return this.filter((function(t,n){return n.dir&&e.test(t)}));var t=this.root+e,n=g.call(this,t),s=this.clone();return s.root=n.name,s},remove:function(e){e=this.root+e;var t=this.files[e];if(t||("/"!==e.slice(-1)&&(e+="/"),t=this.files[e]),t&&!t.dir)delete this.files[e];else for(var n=this.filter((function(t,n){return n.name.slice(0,e.length)===e})),s=0;s<n.length;s++)delete this.files[n[s].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(e){var t,n={};try{if((n=i.extend(e||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:r.utf8encode})).type=n.type.toLowerCase(),n.compression=n.compression.toUpperCase(),"binarystring"===n.type&&(n.type="string"),!n.type)throw new Error("No output type specified.");i.checkSupport(n.type),"darwin"!==n.platform&&"freebsd"!==n.platform&&"linux"!==n.platform&&"sunos"!==n.platform||(n.platform="UNIX"),"win32"===n.platform&&(n.platform="DOS");var s=n.comment||this.comment||"";t=u.generateWorker(this,n,s)}catch(e){(t=new o("error")).error(e)}return new a(t,n.type||"string",n.mimeType)},generateAsync:function(e,t){return this.generateInternalStream(e).accumulate(t)},generateNodeStream:function(e,t){return(e=e||{}).type||(e.type="nodebuffer"),this.generateInternalStream(e).toNodejsStream(t)}};t.exports=_},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(e,t,n){"use strict";t.exports=e("stream")},{stream:void 0}],17:[function(e,t,n){"use strict";var s=e("./DataReader");function r(e){s.call(this,e);for(var t=0;t<this.data.length;t++)e[t]=255&e[t]}e("../utils").inherits(r,s),r.prototype.byteAt=function(e){return this.data[this.zero+e]},r.prototype.lastIndexOfSignature=function(e){for(var t=e.charCodeAt(0),n=e.charCodeAt(1),s=e.charCodeAt(2),r=e.charCodeAt(3),i=this.length-4;0<=i;--i)if(this.data[i]===t&&this.data[i+1]===n&&this.data[i+2]===s&&this.data[i+3]===r)return i-this.zero;return-1},r.prototype.readAndCheckSignature=function(e){var t=e.charCodeAt(0),n=e.charCodeAt(1),s=e.charCodeAt(2),r=e.charCodeAt(3),i=this.readData(4);return t===i[0]&&n===i[1]&&s===i[2]&&r===i[3]},r.prototype.readData=function(e){if(this.checkOffset(e),0===e)return[];var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=r},{"../utils":32,"./DataReader":18}],18:[function(e,t,n){"use strict";var s=e("../utils");function r(e){this.data=e,this.length=e.length,this.index=0,this.zero=0}r.prototype={checkOffset:function(e){this.checkIndex(this.index+e)},checkIndex:function(e){if(this.length<this.zero+e||e<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+e+"). Corrupted zip ?")},setIndex:function(e){this.checkIndex(e),this.index=e},skip:function(e){this.setIndex(this.index+e)},byteAt:function(){},readInt:function(e){var t,n=0;for(this.checkOffset(e),t=this.index+e-1;t>=this.index;t--)n=(n<<8)+this.byteAt(t);return this.index+=e,n},readString:function(e){return s.transformTo("string",this.readData(e))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var e=this.readInt(4);return new Date(Date.UTC(1980+(e>>25&127),(e>>21&15)-1,e>>16&31,e>>11&31,e>>5&63,(31&e)<<1))}},t.exports=r},{"../utils":32}],19:[function(e,t,n){"use strict";var s=e("./Uint8ArrayReader");function r(e){s.call(this,e)}e("../utils").inherits(r,s),r.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=r},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(e,t,n){"use strict";var s=e("./DataReader");function r(e){s.call(this,e)}e("../utils").inherits(r,s),r.prototype.byteAt=function(e){return this.data.charCodeAt(this.zero+e)},r.prototype.lastIndexOfSignature=function(e){return this.data.lastIndexOf(e)-this.zero},r.prototype.readAndCheckSignature=function(e){return e===this.readData(4)},r.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=r},{"../utils":32,"./DataReader":18}],21:[function(e,t,n){"use strict";var s=e("./ArrayReader");function r(e){s.call(this,e)}e("../utils").inherits(r,s),r.prototype.readData=function(e){if(this.checkOffset(e),0===e)return new Uint8Array(0);var t=this.data.subarray(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=r},{"../utils":32,"./ArrayReader":17}],22:[function(e,t,n){"use strict";var s=e("../utils"),r=e("../support"),i=e("./ArrayReader"),o=e("./StringReader"),a=e("./NodeBufferReader"),l=e("./Uint8ArrayReader");t.exports=function(e){var t=s.getTypeOf(e);return s.checkSupport(t),"string"!==t||r.uint8array?"nodebuffer"===t?new a(e):r.uint8array?new l(s.transformTo("uint8array",e)):new i(s.transformTo("array",e)):new o(e)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(e,t,n){"use strict";n.LOCAL_FILE_HEADER="PK",n.CENTRAL_FILE_HEADER="PK",n.CENTRAL_DIRECTORY_END="PK",n.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",n.ZIP64_CENTRAL_DIRECTORY_END="PK",n.DATA_DESCRIPTOR="PK\b"},{}],24:[function(e,t,n){"use strict";var s=e("./GenericWorker"),r=e("../utils");function i(e){s.call(this,"ConvertWorker to "+e),this.destType=e}r.inherits(i,s),i.prototype.processChunk=function(e){this.push({data:r.transformTo(this.destType,e.data),meta:e.meta})},t.exports=i},{"../utils":32,"./GenericWorker":28}],25:[function(e,t,n){"use strict";var s=e("./GenericWorker"),r=e("../crc32");function i(){s.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}e("../utils").inherits(i,s),i.prototype.processChunk=function(e){this.streamInfo.crc32=r(e.data,this.streamInfo.crc32||0),this.push(e)},t.exports=i},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(e,t,n){"use strict";var s=e("../utils"),r=e("./GenericWorker");function i(e){r.call(this,"DataLengthProbe for "+e),this.propName=e,this.withStreamInfo(e,0)}s.inherits(i,r),i.prototype.processChunk=function(e){if(e){var t=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=t+e.data.length}r.prototype.processChunk.call(this,e)},t.exports=i},{"../utils":32,"./GenericWorker":28}],27:[function(e,t,n){"use strict";var s=e("../utils"),r=e("./GenericWorker");function i(e){r.call(this,"DataWorker");var t=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,e.then((function(e){t.dataIsReady=!0,t.data=e,t.max=e&&e.length||0,t.type=s.getTypeOf(e),t.isPaused||t._tickAndRepeat()}),(function(e){t.error(e)}))}s.inherits(i,r),i.prototype.cleanUp=function(){r.prototype.cleanUp.call(this),this.data=null},i.prototype.resume=function(){return!!r.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,s.delay(this._tickAndRepeat,[],this)),!0)},i.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(s.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},i.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var e=null,t=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":e=this.data.substring(this.index,t);break;case"uint8array":e=this.data.subarray(this.index,t);break;case"array":case"nodebuffer":e=this.data.slice(this.index,t)}return this.index=t,this.push({data:e,meta:{percent:this.max?this.index/this.max*100:0}})},t.exports=i},{"../utils":32,"./GenericWorker":28}],28:[function(e,t,n){"use strict";function s(e){this.name=e||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}s.prototype={push:function(e){this.emit("data",e)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(e){this.emit("error",e)}return!0},error:function(e){return!this.isFinished&&(this.isPaused?this.generatedError=e:(this.isFinished=!0,this.emit("error",e),this.previous&&this.previous.error(e),this.cleanUp()),!0)},on:function(e,t){return this._listeners[e].push(t),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(e,t){if(this._listeners[e])for(var n=0;n<this._listeners[e].length;n++)this._listeners[e][n].call(this,t)},pipe:function(e){return e.registerPrevious(this)},registerPrevious:function(e){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=e.streamInfo,this.mergeStreamInfo(),this.previous=e;var t=this;return e.on("data",(function(e){t.processChunk(e)})),e.on("end",(function(){t.end()})),e.on("error",(function(e){t.error(e)})),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var e=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),e=!0),this.previous&&this.previous.resume(),!e},flush:function(){},processChunk:function(e){this.push(e)},withStreamInfo:function(e,t){return this.extraStreamInfo[e]=t,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var e in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,e)&&(this.streamInfo[e]=this.extraStreamInfo[e])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var e="Worker "+this.name;return this.previous?this.previous+" -> "+e:e}},t.exports=s},{}],29:[function(e,t,n){"use strict";var s=e("../utils"),r=e("./ConvertWorker"),i=e("./GenericWorker"),o=e("../base64"),a=e("../support"),l=e("../external"),c=null;if(a.nodestream)try{c=e("../nodejs/NodejsStreamOutputAdapter")}catch(e){}function h(e,t,n){var o=t;switch(t){case"blob":case"arraybuffer":o="uint8array";break;case"base64":o="string"}try{this._internalType=o,this._outputType=t,this._mimeType=n,s.checkSupport(o),this._worker=e.pipe(new r(o)),e.lock()}catch(e){this._worker=new i("error"),this._worker.error(e)}}h.prototype={accumulate:function(e){return function(e,t){return new l.Promise((function(n,r){var i=[],a=e._internalType,l=e._outputType,c=e._mimeType;e.on("data",(function(e,n){i.push(e),t&&t(n)})).on("error",(function(e){i=[],r(e)})).on("end",(function(){try{var e=function(e,t,n){switch(e){case"blob":return s.newBlob(s.transformTo("arraybuffer",t),n);case"base64":return o.encode(t);default:return s.transformTo(e,t)}}(l,function(e,t){var n,s=0,r=null,i=0;for(n=0;n<t.length;n++)i+=t[n].length;switch(e){case"string":return t.join("");case"array":return Array.prototype.concat.apply([],t);case"uint8array":for(r=new Uint8Array(i),n=0;n<t.length;n++)r.set(t[n],s),s+=t[n].length;return r;case"nodebuffer":return Buffer.concat(t);default:throw new Error("concat : unsupported type '"+e+"'")}}(a,i),c);n(e)}catch(e){r(e)}i=[]})).resume()}))}(this,e)},on:function(e,t){var n=this;return"data"===e?this._worker.on(e,(function(e){t.call(n,e.data,e.meta)})):this._worker.on(e,(function(){s.delay(t,arguments,n)})),this},resume:function(){return s.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(e){if(s.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new c(this,{objectMode:"nodebuffer"!==this._outputType},e)}},t.exports=h},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(e,t,n){"use strict";if(n.base64=!0,n.array=!0,n.string=!0,n.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,n.nodebuffer="undefined"!=typeof Buffer,n.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)n.blob=!1;else{var s=new ArrayBuffer(0);try{n.blob=0===new Blob([s],{type:"application/zip"}).size}catch(e){try{var r=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);r.append(s),n.blob=0===r.getBlob("application/zip").size}catch(e){n.blob=!1}}}try{n.nodestream=!!e("readable-stream").Readable}catch(e){n.nodestream=!1}},{"readable-stream":16}],31:[function(e,t,n){"use strict";for(var s=e("./utils"),r=e("./support"),i=e("./nodejsUtils"),o=e("./stream/GenericWorker"),a=new Array(256),l=0;l<256;l++)a[l]=252<=l?6:248<=l?5:240<=l?4:224<=l?3:192<=l?2:1;function c(){o.call(this,"utf-8 decode"),this.leftOver=null}function h(){o.call(this,"utf-8 encode")}a[254]=a[254]=1,n.utf8encode=function(e){return r.nodebuffer?i.newBufferFrom(e,"utf-8"):function(e){var t,n,s,i,o,a=e.length,l=0;for(i=0;i<a;i++)55296==(64512&(n=e.charCodeAt(i)))&&i+1<a&&56320==(64512&(s=e.charCodeAt(i+1)))&&(n=65536+(n-55296<<10)+(s-56320),i++),l+=n<128?1:n<2048?2:n<65536?3:4;for(t=r.uint8array?new Uint8Array(l):new Array(l),i=o=0;o<l;i++)55296==(64512&(n=e.charCodeAt(i)))&&i+1<a&&56320==(64512&(s=e.charCodeAt(i+1)))&&(n=65536+(n-55296<<10)+(s-56320),i++),n<128?t[o++]=n:(n<2048?t[o++]=192|n>>>6:(n<65536?t[o++]=224|n>>>12:(t[o++]=240|n>>>18,t[o++]=128|n>>>12&63),t[o++]=128|n>>>6&63),t[o++]=128|63&n);return t}(e)},n.utf8decode=function(e){return r.nodebuffer?s.transformTo("nodebuffer",e).toString("utf-8"):function(e){var t,n,r,i,o=e.length,l=new Array(2*o);for(t=n=0;t<o;)if((r=e[t++])<128)l[n++]=r;else if(4<(i=a[r]))l[n++]=65533,t+=i-1;else{for(r&=2===i?31:3===i?15:7;1<i&&t<o;)r=r<<6|63&e[t++],i--;1<i?l[n++]=65533:r<65536?l[n++]=r:(r-=65536,l[n++]=55296|r>>10&1023,l[n++]=56320|1023&r)}return l.length!==n&&(l.subarray?l=l.subarray(0,n):l.length=n),s.applyFromCharCode(l)}(e=s.transformTo(r.uint8array?"uint8array":"array",e))},s.inherits(c,o),c.prototype.processChunk=function(e){var t=s.transformTo(r.uint8array?"uint8array":"array",e.data);if(this.leftOver&&this.leftOver.length){if(r.uint8array){var i=t;(t=new Uint8Array(i.length+this.leftOver.length)).set(this.leftOver,0),t.set(i,this.leftOver.length)}else t=this.leftOver.concat(t);this.leftOver=null}var o=function(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;0<=n&&128==(192&e[n]);)n--;return n<0||0===n?t:n+a[e[n]]>t?n:t}(t),l=t;o!==t.length&&(r.uint8array?(l=t.subarray(0,o),this.leftOver=t.subarray(o,t.length)):(l=t.slice(0,o),this.leftOver=t.slice(o,t.length))),this.push({data:n.utf8decode(l),meta:e.meta})},c.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:n.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},n.Utf8DecodeWorker=c,s.inherits(h,o),h.prototype.processChunk=function(e){this.push({data:n.utf8encode(e.data),meta:e.meta})},n.Utf8EncodeWorker=h},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(e,t,n){"use strict";var s=e("./support"),r=e("./base64"),i=e("./nodejsUtils"),o=e("./external");function a(e){return e}function l(e,t){for(var n=0;n<e.length;++n)t[n]=255&e.charCodeAt(n);return t}e("setimmediate"),n.newBlob=function(e,t){n.checkSupport("blob");try{return new Blob([e],{type:t})}catch(n){try{var s=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return s.append(e),s.getBlob(t)}catch(e){throw new Error("Bug : can't construct the Blob.")}}};var c={stringifyByChunk:function(e,t,n){var s=[],r=0,i=e.length;if(i<=n)return String.fromCharCode.apply(null,e);for(;r<i;)"array"===t||"nodebuffer"===t?s.push(String.fromCharCode.apply(null,e.slice(r,Math.min(r+n,i)))):s.push(String.fromCharCode.apply(null,e.subarray(r,Math.min(r+n,i)))),r+=n;return s.join("")},stringifyByChar:function(e){for(var t="",n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t},applyCanBeUsed:{uint8array:function(){try{return s.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(e){return!1}}(),nodebuffer:function(){try{return s.nodebuffer&&1===String.fromCharCode.apply(null,i.allocBuffer(1)).length}catch(e){return!1}}()}};function h(e){var t=65536,s=n.getTypeOf(e),r=!0;if("uint8array"===s?r=c.applyCanBeUsed.uint8array:"nodebuffer"===s&&(r=c.applyCanBeUsed.nodebuffer),r)for(;1<t;)try{return c.stringifyByChunk(e,s,t)}catch(e){t=Math.floor(t/2)}return c.stringifyByChar(e)}function u(e,t){for(var n=0;n<e.length;n++)t[n]=e[n];return t}n.applyFromCharCode=h;var f={};f.string={string:a,array:function(e){return l(e,new Array(e.length))},arraybuffer:function(e){return f.string.uint8array(e).buffer},uint8array:function(e){return l(e,new Uint8Array(e.length))},nodebuffer:function(e){return l(e,i.allocBuffer(e.length))}},f.array={string:h,array:a,arraybuffer:function(e){return new Uint8Array(e).buffer},uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return i.newBufferFrom(e)}},f.arraybuffer={string:function(e){return h(new Uint8Array(e))},array:function(e){return u(new Uint8Array(e),new Array(e.byteLength))},arraybuffer:a,uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return i.newBufferFrom(new Uint8Array(e))}},f.uint8array={string:h,array:function(e){return u(e,new Array(e.length))},arraybuffer:function(e){return e.buffer},uint8array:a,nodebuffer:function(e){return i.newBufferFrom(e)}},f.nodebuffer={string:h,array:function(e){return u(e,new Array(e.length))},arraybuffer:function(e){return f.nodebuffer.uint8array(e).buffer},uint8array:function(e){return u(e,new Uint8Array(e.length))},nodebuffer:a},n.transformTo=function(e,t){if(t=t||"",!e)return t;n.checkSupport(e);var s=n.getTypeOf(t);return f[s][e](t)},n.resolve=function(e){for(var t=e.split("/"),n=[],s=0;s<t.length;s++){var r=t[s];"."===r||""===r&&0!==s&&s!==t.length-1||(".."===r?n.pop():n.push(r))}return n.join("/")},n.getTypeOf=function(e){return"string"==typeof e?"string":"[object Array]"===Object.prototype.toString.call(e)?"array":s.nodebuffer&&i.isBuffer(e)?"nodebuffer":s.uint8array&&e instanceof Uint8Array?"uint8array":s.arraybuffer&&e instanceof ArrayBuffer?"arraybuffer":void 0},n.checkSupport=function(e){if(!s[e.toLowerCase()])throw new Error(e+" is not supported by this platform")},n.MAX_VALUE_16BITS=65535,n.MAX_VALUE_32BITS=-1,n.pretty=function(e){var t,n,s="";for(n=0;n<(e||"").length;n++)s+="\\x"+((t=e.charCodeAt(n))<16?"0":"")+t.toString(16).toUpperCase();return s},n.delay=function(e,t,n){setImmediate((function(){e.apply(n||null,t||[])}))},n.inherits=function(e,t){function n(){}n.prototype=t.prototype,e.prototype=new n},n.extend=function(){var e,t,n={};for(e=0;e<arguments.length;e++)for(t in arguments[e])Object.prototype.hasOwnProperty.call(arguments[e],t)&&void 0===n[t]&&(n[t]=arguments[e][t]);return n},n.prepareContent=function(e,t,i,a,c){return o.Promise.resolve(t).then((function(e){return s.blob&&(e instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(e)))&&"undefined"!=typeof FileReader?new o.Promise((function(t,n){var s=new FileReader;s.onload=function(e){t(e.target.result)},s.onerror=function(e){n(e.target.error)},s.readAsArrayBuffer(e)})):e})).then((function(t){var h=n.getTypeOf(t);return h?("arraybuffer"===h?t=n.transformTo("uint8array",t):"string"===h&&(c?t=r.decode(t):i&&!0!==a&&(t=function(e){return l(e,s.uint8array?new Uint8Array(e.length):new Array(e.length))}(t))),t):o.Promise.reject(new Error("Can't read the data of '"+e+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))}))}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(e,t,n){"use strict";var s=e("./reader/readerFor"),r=e("./utils"),i=e("./signature"),o=e("./zipEntry"),a=e("./support");function l(e){this.files=[],this.loadOptions=e}l.prototype={checkSignature:function(e){if(!this.reader.readAndCheckSignature(e)){this.reader.index-=4;var t=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+r.pretty(t)+", expected "+r.pretty(e)+")")}},isSignature:function(e,t){var n=this.reader.index;this.reader.setIndex(e);var s=this.reader.readString(4)===t;return this.reader.setIndex(n),s},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var e=this.reader.readData(this.zipCommentLength),t=a.uint8array?"uint8array":"array",n=r.transformTo(t,e);this.zipComment=this.loadOptions.decodeFileName(n)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var e,t,n,s=this.zip64EndOfCentralSize-44;0<s;)e=this.reader.readInt(2),t=this.reader.readInt(4),n=this.reader.readData(t),this.zip64ExtensibleData[e]={id:e,length:t,value:n}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var e,t;for(e=0;e<this.files.length;e++)t=this.files[e],this.reader.setIndex(t.localHeaderOffset),this.checkSignature(i.LOCAL_FILE_HEADER),t.readLocalPart(this.reader),t.handleUTF8(),t.processAttributes()},readCentralDir:function(){var e;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(i.CENTRAL_FILE_HEADER);)(e=new o({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(e);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var e=this.reader.lastIndexOfSignature(i.CENTRAL_DIRECTORY_END);if(e<0)throw this.isSignature(0,i.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(e);var t=e;if(this.checkSignature(i.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===r.MAX_VALUE_16BITS||this.diskWithCentralDirStart===r.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===r.MAX_VALUE_16BITS||this.centralDirRecords===r.MAX_VALUE_16BITS||this.centralDirSize===r.MAX_VALUE_32BITS||this.centralDirOffset===r.MAX_VALUE_32BITS){if(this.zip64=!0,(e=this.reader.lastIndexOfSignature(i.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(e),this.checkSignature(i.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,i.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(i.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(i.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var n=this.centralDirOffset+this.centralDirSize;this.zip64&&(n+=20,n+=12+this.zip64EndOfCentralSize);var s=t-n;if(0<s)this.isSignature(t,i.CENTRAL_FILE_HEADER)||(this.reader.zero=s);else if(s<0)throw new Error("Corrupted zip: missing "+Math.abs(s)+" bytes.")},prepareReader:function(e){this.reader=s(e)},load:function(e){this.prepareReader(e),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},t.exports=l},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(e,t,n){"use strict";var s=e("./reader/readerFor"),r=e("./utils"),i=e("./compressedObject"),o=e("./crc32"),a=e("./utf8"),l=e("./compressions"),c=e("./support");function h(e,t){this.options=e,this.loadOptions=t}h.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(e){var t,n;if(e.skip(22),this.fileNameLength=e.readInt(2),n=e.readInt(2),this.fileName=e.readData(this.fileNameLength),e.skip(n),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(t=function(e){for(var t in l)if(Object.prototype.hasOwnProperty.call(l,t)&&l[t].magic===e)return l[t];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+r.pretty(this.compressionMethod)+" unknown (inner file : "+r.transformTo("string",this.fileName)+")");this.decompressed=new i(this.compressedSize,this.uncompressedSize,this.crc32,t,e.readData(this.compressedSize))},readCentralPart:function(e){this.versionMadeBy=e.readInt(2),e.skip(2),this.bitFlag=e.readInt(2),this.compressionMethod=e.readString(2),this.date=e.readDate(),this.crc32=e.readInt(4),this.compressedSize=e.readInt(4),this.uncompressedSize=e.readInt(4);var t=e.readInt(2);if(this.extraFieldsLength=e.readInt(2),this.fileCommentLength=e.readInt(2),this.diskNumberStart=e.readInt(2),this.internalFileAttributes=e.readInt(2),this.externalFileAttributes=e.readInt(4),this.localHeaderOffset=e.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");e.skip(t),this.readExtraFields(e),this.parseZIP64ExtraField(e),this.fileComment=e.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var e=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0==e&&(this.dosPermissions=63&this.externalFileAttributes),3==e&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var e=s(this.extraFields[1].value);this.uncompressedSize===r.MAX_VALUE_32BITS&&(this.uncompressedSize=e.readInt(8)),this.compressedSize===r.MAX_VALUE_32BITS&&(this.compressedSize=e.readInt(8)),this.localHeaderOffset===r.MAX_VALUE_32BITS&&(this.localHeaderOffset=e.readInt(8)),this.diskNumberStart===r.MAX_VALUE_32BITS&&(this.diskNumberStart=e.readInt(4))}},readExtraFields:function(e){var t,n,s,r=e.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});e.index+4<r;)t=e.readInt(2),n=e.readInt(2),s=e.readData(n),this.extraFields[t]={id:t,length:n,value:s};e.setIndex(r)},handleUTF8:function(){var e=c.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=a.utf8decode(this.fileName),this.fileCommentStr=a.utf8decode(this.fileComment);else{var t=this.findExtraFieldUnicodePath();if(null!==t)this.fileNameStr=t;else{var n=r.transformTo(e,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(n)}var s=this.findExtraFieldUnicodeComment();if(null!==s)this.fileCommentStr=s;else{var i=r.transformTo(e,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(i)}}},findExtraFieldUnicodePath:function(){var e=this.extraFields[28789];if(e){var t=s(e.value);return 1!==t.readInt(1)||o(this.fileName)!==t.readInt(4)?null:a.utf8decode(t.readData(e.length-5))}return null},findExtraFieldUnicodeComment:function(){var e=this.extraFields[25461];if(e){var t=s(e.value);return 1!==t.readInt(1)||o(this.fileComment)!==t.readInt(4)?null:a.utf8decode(t.readData(e.length-5))}return null}},t.exports=h},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(e,t,n){"use strict";function s(e,t,n){this.name=e,this.dir=n.dir,this.date=n.date,this.comment=n.comment,this.unixPermissions=n.unixPermissions,this.dosPermissions=n.dosPermissions,this._data=t,this._dataBinary=n.binary,this.options={compression:n.compression,compressionOptions:n.compressionOptions}}var r=e("./stream/StreamHelper"),i=e("./stream/DataWorker"),o=e("./utf8"),a=e("./compressedObject"),l=e("./stream/GenericWorker");s.prototype={internalStream:function(e){var t=null,n="string";try{if(!e)throw new Error("No output type specified.");var s="string"===(n=e.toLowerCase())||"text"===n;"binarystring"!==n&&"text"!==n||(n="string"),t=this._decompressWorker();var i=!this._dataBinary;i&&!s&&(t=t.pipe(new o.Utf8EncodeWorker)),!i&&s&&(t=t.pipe(new o.Utf8DecodeWorker))}catch(e){(t=new l("error")).error(e)}return new r(t,n,"")},async:function(e,t){return this.internalStream(e).accumulate(t)},nodeStream:function(e,t){return this.internalStream(e||"nodebuffer").toNodejsStream(t)},_compressWorker:function(e,t){if(this._data instanceof a&&this._data.compression.magic===e.magic)return this._data.getCompressedWorker();var n=this._decompressWorker();return this._dataBinary||(n=n.pipe(new o.Utf8EncodeWorker)),a.createWorkerFrom(n,e,t)},_decompressWorker:function(){return this._data instanceof a?this._data.getContentWorker():this._data instanceof l?this._data:new i(this._data)}};for(var c=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],h=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},u=0;u<c.length;u++)s.prototype[c[u]]=h;t.exports=s},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(e,t,s){(function(e){"use strict";var n,s,r=e.MutationObserver||e.WebKitMutationObserver;if(r){var i=0,o=new r(h),a=e.document.createTextNode("");o.observe(a,{characterData:!0}),n=function(){a.data=i=++i%2}}else if(e.setImmediate||void 0===e.MessageChannel)n="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){h(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(h,0)};else{var l=new e.MessageChannel;l.port1.onmessage=h,n=function(){l.port2.postMessage(0)}}var c=[];function h(){var e,t;s=!0;for(var n=c.length;n;){for(t=c,c=[],e=-1;++e<n;)t[e]();n=c.length}s=!1}t.exports=function(e){1!==c.push(e)||s||n()}}).call(this,void 0!==n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],37:[function(e,t,n){"use strict";var s=e("immediate");function r(){}var i={},o=["REJECTED"],a=["FULFILLED"],l=["PENDING"];function c(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=l,this.queue=[],this.outcome=void 0,e!==r&&d(this,e)}function h(e,t,n){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function u(e,t,n){s((function(){var s;try{s=t(n)}catch(s){return i.reject(e,s)}s===e?i.reject(e,new TypeError("Cannot resolve promise with itself")):i.resolve(e,s)}))}function f(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function d(e,t){var n=!1;function s(t){n||(n=!0,i.reject(e,t))}function r(t){n||(n=!0,i.resolve(e,t))}var o=p((function(){t(r,s)}));"error"===o.status&&s(o.value)}function p(e,t){var n={};try{n.value=e(t),n.status="success"}catch(e){n.status="error",n.value=e}return n}(t.exports=c).prototype.finally=function(e){if("function"!=typeof e)return this;var t=this.constructor;return this.then((function(n){return t.resolve(e()).then((function(){return n}))}),(function(n){return t.resolve(e()).then((function(){throw n}))}))},c.prototype.catch=function(e){return this.then(null,e)},c.prototype.then=function(e,t){if("function"!=typeof e&&this.state===a||"function"!=typeof t&&this.state===o)return this;var n=new this.constructor(r);return this.state!==l?u(n,this.state===a?e:t,this.outcome):this.queue.push(new h(n,e,t)),n},h.prototype.callFulfilled=function(e){i.resolve(this.promise,e)},h.prototype.otherCallFulfilled=function(e){u(this.promise,this.onFulfilled,e)},h.prototype.callRejected=function(e){i.reject(this.promise,e)},h.prototype.otherCallRejected=function(e){u(this.promise,this.onRejected,e)},i.resolve=function(e,t){var n=p(f,t);if("error"===n.status)return i.reject(e,n.value);var s=n.value;if(s)d(e,s);else{e.state=a,e.outcome=t;for(var r=-1,o=e.queue.length;++r<o;)e.queue[r].callFulfilled(t)}return e},i.reject=function(e,t){e.state=o,e.outcome=t;for(var n=-1,s=e.queue.length;++n<s;)e.queue[n].callRejected(t);return e},c.resolve=function(e){return e instanceof this?e:i.resolve(new this(r),e)},c.reject=function(e){var t=new this(r);return i.reject(t,e)},c.all=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,s=!1;if(!n)return this.resolve([]);for(var o=new Array(n),a=0,l=-1,c=new this(r);++l<n;)h(e[l],l);return c;function h(e,r){t.resolve(e).then((function(e){o[r]=e,++a!==n||s||(s=!0,i.resolve(c,o))}),(function(e){s||(s=!0,i.reject(c,e))}))}},c.race=function(e){if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var t=e.length,n=!1;if(!t)return this.resolve([]);for(var s,o=-1,a=new this(r);++o<t;)s=e[o],this.resolve(s).then((function(e){n||(n=!0,i.resolve(a,e))}),(function(e){n||(n=!0,i.reject(a,e))}));return a}},{immediate:36}],38:[function(e,t,n){"use strict";var s={};(0,e("./lib/utils/common").assign)(s,e("./lib/deflate"),e("./lib/inflate"),e("./lib/zlib/constants")),t.exports=s},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(e,t,n){"use strict";var s=e("./zlib/deflate"),r=e("./utils/common"),i=e("./utils/strings"),o=e("./zlib/messages"),a=e("./zlib/zstream"),l=Object.prototype.toString,c=0,h=-1,u=0,f=8;function d(e){if(!(this instanceof d))return new d(e);this.options=r.assign({level:h,method:f,chunkSize:16384,windowBits:15,memLevel:8,strategy:u,to:""},e||{});var t=this.options;t.raw&&0<t.windowBits?t.windowBits=-t.windowBits:t.gzip&&0<t.windowBits&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;var n=s.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==c)throw new Error(o[n]);if(t.header&&s.deflateSetHeader(this.strm,t.header),t.dictionary){var p;if(p="string"==typeof t.dictionary?i.string2buf(t.dictionary):"[object ArrayBuffer]"===l.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(n=s.deflateSetDictionary(this.strm,p))!==c)throw new Error(o[n]);this._dict_set=!0}}function p(e,t){var n=new d(t);if(n.push(e,!0),n.err)throw n.msg||o[n.err];return n.result}d.prototype.push=function(e,t){var n,o,a=this.strm,h=this.options.chunkSize;if(this.ended)return!1;o=t===~~t?t:!0===t?4:0,"string"==typeof e?a.input=i.string2buf(e):"[object ArrayBuffer]"===l.call(e)?a.input=new Uint8Array(e):a.input=e,a.next_in=0,a.avail_in=a.input.length;do{if(0===a.avail_out&&(a.output=new r.Buf8(h),a.next_out=0,a.avail_out=h),1!==(n=s.deflate(a,o))&&n!==c)return this.onEnd(n),!(this.ended=!0);0!==a.avail_out&&(0!==a.avail_in||4!==o&&2!==o)||("string"===this.options.to?this.onData(i.buf2binstring(r.shrinkBuf(a.output,a.next_out))):this.onData(r.shrinkBuf(a.output,a.next_out)))}while((0<a.avail_in||0===a.avail_out)&&1!==n);return 4===o?(n=s.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===c):2!==o||(this.onEnd(c),!(a.avail_out=0))},d.prototype.onData=function(e){this.chunks.push(e)},d.prototype.onEnd=function(e){e===c&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=r.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},n.Deflate=d,n.deflate=p,n.deflateRaw=function(e,t){return(t=t||{}).raw=!0,p(e,t)},n.gzip=function(e,t){return(t=t||{}).gzip=!0,p(e,t)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(e,t,n){"use strict";var s=e("./zlib/inflate"),r=e("./utils/common"),i=e("./utils/strings"),o=e("./zlib/constants"),a=e("./zlib/messages"),l=e("./zlib/zstream"),c=e("./zlib/gzheader"),h=Object.prototype.toString;function u(e){if(!(this instanceof u))return new u(e);this.options=r.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&0<=t.windowBits&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(0<=t.windowBits&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),15<t.windowBits&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var n=s.inflateInit2(this.strm,t.windowBits);if(n!==o.Z_OK)throw new Error(a[n]);this.header=new c,s.inflateGetHeader(this.strm,this.header)}function f(e,t){var n=new u(t);if(n.push(e,!0),n.err)throw n.msg||a[n.err];return n.result}u.prototype.push=function(e,t){var n,a,l,c,u,f,d=this.strm,p=this.options.chunkSize,m=this.options.dictionary,g=!1;if(this.ended)return!1;a=t===~~t?t:!0===t?o.Z_FINISH:o.Z_NO_FLUSH,"string"==typeof e?d.input=i.binstring2buf(e):"[object ArrayBuffer]"===h.call(e)?d.input=new Uint8Array(e):d.input=e,d.next_in=0,d.avail_in=d.input.length;do{if(0===d.avail_out&&(d.output=new r.Buf8(p),d.next_out=0,d.avail_out=p),(n=s.inflate(d,o.Z_NO_FLUSH))===o.Z_NEED_DICT&&m&&(f="string"==typeof m?i.string2buf(m):"[object ArrayBuffer]"===h.call(m)?new Uint8Array(m):m,n=s.inflateSetDictionary(this.strm,f)),n===o.Z_BUF_ERROR&&!0===g&&(n=o.Z_OK,g=!1),n!==o.Z_STREAM_END&&n!==o.Z_OK)return this.onEnd(n),!(this.ended=!0);d.next_out&&(0!==d.avail_out&&n!==o.Z_STREAM_END&&(0!==d.avail_in||a!==o.Z_FINISH&&a!==o.Z_SYNC_FLUSH)||("string"===this.options.to?(l=i.utf8border(d.output,d.next_out),c=d.next_out-l,u=i.buf2string(d.output,l),d.next_out=c,d.avail_out=p-c,c&&r.arraySet(d.output,d.output,l,c,0),this.onData(u)):this.onData(r.shrinkBuf(d.output,d.next_out)))),0===d.avail_in&&0===d.avail_out&&(g=!0)}while((0<d.avail_in||0===d.avail_out)&&n!==o.Z_STREAM_END);return n===o.Z_STREAM_END&&(a=o.Z_FINISH),a===o.Z_FINISH?(n=s.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===o.Z_OK):a!==o.Z_SYNC_FLUSH||(this.onEnd(o.Z_OK),!(d.avail_out=0))},u.prototype.onData=function(e){this.chunks.push(e)},u.prototype.onEnd=function(e){e===o.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=r.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},n.Inflate=u,n.inflate=f,n.inflateRaw=function(e,t){return(t=t||{}).raw=!0,f(e,t)},n.ungzip=f},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(e,t,n){"use strict";var s="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;n.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var s in n)n.hasOwnProperty(s)&&(e[s]=n[s])}}return e},n.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var r={arraySet:function(e,t,n,s,r){if(t.subarray&&e.subarray)e.set(t.subarray(n,n+s),r);else for(var i=0;i<s;i++)e[r+i]=t[n+i]},flattenChunks:function(e){var t,n,s,r,i,o;for(t=s=0,n=e.length;t<n;t++)s+=e[t].length;for(o=new Uint8Array(s),t=r=0,n=e.length;t<n;t++)i=e[t],o.set(i,r),r+=i.length;return o}},i={arraySet:function(e,t,n,s,r){for(var i=0;i<s;i++)e[r+i]=t[n+i]},flattenChunks:function(e){return[].concat.apply([],e)}};n.setTyped=function(e){e?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,r)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,i))},n.setTyped(s)},{}],42:[function(e,t,n){"use strict";var s=e("./common"),r=!0,i=!0;try{String.fromCharCode.apply(null,[0])}catch(e){r=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){i=!1}for(var o=new s.Buf8(256),a=0;a<256;a++)o[a]=252<=a?6:248<=a?5:240<=a?4:224<=a?3:192<=a?2:1;function l(e,t){if(t<65537&&(e.subarray&&i||!e.subarray&&r))return String.fromCharCode.apply(null,s.shrinkBuf(e,t));for(var n="",o=0;o<t;o++)n+=String.fromCharCode(e[o]);return n}o[254]=o[254]=1,n.string2buf=function(e){var t,n,r,i,o,a=e.length,l=0;for(i=0;i<a;i++)55296==(64512&(n=e.charCodeAt(i)))&&i+1<a&&56320==(64512&(r=e.charCodeAt(i+1)))&&(n=65536+(n-55296<<10)+(r-56320),i++),l+=n<128?1:n<2048?2:n<65536?3:4;for(t=new s.Buf8(l),i=o=0;o<l;i++)55296==(64512&(n=e.charCodeAt(i)))&&i+1<a&&56320==(64512&(r=e.charCodeAt(i+1)))&&(n=65536+(n-55296<<10)+(r-56320),i++),n<128?t[o++]=n:(n<2048?t[o++]=192|n>>>6:(n<65536?t[o++]=224|n>>>12:(t[o++]=240|n>>>18,t[o++]=128|n>>>12&63),t[o++]=128|n>>>6&63),t[o++]=128|63&n);return t},n.buf2binstring=function(e){return l(e,e.length)},n.binstring2buf=function(e){for(var t=new s.Buf8(e.length),n=0,r=t.length;n<r;n++)t[n]=e.charCodeAt(n);return t},n.buf2string=function(e,t){var n,s,r,i,a=t||e.length,c=new Array(2*a);for(n=s=0;n<a;)if((r=e[n++])<128)c[s++]=r;else if(4<(i=o[r]))c[s++]=65533,n+=i-1;else{for(r&=2===i?31:3===i?15:7;1<i&&n<a;)r=r<<6|63&e[n++],i--;1<i?c[s++]=65533:r<65536?c[s++]=r:(r-=65536,c[s++]=55296|r>>10&1023,c[s++]=56320|1023&r)}return l(c,s)},n.utf8border=function(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;0<=n&&128==(192&e[n]);)n--;return n<0||0===n?t:n+o[e[n]]>t?n:t}},{"./common":41}],43:[function(e,t,n){"use strict";t.exports=function(e,t,n,s){for(var r=65535&e|0,i=e>>>16&65535|0,o=0;0!==n;){for(n-=o=2e3<n?2e3:n;i=i+(r=r+t[s++]|0)|0,--o;);r%=65521,i%=65521}return r|i<<16|0}},{}],44:[function(e,t,n){"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(e,t,n){"use strict";var s=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var s=0;s<8;s++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();t.exports=function(e,t,n,r){var i=s,o=r+n;e^=-1;for(var a=r;a<o;a++)e=e>>>8^i[255&(e^t[a])];return-1^e}},{}],46:[function(e,t,n){"use strict";var s,r=e("../utils/common"),i=e("./trees"),o=e("./adler32"),a=e("./crc32"),l=e("./messages"),c=0,h=0,u=-2,f=2,d=8,p=286,m=30,g=19,y=2*p+1,_=15,b=3,v=258,w=v+b+1,k=42,S=113;function E(e,t){return e.msg=l[t],t}function x(e){return(e<<1)-(4<e?9:0)}function A(e){for(var t=e.length;0<=--t;)e[t]=0}function O(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(r.arraySet(e.output,t.pending_buf,t.pending_out,n,e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))}function C(e,t){i._tr_flush_block(e,0<=e.block_start?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,O(e.strm)}function I(e,t){e.pending_buf[e.pending++]=t}function N(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function T(e,t){var n,s,r=e.max_chain_length,i=e.strstart,o=e.prev_length,a=e.nice_match,l=e.strstart>e.w_size-w?e.strstart-(e.w_size-w):0,c=e.window,h=e.w_mask,u=e.prev,f=e.strstart+v,d=c[i+o-1],p=c[i+o];e.prev_length>=e.good_match&&(r>>=2),a>e.lookahead&&(a=e.lookahead);do{if(c[(n=t)+o]===p&&c[n+o-1]===d&&c[n]===c[i]&&c[++n]===c[i+1]){i+=2,n++;do{}while(c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&i<f);if(s=v-(f-i),i=f-v,o<s){if(e.match_start=t,a<=(o=s))break;d=c[i+o-1],p=c[i+o]}}}while((t=u[t&h])>l&&0!=--r);return o<=e.lookahead?o:e.lookahead}function L(e){var t,n,s,i,l,c,h,u,f,d,p=e.w_size;do{if(i=e.window_size-e.lookahead-e.strstart,e.strstart>=p+(p-w)){for(r.arraySet(e.window,e.window,p,p,0),e.match_start-=p,e.strstart-=p,e.block_start-=p,t=n=e.hash_size;s=e.head[--t],e.head[t]=p<=s?s-p:0,--n;);for(t=n=p;s=e.prev[--t],e.prev[t]=p<=s?s-p:0,--n;);i+=p}if(0===e.strm.avail_in)break;if(c=e.strm,h=e.window,u=e.strstart+e.lookahead,d=void 0,(f=i)<(d=c.avail_in)&&(d=f),n=0===d?0:(c.avail_in-=d,r.arraySet(h,c.input,c.next_in,d,u),1===c.state.wrap?c.adler=o(c.adler,h,d,u):2===c.state.wrap&&(c.adler=a(c.adler,h,d,u)),c.next_in+=d,c.total_in+=d,d),e.lookahead+=n,e.lookahead+e.insert>=b)for(l=e.strstart-e.insert,e.ins_h=e.window[l],e.ins_h=(e.ins_h<<e.hash_shift^e.window[l+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[l+b-1])&e.hash_mask,e.prev[l&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=l,l++,e.insert--,!(e.lookahead+e.insert<b)););}while(e.lookahead<w&&0!==e.strm.avail_in)}function B(e,t){for(var n,s;;){if(e.lookahead<w){if(L(e),e.lookahead<w&&t===c)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=b&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+b-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-w&&(e.match_length=T(e,n)),e.match_length>=b)if(s=i._tr_tally(e,e.strstart-e.match_start,e.match_length-b),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=b){for(e.match_length--;e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+b-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart,0!=--e.match_length;);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else s=i._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(s&&(C(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<b-1?e.strstart:b-1,4===t?(C(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(C(e,!1),0===e.strm.avail_out)?1:2}function z(e,t){for(var n,s,r;;){if(e.lookahead<w){if(L(e),e.lookahead<w&&t===c)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=b&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+b-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=b-1,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-w&&(e.match_length=T(e,n),e.match_length<=5&&(1===e.strategy||e.match_length===b&&4096<e.strstart-e.match_start)&&(e.match_length=b-1)),e.prev_length>=b&&e.match_length<=e.prev_length){for(r=e.strstart+e.lookahead-b,s=i._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-b),e.lookahead-=e.prev_length-1,e.prev_length-=2;++e.strstart<=r&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+b-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!=--e.prev_length;);if(e.match_available=0,e.match_length=b-1,e.strstart++,s&&(C(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if((s=i._tr_tally(e,0,e.window[e.strstart-1]))&&C(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(s=i._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<b-1?e.strstart:b-1,4===t?(C(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(C(e,!1),0===e.strm.avail_out)?1:2}function D(e,t,n,s,r){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=s,this.func=r}function P(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=d,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new r.Buf16(2*y),this.dyn_dtree=new r.Buf16(2*(2*m+1)),this.bl_tree=new r.Buf16(2*(2*g+1)),A(this.dyn_ltree),A(this.dyn_dtree),A(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new r.Buf16(_+1),this.heap=new r.Buf16(2*p+1),A(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new r.Buf16(2*p+1),A(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function R(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=f,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?k:S,e.adler=2===t.wrap?0:1,t.last_flush=c,i._tr_init(t),h):E(e,u)}function j(e){var t=R(e);return t===h&&function(e){e.window_size=2*e.w_size,A(e.head),e.max_lazy_match=s[e.level].max_lazy,e.good_match=s[e.level].good_length,e.nice_match=s[e.level].nice_length,e.max_chain_length=s[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=b-1,e.match_available=0,e.ins_h=0}(e.state),t}function F(e,t,n,s,i,o){if(!e)return u;var a=1;if(-1===t&&(t=6),s<0?(a=0,s=-s):15<s&&(a=2,s-=16),i<1||9<i||n!==d||s<8||15<s||t<0||9<t||o<0||4<o)return E(e,u);8===s&&(s=9);var l=new P;return(e.state=l).strm=e,l.wrap=a,l.gzhead=null,l.w_bits=s,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=i+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+b-1)/b),l.window=new r.Buf8(2*l.w_size),l.head=new r.Buf16(l.hash_size),l.prev=new r.Buf16(l.w_size),l.lit_bufsize=1<<i+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new r.Buf8(l.pending_buf_size),l.d_buf=1*l.lit_bufsize,l.l_buf=3*l.lit_bufsize,l.level=t,l.strategy=o,l.method=n,j(e)}s=[new D(0,0,0,0,(function(e,t){var n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(L(e),0===e.lookahead&&t===c)return 1;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var s=e.block_start+n;if((0===e.strstart||e.strstart>=s)&&(e.lookahead=e.strstart-s,e.strstart=s,C(e,!1),0===e.strm.avail_out))return 1;if(e.strstart-e.block_start>=e.w_size-w&&(C(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(C(e,!0),0===e.strm.avail_out?3:4):(e.strstart>e.block_start&&(C(e,!1),e.strm.avail_out),1)})),new D(4,4,8,4,B),new D(4,5,16,8,B),new D(4,6,32,32,B),new D(4,4,16,16,z),new D(8,16,32,32,z),new D(8,16,128,128,z),new D(8,32,128,256,z),new D(32,128,258,1024,z),new D(32,258,258,4096,z)],n.deflateInit=function(e,t){return F(e,t,d,15,8,0)},n.deflateInit2=F,n.deflateReset=j,n.deflateResetKeep=R,n.deflateSetHeader=function(e,t){return e&&e.state?2!==e.state.wrap?u:(e.state.gzhead=t,h):u},n.deflate=function(e,t){var n,r,o,l;if(!e||!e.state||5<t||t<0)return e?E(e,u):u;if(r=e.state,!e.output||!e.input&&0!==e.avail_in||666===r.status&&4!==t)return E(e,0===e.avail_out?-5:u);if(r.strm=e,n=r.last_flush,r.last_flush=t,r.status===k)if(2===r.wrap)e.adler=0,I(r,31),I(r,139),I(r,8),r.gzhead?(I(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),I(r,255&r.gzhead.time),I(r,r.gzhead.time>>8&255),I(r,r.gzhead.time>>16&255),I(r,r.gzhead.time>>24&255),I(r,9===r.level?2:2<=r.strategy||r.level<2?4:0),I(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(I(r,255&r.gzhead.extra.length),I(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(e.adler=a(e.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=69):(I(r,0),I(r,0),I(r,0),I(r,0),I(r,0),I(r,9===r.level?2:2<=r.strategy||r.level<2?4:0),I(r,3),r.status=S);else{var f=d+(r.w_bits-8<<4)<<8;f|=(2<=r.strategy||r.level<2?0:r.level<6?1:6===r.level?2:3)<<6,0!==r.strstart&&(f|=32),f+=31-f%31,r.status=S,N(r,f),0!==r.strstart&&(N(r,e.adler>>>16),N(r,65535&e.adler)),e.adler=1}if(69===r.status)if(r.gzhead.extra){for(o=r.pending;r.gzindex<(65535&r.gzhead.extra.length)&&(r.pending!==r.pending_buf_size||(r.gzhead.hcrc&&r.pending>o&&(e.adler=a(e.adler,r.pending_buf,r.pending-o,o)),O(e),o=r.pending,r.pending!==r.pending_buf_size));)I(r,255&r.gzhead.extra[r.gzindex]),r.gzindex++;r.gzhead.hcrc&&r.pending>o&&(e.adler=a(e.adler,r.pending_buf,r.pending-o,o)),r.gzindex===r.gzhead.extra.length&&(r.gzindex=0,r.status=73)}else r.status=73;if(73===r.status)if(r.gzhead.name){o=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>o&&(e.adler=a(e.adler,r.pending_buf,r.pending-o,o)),O(e),o=r.pending,r.pending===r.pending_buf_size)){l=1;break}l=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,I(r,l)}while(0!==l);r.gzhead.hcrc&&r.pending>o&&(e.adler=a(e.adler,r.pending_buf,r.pending-o,o)),0===l&&(r.gzindex=0,r.status=91)}else r.status=91;if(91===r.status)if(r.gzhead.comment){o=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>o&&(e.adler=a(e.adler,r.pending_buf,r.pending-o,o)),O(e),o=r.pending,r.pending===r.pending_buf_size)){l=1;break}l=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,I(r,l)}while(0!==l);r.gzhead.hcrc&&r.pending>o&&(e.adler=a(e.adler,r.pending_buf,r.pending-o,o)),0===l&&(r.status=103)}else r.status=103;if(103===r.status&&(r.gzhead.hcrc?(r.pending+2>r.pending_buf_size&&O(e),r.pending+2<=r.pending_buf_size&&(I(r,255&e.adler),I(r,e.adler>>8&255),e.adler=0,r.status=S)):r.status=S),0!==r.pending){if(O(e),0===e.avail_out)return r.last_flush=-1,h}else if(0===e.avail_in&&x(t)<=x(n)&&4!==t)return E(e,-5);if(666===r.status&&0!==e.avail_in)return E(e,-5);if(0!==e.avail_in||0!==r.lookahead||t!==c&&666!==r.status){var p=2===r.strategy?function(e,t){for(var n;;){if(0===e.lookahead&&(L(e),0===e.lookahead)){if(t===c)return 1;break}if(e.match_length=0,n=i._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(C(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(C(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(C(e,!1),0===e.strm.avail_out)?1:2}(r,t):3===r.strategy?function(e,t){for(var n,s,r,o,a=e.window;;){if(e.lookahead<=v){if(L(e),e.lookahead<=v&&t===c)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=b&&0<e.strstart&&(s=a[r=e.strstart-1])===a[++r]&&s===a[++r]&&s===a[++r]){o=e.strstart+v;do{}while(s===a[++r]&&s===a[++r]&&s===a[++r]&&s===a[++r]&&s===a[++r]&&s===a[++r]&&s===a[++r]&&s===a[++r]&&r<o);e.match_length=v-(o-r),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=b?(n=i._tr_tally(e,1,e.match_length-b),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=i._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(C(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(C(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(C(e,!1),0===e.strm.avail_out)?1:2}(r,t):s[r.level].func(r,t);if(3!==p&&4!==p||(r.status=666),1===p||3===p)return 0===e.avail_out&&(r.last_flush=-1),h;if(2===p&&(1===t?i._tr_align(r):5!==t&&(i._tr_stored_block(r,0,0,!1),3===t&&(A(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),O(e),0===e.avail_out))return r.last_flush=-1,h}return 4!==t?h:r.wrap<=0?1:(2===r.wrap?(I(r,255&e.adler),I(r,e.adler>>8&255),I(r,e.adler>>16&255),I(r,e.adler>>24&255),I(r,255&e.total_in),I(r,e.total_in>>8&255),I(r,e.total_in>>16&255),I(r,e.total_in>>24&255)):(N(r,e.adler>>>16),N(r,65535&e.adler)),O(e),0<r.wrap&&(r.wrap=-r.wrap),0!==r.pending?h:1)},n.deflateEnd=function(e){var t;return e&&e.state?(t=e.state.status)!==k&&69!==t&&73!==t&&91!==t&&103!==t&&t!==S&&666!==t?E(e,u):(e.state=null,t===S?E(e,-3):h):u},n.deflateSetDictionary=function(e,t){var n,s,i,a,l,c,f,d,p=t.length;if(!e||!e.state)return u;if(2===(a=(n=e.state).wrap)||1===a&&n.status!==k||n.lookahead)return u;for(1===a&&(e.adler=o(e.adler,t,p,0)),n.wrap=0,p>=n.w_size&&(0===a&&(A(n.head),n.strstart=0,n.block_start=0,n.insert=0),d=new r.Buf8(n.w_size),r.arraySet(d,t,p-n.w_size,n.w_size,0),t=d,p=n.w_size),l=e.avail_in,c=e.next_in,f=e.input,e.avail_in=p,e.next_in=0,e.input=t,L(n);n.lookahead>=b;){for(s=n.strstart,i=n.lookahead-(b-1);n.ins_h=(n.ins_h<<n.hash_shift^n.window[s+b-1])&n.hash_mask,n.prev[s&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=s,s++,--i;);n.strstart=s,n.lookahead=b-1,L(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=b-1,n.match_available=0,e.next_in=c,e.input=f,e.avail_in=l,n.wrap=a,h},n.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(e,t,n){"use strict";t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(e,t,n){"use strict";t.exports=function(e,t){var n,s,r,i,o,a,l,c,h,u,f,d,p,m,g,y,_,b,v,w,k,S,E,x,A;n=e.state,s=e.next_in,x=e.input,r=s+(e.avail_in-5),i=e.next_out,A=e.output,o=i-(t-e.avail_out),a=i+(e.avail_out-257),l=n.dmax,c=n.wsize,h=n.whave,u=n.wnext,f=n.window,d=n.hold,p=n.bits,m=n.lencode,g=n.distcode,y=(1<<n.lenbits)-1,_=(1<<n.distbits)-1;e:do{p<15&&(d+=x[s++]<<p,p+=8,d+=x[s++]<<p,p+=8),b=m[d&y];t:for(;;){if(d>>>=v=b>>>24,p-=v,0==(v=b>>>16&255))A[i++]=65535&b;else{if(!(16&v)){if(0==(64&v)){b=m[(65535&b)+(d&(1<<v)-1)];continue t}if(32&v){n.mode=12;break e}e.msg="invalid literal/length code",n.mode=30;break e}w=65535&b,(v&=15)&&(p<v&&(d+=x[s++]<<p,p+=8),w+=d&(1<<v)-1,d>>>=v,p-=v),p<15&&(d+=x[s++]<<p,p+=8,d+=x[s++]<<p,p+=8),b=g[d&_];n:for(;;){if(d>>>=v=b>>>24,p-=v,!(16&(v=b>>>16&255))){if(0==(64&v)){b=g[(65535&b)+(d&(1<<v)-1)];continue n}e.msg="invalid distance code",n.mode=30;break e}if(k=65535&b,p<(v&=15)&&(d+=x[s++]<<p,(p+=8)<v&&(d+=x[s++]<<p,p+=8)),l<(k+=d&(1<<v)-1)){e.msg="invalid distance too far back",n.mode=30;break e}if(d>>>=v,p-=v,(v=i-o)<k){if(h<(v=k-v)&&n.sane){e.msg="invalid distance too far back",n.mode=30;break e}if(E=f,(S=0)===u){if(S+=c-v,v<w){for(w-=v;A[i++]=f[S++],--v;);S=i-k,E=A}}else if(u<v){if(S+=c+u-v,(v-=u)<w){for(w-=v;A[i++]=f[S++],--v;);if(S=0,u<w){for(w-=v=u;A[i++]=f[S++],--v;);S=i-k,E=A}}}else if(S+=u-v,v<w){for(w-=v;A[i++]=f[S++],--v;);S=i-k,E=A}for(;2<w;)A[i++]=E[S++],A[i++]=E[S++],A[i++]=E[S++],w-=3;w&&(A[i++]=E[S++],1<w&&(A[i++]=E[S++]))}else{for(S=i-k;A[i++]=A[S++],A[i++]=A[S++],A[i++]=A[S++],2<(w-=3););w&&(A[i++]=A[S++],1<w&&(A[i++]=A[S++]))}break}}break}}while(s<r&&i<a);s-=w=p>>3,d&=(1<<(p-=w<<3))-1,e.next_in=s,e.next_out=i,e.avail_in=s<r?r-s+5:5-(s-r),e.avail_out=i<a?a-i+257:257-(i-a),n.hold=d,n.bits=p}},{}],49:[function(e,t,n){"use strict";var s=e("../utils/common"),r=e("./adler32"),i=e("./crc32"),o=e("./inffast"),a=e("./inftrees"),l=0,c=-2,h=1,u=852,f=592;function d(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function p(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new s.Buf16(320),this.work=new s.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function m(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=h,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new s.Buf32(u),t.distcode=t.distdyn=new s.Buf32(f),t.sane=1,t.back=-1,l):c}function g(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,m(e)):c}function y(e,t){var n,s;return e&&e.state?(s=e.state,t<0?(n=0,t=-t):(n=1+(t>>4),t<48&&(t&=15)),t&&(t<8||15<t)?c:(null!==s.window&&s.wbits!==t&&(s.window=null),s.wrap=n,s.wbits=t,g(e))):c}function _(e,t){var n,s;return e?(s=new p,(e.state=s).window=null,(n=y(e,t))!==l&&(e.state=null),n):c}var b,v,w=!0;function k(e){if(w){var t;for(b=new s.Buf32(512),v=new s.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(a(1,e.lens,0,288,b,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;a(2,e.lens,0,32,v,0,e.work,{bits:5}),w=!1}e.lencode=b,e.lenbits=9,e.distcode=v,e.distbits=5}function S(e,t,n,r){var i,o=e.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new s.Buf8(o.wsize)),r>=o.wsize?(s.arraySet(o.window,t,n-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):(r<(i=o.wsize-o.wnext)&&(i=r),s.arraySet(o.window,t,n-r,i,o.wnext),(r-=i)?(s.arraySet(o.window,t,n-r,r,0),o.wnext=r,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0}n.inflateReset=g,n.inflateReset2=y,n.inflateResetKeep=m,n.inflateInit=function(e){return _(e,15)},n.inflateInit2=_,n.inflate=function(e,t){var n,u,f,p,m,g,y,_,b,v,w,E,x,A,O,C,I,N,T,L,B,z,D,P,R=0,j=new s.Buf8(4),F=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return c;12===(n=e.state).mode&&(n.mode=13),m=e.next_out,f=e.output,y=e.avail_out,p=e.next_in,u=e.input,g=e.avail_in,_=n.hold,b=n.bits,v=g,w=y,z=l;e:for(;;)switch(n.mode){case h:if(0===n.wrap){n.mode=13;break}for(;b<16;){if(0===g)break e;g--,_+=u[p++]<<b,b+=8}if(2&n.wrap&&35615===_){j[n.check=0]=255&_,j[1]=_>>>8&255,n.check=i(n.check,j,2,0),b=_=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&_)<<8)+(_>>8))%31){e.msg="incorrect header check",n.mode=30;break}if(8!=(15&_)){e.msg="unknown compression method",n.mode=30;break}if(b-=4,B=8+(15&(_>>>=4)),0===n.wbits)n.wbits=B;else if(B>n.wbits){e.msg="invalid window size",n.mode=30;break}n.dmax=1<<B,e.adler=n.check=1,n.mode=512&_?10:12,b=_=0;break;case 2:for(;b<16;){if(0===g)break e;g--,_+=u[p++]<<b,b+=8}if(n.flags=_,8!=(255&n.flags)){e.msg="unknown compression method",n.mode=30;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=30;break}n.head&&(n.head.text=_>>8&1),512&n.flags&&(j[0]=255&_,j[1]=_>>>8&255,n.check=i(n.check,j,2,0)),b=_=0,n.mode=3;case 3:for(;b<32;){if(0===g)break e;g--,_+=u[p++]<<b,b+=8}n.head&&(n.head.time=_),512&n.flags&&(j[0]=255&_,j[1]=_>>>8&255,j[2]=_>>>16&255,j[3]=_>>>24&255,n.check=i(n.check,j,4,0)),b=_=0,n.mode=4;case 4:for(;b<16;){if(0===g)break e;g--,_+=u[p++]<<b,b+=8}n.head&&(n.head.xflags=255&_,n.head.os=_>>8),512&n.flags&&(j[0]=255&_,j[1]=_>>>8&255,n.check=i(n.check,j,2,0)),b=_=0,n.mode=5;case 5:if(1024&n.flags){for(;b<16;){if(0===g)break e;g--,_+=u[p++]<<b,b+=8}n.length=_,n.head&&(n.head.extra_len=_),512&n.flags&&(j[0]=255&_,j[1]=_>>>8&255,n.check=i(n.check,j,2,0)),b=_=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&(g<(E=n.length)&&(E=g),E&&(n.head&&(B=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),s.arraySet(n.head.extra,u,p,E,B)),512&n.flags&&(n.check=i(n.check,u,E,p)),g-=E,p+=E,n.length-=E),n.length))break e;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===g)break e;for(E=0;B=u[p+E++],n.head&&B&&n.length<65536&&(n.head.name+=String.fromCharCode(B)),B&&E<g;);if(512&n.flags&&(n.check=i(n.check,u,E,p)),g-=E,p+=E,B)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===g)break e;for(E=0;B=u[p+E++],n.head&&B&&n.length<65536&&(n.head.comment+=String.fromCharCode(B)),B&&E<g;);if(512&n.flags&&(n.check=i(n.check,u,E,p)),g-=E,p+=E,B)break e}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;b<16;){if(0===g)break e;g--,_+=u[p++]<<b,b+=8}if(_!==(65535&n.check)){e.msg="header crc mismatch",n.mode=30;break}b=_=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=12;break;case 10:for(;b<32;){if(0===g)break e;g--,_+=u[p++]<<b,b+=8}e.adler=n.check=d(_),b=_=0,n.mode=11;case 11:if(0===n.havedict)return e.next_out=m,e.avail_out=y,e.next_in=p,e.avail_in=g,n.hold=_,n.bits=b,2;e.adler=n.check=1,n.mode=12;case 12:if(5===t||6===t)break e;case 13:if(n.last){_>>>=7&b,b-=7&b,n.mode=27;break}for(;b<3;){if(0===g)break e;g--,_+=u[p++]<<b,b+=8}switch(n.last=1&_,b-=1,3&(_>>>=1)){case 0:n.mode=14;break;case 1:if(k(n),n.mode=20,6!==t)break;_>>>=2,b-=2;break e;case 2:n.mode=17;break;case 3:e.msg="invalid block type",n.mode=30}_>>>=2,b-=2;break;case 14:for(_>>>=7&b,b-=7&b;b<32;){if(0===g)break e;g--,_+=u[p++]<<b,b+=8}if((65535&_)!=(_>>>16^65535)){e.msg="invalid stored block lengths",n.mode=30;break}if(n.length=65535&_,b=_=0,n.mode=15,6===t)break e;case 15:n.mode=16;case 16:if(E=n.length){if(g<E&&(E=g),y<E&&(E=y),0===E)break e;s.arraySet(f,u,p,E,m),g-=E,p+=E,y-=E,m+=E,n.length-=E;break}n.mode=12;break;case 17:for(;b<14;){if(0===g)break e;g--,_+=u[p++]<<b,b+=8}if(n.nlen=257+(31&_),_>>>=5,b-=5,n.ndist=1+(31&_),_>>>=5,b-=5,n.ncode=4+(15&_),_>>>=4,b-=4,286<n.nlen||30<n.ndist){e.msg="too many length or distance symbols",n.mode=30;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;b<3;){if(0===g)break e;g--,_+=u[p++]<<b,b+=8}n.lens[F[n.have++]]=7&_,_>>>=3,b-=3}for(;n.have<19;)n.lens[F[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,D={bits:n.lenbits},z=a(0,n.lens,0,19,n.lencode,0,n.work,D),n.lenbits=D.bits,z){e.msg="invalid code lengths set",n.mode=30;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;C=(R=n.lencode[_&(1<<n.lenbits)-1])>>>16&255,I=65535&R,!((O=R>>>24)<=b);){if(0===g)break e;g--,_+=u[p++]<<b,b+=8}if(I<16)_>>>=O,b-=O,n.lens[n.have++]=I;else{if(16===I){for(P=O+2;b<P;){if(0===g)break e;g--,_+=u[p++]<<b,b+=8}if(_>>>=O,b-=O,0===n.have){e.msg="invalid bit length repeat",n.mode=30;break}B=n.lens[n.have-1],E=3+(3&_),_>>>=2,b-=2}else if(17===I){for(P=O+3;b<P;){if(0===g)break e;g--,_+=u[p++]<<b,b+=8}b-=O,B=0,E=3+(7&(_>>>=O)),_>>>=3,b-=3}else{for(P=O+7;b<P;){if(0===g)break e;g--,_+=u[p++]<<b,b+=8}b-=O,B=0,E=11+(127&(_>>>=O)),_>>>=7,b-=7}if(n.have+E>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=30;break}for(;E--;)n.lens[n.have++]=B}}if(30===n.mode)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=30;break}if(n.lenbits=9,D={bits:n.lenbits},z=a(1,n.lens,0,n.nlen,n.lencode,0,n.work,D),n.lenbits=D.bits,z){e.msg="invalid literal/lengths set",n.mode=30;break}if(n.distbits=6,n.distcode=n.distdyn,D={bits:n.distbits},z=a(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,D),n.distbits=D.bits,z){e.msg="invalid distances set",n.mode=30;break}if(n.mode=20,6===t)break e;case 20:n.mode=21;case 21:if(6<=g&&258<=y){e.next_out=m,e.avail_out=y,e.next_in=p,e.avail_in=g,n.hold=_,n.bits=b,o(e,w),m=e.next_out,f=e.output,y=e.avail_out,p=e.next_in,u=e.input,g=e.avail_in,_=n.hold,b=n.bits,12===n.mode&&(n.back=-1);break}for(n.back=0;C=(R=n.lencode[_&(1<<n.lenbits)-1])>>>16&255,I=65535&R,!((O=R>>>24)<=b);){if(0===g)break e;g--,_+=u[p++]<<b,b+=8}if(C&&0==(240&C)){for(N=O,T=C,L=I;C=(R=n.lencode[L+((_&(1<<N+T)-1)>>N)])>>>16&255,I=65535&R,!(N+(O=R>>>24)<=b);){if(0===g)break e;g--,_+=u[p++]<<b,b+=8}_>>>=N,b-=N,n.back+=N}if(_>>>=O,b-=O,n.back+=O,n.length=I,0===C){n.mode=26;break}if(32&C){n.back=-1,n.mode=12;break}if(64&C){e.msg="invalid literal/length code",n.mode=30;break}n.extra=15&C,n.mode=22;case 22:if(n.extra){for(P=n.extra;b<P;){if(0===g)break e;g--,_+=u[p++]<<b,b+=8}n.length+=_&(1<<n.extra)-1,_>>>=n.extra,b-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;C=(R=n.distcode[_&(1<<n.distbits)-1])>>>16&255,I=65535&R,!((O=R>>>24)<=b);){if(0===g)break e;g--,_+=u[p++]<<b,b+=8}if(0==(240&C)){for(N=O,T=C,L=I;C=(R=n.distcode[L+((_&(1<<N+T)-1)>>N)])>>>16&255,I=65535&R,!(N+(O=R>>>24)<=b);){if(0===g)break e;g--,_+=u[p++]<<b,b+=8}_>>>=N,b-=N,n.back+=N}if(_>>>=O,b-=O,n.back+=O,64&C){e.msg="invalid distance code",n.mode=30;break}n.offset=I,n.extra=15&C,n.mode=24;case 24:if(n.extra){for(P=n.extra;b<P;){if(0===g)break e;g--,_+=u[p++]<<b,b+=8}n.offset+=_&(1<<n.extra)-1,_>>>=n.extra,b-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=30;break}n.mode=25;case 25:if(0===y)break e;if(E=w-y,n.offset>E){if((E=n.offset-E)>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=30;break}x=E>n.wnext?(E-=n.wnext,n.wsize-E):n.wnext-E,E>n.length&&(E=n.length),A=n.window}else A=f,x=m-n.offset,E=n.length;for(y<E&&(E=y),y-=E,n.length-=E;f[m++]=A[x++],--E;);0===n.length&&(n.mode=21);break;case 26:if(0===y)break e;f[m++]=n.length,y--,n.mode=21;break;case 27:if(n.wrap){for(;b<32;){if(0===g)break e;g--,_|=u[p++]<<b,b+=8}if(w-=y,e.total_out+=w,n.total+=w,w&&(e.adler=n.check=n.flags?i(n.check,f,w,m-w):r(n.check,f,w,m-w)),w=y,(n.flags?_:d(_))!==n.check){e.msg="incorrect data check",n.mode=30;break}b=_=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;b<32;){if(0===g)break e;g--,_+=u[p++]<<b,b+=8}if(_!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=30;break}b=_=0}n.mode=29;case 29:z=1;break e;case 30:z=-3;break e;case 31:return-4;default:return c}return e.next_out=m,e.avail_out=y,e.next_in=p,e.avail_in=g,n.hold=_,n.bits=b,(n.wsize||w!==e.avail_out&&n.mode<30&&(n.mode<27||4!==t))&&S(e,e.output,e.next_out,w-e.avail_out)?(n.mode=31,-4):(v-=e.avail_in,w-=e.avail_out,e.total_in+=v,e.total_out+=w,n.total+=w,n.wrap&&w&&(e.adler=n.check=n.flags?i(n.check,f,w,e.next_out-w):r(n.check,f,w,e.next_out-w)),e.data_type=n.bits+(n.last?64:0)+(12===n.mode?128:0)+(20===n.mode||15===n.mode?256:0),(0==v&&0===w||4===t)&&z===l&&(z=-5),z)},n.inflateEnd=function(e){if(!e||!e.state)return c;var t=e.state;return t.window&&(t.window=null),e.state=null,l},n.inflateGetHeader=function(e,t){var n;return e&&e.state?0==(2&(n=e.state).wrap)?c:((n.head=t).done=!1,l):c},n.inflateSetDictionary=function(e,t){var n,s=t.length;return e&&e.state?0!==(n=e.state).wrap&&11!==n.mode?c:11===n.mode&&r(1,t,s,0)!==n.check?-3:S(e,t,s,s)?(n.mode=31,-4):(n.havedict=1,l):c},n.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(e,t,n){"use strict";var s=e("../utils/common"),r=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],i=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],o=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],a=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(e,t,n,l,c,h,u,f){var d,p,m,g,y,_,b,v,w,k=f.bits,S=0,E=0,x=0,A=0,O=0,C=0,I=0,N=0,T=0,L=0,B=null,z=0,D=new s.Buf16(16),P=new s.Buf16(16),R=null,j=0;for(S=0;S<=15;S++)D[S]=0;for(E=0;E<l;E++)D[t[n+E]]++;for(O=k,A=15;1<=A&&0===D[A];A--);if(A<O&&(O=A),0===A)return c[h++]=20971520,c[h++]=20971520,f.bits=1,0;for(x=1;x<A&&0===D[x];x++);for(O<x&&(O=x),S=N=1;S<=15;S++)if(N<<=1,(N-=D[S])<0)return-1;if(0<N&&(0===e||1!==A))return-1;for(P[1]=0,S=1;S<15;S++)P[S+1]=P[S]+D[S];for(E=0;E<l;E++)0!==t[n+E]&&(u[P[t[n+E]]++]=E);if(_=0===e?(B=R=u,19):1===e?(B=r,z-=257,R=i,j-=257,256):(B=o,R=a,-1),S=x,y=h,I=E=L=0,m=-1,g=(T=1<<(C=O))-1,1===e&&852<T||2===e&&592<T)return 1;for(;;){for(b=S-I,w=u[E]<_?(v=0,u[E]):u[E]>_?(v=R[j+u[E]],B[z+u[E]]):(v=96,0),d=1<<S-I,x=p=1<<C;c[y+(L>>I)+(p-=d)]=b<<24|v<<16|w|0,0!==p;);for(d=1<<S-1;L&d;)d>>=1;if(0!==d?(L&=d-1,L+=d):L=0,E++,0==--D[S]){if(S===A)break;S=t[n+u[E]]}if(O<S&&(L&g)!==m){for(0===I&&(I=O),y+=x,N=1<<(C=S-I);C+I<A&&!((N-=D[C+I])<=0);)C++,N<<=1;if(T+=1<<C,1===e&&852<T||2===e&&592<T)return 1;c[m=L&g]=O<<24|C<<16|y-h|0}}return 0!==L&&(c[y+L]=S-I<<24|64<<16|0),f.bits=O,0}},{"../utils/common":41}],51:[function(e,t,n){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(e,t,n){"use strict";var s=e("../utils/common");function r(e){for(var t=e.length;0<=--t;)e[t]=0}var i=256,o=286,a=30,l=15,c=16,h=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],u=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],f=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],d=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],p=new Array(576);r(p);var m=new Array(60);r(m);var g=new Array(512);r(g);var y=new Array(256);r(y);var _=new Array(29);r(_);var b,v,w,k=new Array(a);function S(e,t,n,s,r){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=s,this.max_length=r,this.has_stree=e&&e.length}function E(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function x(e){return e<256?g[e]:g[256+(e>>>7)]}function A(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function O(e,t,n){e.bi_valid>c-n?(e.bi_buf|=t<<e.bi_valid&65535,A(e,e.bi_buf),e.bi_buf=t>>c-e.bi_valid,e.bi_valid+=n-c):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)}function C(e,t,n){O(e,n[2*t],n[2*t+1])}function I(e,t){for(var n=0;n|=1&e,e>>>=1,n<<=1,0<--t;);return n>>>1}function N(e,t,n){var s,r,i=new Array(l+1),o=0;for(s=1;s<=l;s++)i[s]=o=o+n[s-1]<<1;for(r=0;r<=t;r++){var a=e[2*r+1];0!==a&&(e[2*r]=I(i[a]++,a))}}function T(e){var t;for(t=0;t<o;t++)e.dyn_ltree[2*t]=0;for(t=0;t<a;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function L(e){8<e.bi_valid?A(e,e.bi_buf):0<e.bi_valid&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function B(e,t,n,s){var r=2*t,i=2*n;return e[r]<e[i]||e[r]===e[i]&&s[t]<=s[n]}function z(e,t,n){for(var s=e.heap[n],r=n<<1;r<=e.heap_len&&(r<e.heap_len&&B(t,e.heap[r+1],e.heap[r],e.depth)&&r++,!B(t,s,e.heap[r],e.depth));)e.heap[n]=e.heap[r],n=r,r<<=1;e.heap[n]=s}function D(e,t,n){var s,r,o,a,l=0;if(0!==e.last_lit)for(;s=e.pending_buf[e.d_buf+2*l]<<8|e.pending_buf[e.d_buf+2*l+1],r=e.pending_buf[e.l_buf+l],l++,0===s?C(e,r,t):(C(e,(o=y[r])+i+1,t),0!==(a=h[o])&&O(e,r-=_[o],a),C(e,o=x(--s),n),0!==(a=u[o])&&O(e,s-=k[o],a)),l<e.last_lit;);C(e,256,t)}function P(e,t){var n,s,r,i=t.dyn_tree,o=t.stat_desc.static_tree,a=t.stat_desc.has_stree,c=t.stat_desc.elems,h=-1;for(e.heap_len=0,e.heap_max=573,n=0;n<c;n++)0!==i[2*n]?(e.heap[++e.heap_len]=h=n,e.depth[n]=0):i[2*n+1]=0;for(;e.heap_len<2;)i[2*(r=e.heap[++e.heap_len]=h<2?++h:0)]=1,e.depth[r]=0,e.opt_len--,a&&(e.static_len-=o[2*r+1]);for(t.max_code=h,n=e.heap_len>>1;1<=n;n--)z(e,i,n);for(r=c;n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],z(e,i,1),s=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=s,i[2*r]=i[2*n]+i[2*s],e.depth[r]=(e.depth[n]>=e.depth[s]?e.depth[n]:e.depth[s])+1,i[2*n+1]=i[2*s+1]=r,e.heap[1]=r++,z(e,i,1),2<=e.heap_len;);e.heap[--e.heap_max]=e.heap[1],function(e,t){var n,s,r,i,o,a,c=t.dyn_tree,h=t.max_code,u=t.stat_desc.static_tree,f=t.stat_desc.has_stree,d=t.stat_desc.extra_bits,p=t.stat_desc.extra_base,m=t.stat_desc.max_length,g=0;for(i=0;i<=l;i++)e.bl_count[i]=0;for(c[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;n<573;n++)m<(i=c[2*c[2*(s=e.heap[n])+1]+1]+1)&&(i=m,g++),c[2*s+1]=i,h<s||(e.bl_count[i]++,o=0,p<=s&&(o=d[s-p]),a=c[2*s],e.opt_len+=a*(i+o),f&&(e.static_len+=a*(u[2*s+1]+o)));if(0!==g){do{for(i=m-1;0===e.bl_count[i];)i--;e.bl_count[i]--,e.bl_count[i+1]+=2,e.bl_count[m]--,g-=2}while(0<g);for(i=m;0!==i;i--)for(s=e.bl_count[i];0!==s;)h<(r=e.heap[--n])||(c[2*r+1]!==i&&(e.opt_len+=(i-c[2*r+1])*c[2*r],c[2*r+1]=i),s--)}}(e,t),N(i,h,e.bl_count)}function R(e,t,n){var s,r,i=-1,o=t[1],a=0,l=7,c=4;for(0===o&&(l=138,c=3),t[2*(n+1)+1]=65535,s=0;s<=n;s++)r=o,o=t[2*(s+1)+1],++a<l&&r===o||(a<c?e.bl_tree[2*r]+=a:0!==r?(r!==i&&e.bl_tree[2*r]++,e.bl_tree[32]++):a<=10?e.bl_tree[34]++:e.bl_tree[36]++,i=r,c=(a=0)===o?(l=138,3):r===o?(l=6,3):(l=7,4))}function j(e,t,n){var s,r,i=-1,o=t[1],a=0,l=7,c=4;for(0===o&&(l=138,c=3),s=0;s<=n;s++)if(r=o,o=t[2*(s+1)+1],!(++a<l&&r===o)){if(a<c)for(;C(e,r,e.bl_tree),0!=--a;);else 0!==r?(r!==i&&(C(e,r,e.bl_tree),a--),C(e,16,e.bl_tree),O(e,a-3,2)):a<=10?(C(e,17,e.bl_tree),O(e,a-3,3)):(C(e,18,e.bl_tree),O(e,a-11,7));i=r,c=(a=0)===o?(l=138,3):r===o?(l=6,3):(l=7,4)}}r(k);var F=!1;function $(e,t,n,r){O(e,0+(r?1:0),3),function(e,t,n,r){L(e),A(e,n),A(e,~n),s.arraySet(e.pending_buf,e.window,t,n,e.pending),e.pending+=n}(e,t,n)}n._tr_init=function(e){F||(function(){var e,t,n,s,r,i=new Array(l+1);for(s=n=0;s<28;s++)for(_[s]=n,e=0;e<1<<h[s];e++)y[n++]=s;for(y[n-1]=s,s=r=0;s<16;s++)for(k[s]=r,e=0;e<1<<u[s];e++)g[r++]=s;for(r>>=7;s<a;s++)for(k[s]=r<<7,e=0;e<1<<u[s]-7;e++)g[256+r++]=s;for(t=0;t<=l;t++)i[t]=0;for(e=0;e<=143;)p[2*e+1]=8,e++,i[8]++;for(;e<=255;)p[2*e+1]=9,e++,i[9]++;for(;e<=279;)p[2*e+1]=7,e++,i[7]++;for(;e<=287;)p[2*e+1]=8,e++,i[8]++;for(N(p,287,i),e=0;e<a;e++)m[2*e+1]=5,m[2*e]=I(e,5);b=new S(p,h,257,o,l),v=new S(m,u,0,a,l),w=new S(new Array(0),f,0,19,7)}(),F=!0),e.l_desc=new E(e.dyn_ltree,b),e.d_desc=new E(e.dyn_dtree,v),e.bl_desc=new E(e.bl_tree,w),e.bi_buf=0,e.bi_valid=0,T(e)},n._tr_stored_block=$,n._tr_flush_block=function(e,t,n,s){var r,o,a=0;0<e.level?(2===e.strm.data_type&&(e.strm.data_type=function(e){var t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<i;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0}(e)),P(e,e.l_desc),P(e,e.d_desc),a=function(e){var t;for(R(e,e.dyn_ltree,e.l_desc.max_code),R(e,e.dyn_dtree,e.d_desc.max_code),P(e,e.bl_desc),t=18;3<=t&&0===e.bl_tree[2*d[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),r=e.opt_len+3+7>>>3,(o=e.static_len+3+7>>>3)<=r&&(r=o)):r=o=n+5,n+4<=r&&-1!==t?$(e,t,n,s):4===e.strategy||o===r?(O(e,2+(s?1:0),3),D(e,p,m)):(O(e,4+(s?1:0),3),function(e,t,n,s){var r;for(O(e,t-257,5),O(e,n-1,5),O(e,s-4,4),r=0;r<s;r++)O(e,e.bl_tree[2*d[r]+1],3);j(e,e.dyn_ltree,t-1),j(e,e.dyn_dtree,n-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,a+1),D(e,e.dyn_ltree,e.dyn_dtree)),T(e),s&&L(e)},n._tr_tally=function(e,t,n){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(y[n]+i+1)]++,e.dyn_dtree[2*x(t)]++),e.last_lit===e.lit_bufsize-1},n._tr_align=function(e){O(e,2,3),C(e,256,p),function(e){16===e.bi_valid?(A(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):8<=e.bi_valid&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)}},{"../utils/common":41}],53:[function(e,t,n){"use strict";t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(e,t,s){(function(e){!function(e,t){"use strict";if(!e.setImmediate){var n,s,r,i,o=1,a={},l=!1,c=e.document,h=Object.getPrototypeOf&&Object.getPrototypeOf(e);h=h&&h.setTimeout?h:e,n="[object process]"==={}.toString.call(e.process)?function(e){process.nextTick((function(){f(e)}))}:function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?(i="setImmediate$"+Math.random()+"$",e.addEventListener?e.addEventListener("message",d,!1):e.attachEvent("onmessage",d),function(t){e.postMessage(i+t,"*")}):e.MessageChannel?((r=new MessageChannel).port1.onmessage=function(e){f(e.data)},function(e){r.port2.postMessage(e)}):c&&"onreadystatechange"in c.createElement("script")?(s=c.documentElement,function(e){var t=c.createElement("script");t.onreadystatechange=function(){f(e),t.onreadystatechange=null,s.removeChild(t),t=null},s.appendChild(t)}):function(e){setTimeout(f,0,e)},h.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),s=0;s<t.length;s++)t[s]=arguments[s+1];var r={callback:e,args:t};return a[o]=r,n(o),o++},h.clearImmediate=u}function u(e){delete a[e]}function f(e){if(l)setTimeout(f,0,e);else{var n=a[e];if(n){l=!0;try{!function(e){var n=e.callback,s=e.args;switch(s.length){case 0:n();break;case 1:n(s[0]);break;case 2:n(s[0],s[1]);break;case 3:n(s[0],s[1],s[2]);break;default:n.apply(t,s)}}(n)}finally{u(e),l=!1}}}}function d(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(i)&&f(+t.data.slice(i.length))}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,void 0!==n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[10])(10)}},t={};function n(s){var r=t[s];if(void 0!==r)return r.exports;var i=t[s]={exports:{}};return e[s](i,i.exports,n),i.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var s in t)n.o(t,s)&&!n.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var s={};return(()=>{"use strict";n.r(s),n.d(s,{VERSION:()=>$n,defaultOptions:()=>Mn,init:()=>Kn});class e{constructor(){this._context={}}get id(){return 0}get isBound(){return void 0!==this._context.inputs}get label(){return void 0!==this._context.LABEL?this._context.LABEL:"Agent"}loadAgent(e){return new Promise((t=>{const n=(e,n)=>{const s={};new Function("exports",`${n} \n                if (typeof LABEL !== "undefined") {\n                    exports.LABEL = LABEL;\n                }\n                \n                if (typeof saveState !== "undefined") {\n                    exports.saveState = saveState;\n                }\n                \n                if (typeof loadState !== "undefined") {\n                    exports.loadState = loadState;\n                }\n                \n                if (typeof inputs !== "undefined") {\n                    exports.inputs = inputs;\n                }`)(s),this.unloadAgent(),this._context=s,t()};void 0!==e.url?fetch(e.url).then((e=>e.text())).then((t=>n(void 0!==e.type?e.type:e.url,t))):void 0!==e.code&&n(void 0!==e.type&&e.type,e.code)}))}unloadAgent(){this._context={}}inputs(e){return void 0===this._context.inputs?{}:this._context.inputs(e)}saveState(){return void 0!==this._context.saveState?this._context.saveState():{}}loadState(e){void 0!==this._context.loadState&&this._context.loadState(e)}}class t{get id(){return this._id}get isBound(){return!1}get label(){return this._agentController.isBound?this._agentController.label:void 0!==this._inputController?"human":"<>"}constructor(t,n){this._id=t,this._inputController=n,this._agentController=new e}inputs(e){return this._agentController.isBound?this._agentController.inputs(e):void 0!==this._inputController?this._inputController.inputs:{}}loadAgent(e){return this._agentController.loadAgent(e)}unloadAgent(){this._agentController.unloadAgent()}saveState(){return this._agentController.saveState()}loadState(e){this._agentController.loadState(e)}}class r{get ids(){return[...this._controllers.keys()]}get controllers(){return this._controllers}constructor(e){this._controllers=new Map,this._controllers.set(0,new t(0,e.inputController())),this._controllers.set(1,new t(1))}get(e){return this._controllers.get(e)}inputs(e){return[this._controllers.get(0).inputs(e),this._controllers.get(1).inputs(e)]}saveState(){return[this._controllers.get(0).saveState(),this._controllers.get(1).saveState()]}loadState(e){this._controllers.get(0).loadState(e),this._controllers.get(1).loadState(e)}}class i{constructor(e,t){this._el=document.createElement("div"),this._el.style.boxSizing="border-box",this._el.style.display="block",this._el.style.position="absolute",this._el.style.width="32px",this._el.style.height="32px",this._el.style.margin="4px",this._el.style.border="4px solid #fff",this._el.style.borderRadius="50%",this._el.style.animation="moroboxai-spinner-rotate 1.2s cubic-bezier(0.5, 0, 0.5, 1) infinite",this._el.style.borderColor="#fff transparent transparent transparent",void 0!==t&&(this._el.style.animationDelay=`-${t}s`),e.appendChild(this._el)}}class o{constructor(e){this._el=document.createElement("div"),this._el.style.display="inline-block",this._el.style.position="relative",this._el.style.width="40px",this._el.style.height="40px",new i(this._el,.45),new i(this._el,.3),new i(this._el,.15),new i(this._el),e.appendChild(this._el);let t=document.getElementById("moroboxai-dynamic-style");t||(t=document.createElement("style"),t.id="moroboxai-dynamic-style",document.body.appendChild(t)),t.innerHTML="@keyframes moroboxai-spinner-rotate {\n   0% {\n      transform: rotate(0deg);\n   }\n   100% {\n      transform: rotate(360deg);\n   }\n}"}remove(){this._el.remove()}}class a{get style(){return this.el.style}constructor(e){this.el=document.createElement("div"),this.el.style.width="100%",this.el.style.height="100%",this.el.style.position="absolute",this.el.style.left="0",this.el.style.top="0",this.el.style.display="flex",this.el.style.flexDirection="column",this.el.style.justifyContent="center",this.el.style.alignItems="center",e.appendChild(this.el)}show(){this.el.style.display="flex"}hide(){this.el.style.display="none"}remove(){this.el.remove()}}class l{constructor(e){this._overlay=new a(e),this._input=document.createElement("input"),this._input.type="button",this._input.value="Play",this._input.onclick=()=>{this.onPlay&&this.onPlay()},this._overlay.el.appendChild(this._input),e.appendChild(this._overlay.el)}show(){this._overlay.show()}hide(){this._overlay.hide()}mouseEnter(){}mouseMove(){}mouseLeave(){}remove(){this._overlay.remove()}}class c{constructor(e){this._overlay=new a(e),this._overlay.style.backgroundColor="black",new o(this._overlay.el),e.appendChild(this._overlay.el)}show(){this._overlay.show()}hide(){this._overlay.hide()}mouseEnter(){}mouseMove(){}mouseLeave(){}remove(){this._overlay.remove()}}class h{constructor(e){this._overlay=new a(e),this._speed1=document.createElement("input"),this._speed1.type="button",this._speed1.value="x1",this._speed1.onclick=()=>{this.onSpeed&&this.onSpeed(1)},this._speed2=document.createElement("input"),this._speed2.type="button",this._speed2.value="x2",this._speed2.onclick=()=>{this.onSpeed&&this.onSpeed(2)},this._speed4=document.createElement("input"),this._speed4.type="button",this._speed4.value="x4",this._speed4.onclick=()=>{this.onSpeed&&this.onSpeed(4)},this._overlay.el.appendChild(this._speed1),this._overlay.el.appendChild(this._speed2),this._overlay.el.appendChild(this._speed4),this._overlay.hide(),e.appendChild(this._overlay.el)}playing(){}paused(){}show(){this._overlay.show()}hide(){this._overlay.hide()}mouseEnter(){this.show()}mouseMove(){}mouseLeave(){this.hide()}remove(){this._overlay.remove()}}class u{constructor(e){this._root=e,this._playOverlay=new l(e),this._selectedOverlay=this._playOverlay,this._playOverlay.onPlay=()=>{this.onPlay&&this.onPlay()},this._loadingOverlay=new c(this._root),this._loadingOverlay.hide(),this._settingsOverlay=new h(this._root),this._settingsOverlay.hide(),this._settingsOverlay.onSpeed=e=>{this.onSpeed&&this.onSpeed(e)}}stopped(){this._selectedOverlay.hide(),this._selectedOverlay=this._playOverlay,this._playOverlay.show()}loading(){this._playOverlay.hide(),this._selectedOverlay=this._loadingOverlay,this._loadingOverlay.show()}playing(){this._loadingOverlay.hide(),this._selectedOverlay=this._settingsOverlay,this._settingsOverlay.hide(),this._settingsOverlay.playing()}paused(){this._settingsOverlay.paused()}show(){}hide(){}mouseEnter(){this._selectedOverlay.mouseEnter()}mouseMove(){this._selectedOverlay.mouseMove()}mouseLeave(){this._selectedOverlay.mouseLeave()}remove(){this._playOverlay.remove(),this._loadingOverlay.remove(),this._settingsOverlay.remove()}}const f=Symbol.for("yaml.alias"),d=Symbol.for("yaml.document"),p=Symbol.for("yaml.map"),m=Symbol.for("yaml.pair"),g=Symbol.for("yaml.scalar"),y=Symbol.for("yaml.seq"),_=Symbol.for("yaml.node.type"),b=e=>!!e&&"object"==typeof e&&e[_]===f,v=e=>!!e&&"object"==typeof e&&e[_]===d,w=e=>!!e&&"object"==typeof e&&e[_]===p,k=e=>!!e&&"object"==typeof e&&e[_]===m,S=e=>!!e&&"object"==typeof e&&e[_]===g,E=e=>!!e&&"object"==typeof e&&e[_]===y;function x(e){if(e&&"object"==typeof e)switch(e[_]){case p:case y:return!0}return!1}function A(e){if(e&&"object"==typeof e)switch(e[_]){case f:case p:case g:case y:return!0}return!1}const O=e=>(S(e)||x(e))&&!!e.anchor,C=Symbol("break visit"),I=Symbol("skip children"),N=Symbol("remove node");function T(e,t){const n=D(t);v(e)?L(null,e.contents,n,Object.freeze([e]))===N&&(e.contents=null):L(null,e,n,Object.freeze([]))}function L(e,t,n,s){const r=P(e,t,n,s);if(A(r)||k(r))return R(e,s,r),L(e,r,n,s);if("symbol"!=typeof r)if(x(t)){s=Object.freeze(s.concat(t));for(let e=0;e<t.items.length;++e){const r=L(e,t.items[e],n,s);if("number"==typeof r)e=r-1;else{if(r===C)return C;r===N&&(t.items.splice(e,1),e-=1)}}}else if(k(t)){s=Object.freeze(s.concat(t));const e=L("key",t.key,n,s);if(e===C)return C;e===N&&(t.key=null);const r=L("value",t.value,n,s);if(r===C)return C;r===N&&(t.value=null)}return r}async function B(e,t){const n=D(t);v(e)?await z(null,e.contents,n,Object.freeze([e]))===N&&(e.contents=null):await z(null,e,n,Object.freeze([]))}async function z(e,t,n,s){const r=await P(e,t,n,s);if(A(r)||k(r))return R(e,s,r),z(e,r,n,s);if("symbol"!=typeof r)if(x(t)){s=Object.freeze(s.concat(t));for(let e=0;e<t.items.length;++e){const r=await z(e,t.items[e],n,s);if("number"==typeof r)e=r-1;else{if(r===C)return C;r===N&&(t.items.splice(e,1),e-=1)}}}else if(k(t)){s=Object.freeze(s.concat(t));const e=await z("key",t.key,n,s);if(e===C)return C;e===N&&(t.key=null);const r=await z("value",t.value,n,s);if(r===C)return C;r===N&&(t.value=null)}return r}function D(e){return"object"==typeof e&&(e.Collection||e.Node||e.Value)?Object.assign({Alias:e.Node,Map:e.Node,Scalar:e.Node,Seq:e.Node},e.Value&&{Map:e.Value,Scalar:e.Value,Seq:e.Value},e.Collection&&{Map:e.Collection,Seq:e.Collection},e):e}function P(e,t,n,s){return"function"==typeof n?n(e,t,s):w(t)?n.Map?.(e,t,s):E(t)?n.Seq?.(e,t,s):k(t)?n.Pair?.(e,t,s):S(t)?n.Scalar?.(e,t,s):b(t)?n.Alias?.(e,t,s):void 0}function R(e,t,n){const s=t[t.length-1];if(x(s))s.items[e]=n;else if(k(s))"key"===e?s.key=n:s.value=n;else{if(!v(s)){const e=b(s)?"alias":"scalar";throw new Error(`Cannot replace node with ${e} parent`)}s.contents=n}}T.BREAK=C,T.SKIP=I,T.REMOVE=N,B.BREAK=C,B.SKIP=I,B.REMOVE=N;const j={"!":"%21",",":"%2C","[":"%5B","]":"%5D","{":"%7B","}":"%7D"};class F{constructor(e,t){this.docStart=null,this.docEnd=!1,this.yaml=Object.assign({},F.defaultYaml,e),this.tags=Object.assign({},F.defaultTags,t)}clone(){const e=new F(this.yaml,this.tags);return e.docStart=this.docStart,e}atDocument(){const e=new F(this.yaml,this.tags);switch(this.yaml.version){case"1.1":this.atNextDocument=!0;break;case"1.2":this.atNextDocument=!1,this.yaml={explicit:F.defaultYaml.explicit,version:"1.2"},this.tags=Object.assign({},F.defaultTags)}return e}add(e,t){this.atNextDocument&&(this.yaml={explicit:F.defaultYaml.explicit,version:"1.1"},this.tags=Object.assign({},F.defaultTags),this.atNextDocument=!1);const n=e.trim().split(/[ \t]+/),s=n.shift();switch(s){case"%TAG":{if(2!==n.length&&(t(0,"%TAG directive should contain exactly two parts"),n.length<2))return!1;const[e,s]=n;return this.tags[e]=s,!0}case"%YAML":{if(this.yaml.explicit=!0,1!==n.length)return t(0,"%YAML directive should contain exactly one part"),!1;const[e]=n;return"1.1"===e||"1.2"===e?(this.yaml.version=e,!0):(t(6,`Unsupported YAML version ${e}`,/^\d+\.\d+$/.test(e)),!1)}default:return t(0,`Unknown directive ${s}`,!0),!1}}tagName(e,t){if("!"===e)return"!";if("!"!==e[0])return t(`Not a valid tag: ${e}`),null;if("<"===e[1]){const n=e.slice(2,-1);return"!"===n||"!!"===n?(t(`Verbatim tags aren't resolved, so ${e} is invalid.`),null):(">"!==e[e.length-1]&&t("Verbatim tags must end with a >"),n)}const[,n,s]=e.match(/^(.*!)([^!]*)$/);s||t(`The ${e} tag has no suffix`);const r=this.tags[n];return r?r+decodeURIComponent(s):"!"===n?e:(t(`Could not resolve tag: ${e}`),null)}tagString(e){for(const[t,n]of Object.entries(this.tags))if(e.startsWith(n))return t+e.substring(n.length).replace(/[!,[\]{}]/g,(e=>j[e]));return"!"===e[0]?e:`!<${e}>`}toString(e){const t=this.yaml.explicit?[`%YAML ${this.yaml.version||"1.2"}`]:[],n=Object.entries(this.tags);let s;if(e&&n.length>0&&A(e.contents)){const t={};T(e.contents,((e,n)=>{A(n)&&n.tag&&(t[n.tag]=!0)})),s=Object.keys(t)}else s=[];for(const[r,i]of n)"!!"===r&&"tag:yaml.org,2002:"===i||e&&!s.some((e=>e.startsWith(i)))||t.push(`%TAG ${r} ${i}`);return t.join("\n")}}function $(e){if(/[\x00-\x19\s,[\]{}]/.test(e)){const t=JSON.stringify(e);throw new Error(`Anchor must not contain whitespace or control characters: ${t}`)}return!0}function U(e){const t=new Set;return T(e,{Value(e,n){n.anchor&&t.add(n.anchor)}}),t}function M(e,t){for(let n=1;;++n){const s=`${e}${n}`;if(!t.has(s))return s}}function K(e,t,n,s){if(s&&"object"==typeof s)if(Array.isArray(s))for(let t=0,n=s.length;t<n;++t){const n=s[t],r=K(e,s,String(t),n);void 0===r?delete s[t]:r!==n&&(s[t]=r)}else if(s instanceof Map)for(const t of Array.from(s.keys())){const n=s.get(t),r=K(e,s,t,n);void 0===r?s.delete(t):r!==n&&s.set(t,r)}else if(s instanceof Set)for(const t of Array.from(s)){const n=K(e,s,t,t);void 0===n?s.delete(t):n!==t&&(s.delete(t),s.add(n))}else for(const[t,n]of Object.entries(s)){const r=K(e,s,t,n);void 0===r?delete s[t]:r!==n&&(s[t]=r)}return e.call(t,n,s)}function W(e,t,n){if(Array.isArray(e))return e.map(((e,t)=>W(e,String(t),n)));if(e&&"function"==typeof e.toJSON){if(!n||!O(e))return e.toJSON(t,n);const s={aliasCount:0,count:1,res:void 0};n.anchors.set(e,s),n.onCreate=e=>{s.res=e,delete n.onCreate};const r=e.toJSON(t,n);return n.onCreate&&n.onCreate(r),r}return"bigint"!=typeof e||n?.keep?e:Number(e)}F.defaultYaml={explicit:!1,version:"1.2"},F.defaultTags={"!!":"tag:yaml.org,2002:"};class q{constructor(e){Object.defineProperty(this,_,{value:e})}clone(){const e=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return this.range&&(e.range=this.range.slice()),e}toJS(e,{mapAsMap:t,maxAliasCount:n,onAnchor:s,reviver:r}={}){if(!v(e))throw new TypeError("A document argument is required");const i={anchors:new Map,doc:e,keep:!0,mapAsMap:!0===t,mapKeyWarned:!1,maxAliasCount:"number"==typeof n?n:100},o=W(this,"",i);if("function"==typeof s)for(const{count:e,res:t}of i.anchors.values())s(t,e);return"function"==typeof r?K(r,{"":o},"",o):o}}class Z extends q{constructor(e){super(f),this.source=e,Object.defineProperty(this,"tag",{set(){throw new Error("Alias nodes cannot have tags")}})}resolve(e){let t;return T(e,{Node:(e,n)=>{if(n===this)return T.BREAK;n.anchor===this.source&&(t=n)}}),t}toJSON(e,t){if(!t)return{source:this.source};const{anchors:n,doc:s,maxAliasCount:r}=t,i=this.resolve(s);if(!i){const e=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new ReferenceError(e)}let o=n.get(i);if(o||(W(i,null,t),o=n.get(i)),!o||void 0===o.res)throw new ReferenceError("This should not happen: Alias anchor was not resolved?");if(r>=0&&(o.count+=1,0===o.aliasCount&&(o.aliasCount=G(s,i,n)),o.count*o.aliasCount>r))throw new ReferenceError("Excessive alias count indicates a resource exhaustion attack");return o.res}toString(e,t,n){const s=`*${this.source}`;if(e){if($(this.source),e.options.verifyAliasOrder&&!e.anchors.has(this.source)){const e=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new Error(e)}if(e.implicitKey)return`${s} `}return s}}function G(e,t,n){if(b(t)){const s=t.resolve(e),r=n&&s&&n.get(s);return r?r.count*r.aliasCount:0}if(x(t)){let s=0;for(const r of t.items){const t=G(e,r,n);t>s&&(s=t)}return s}if(k(t)){const s=G(e,t.key,n),r=G(e,t.value,n);return Math.max(s,r)}return 1}const H=e=>!e||"function"!=typeof e&&"object"!=typeof e;class V extends q{constructor(e){super(g),this.value=e}toJSON(e,t){return t?.keep?this.value:W(this.value,e,t)}toString(){return String(this.value)}}V.BLOCK_FOLDED="BLOCK_FOLDED",V.BLOCK_LITERAL="BLOCK_LITERAL",V.PLAIN="PLAIN",V.QUOTE_DOUBLE="QUOTE_DOUBLE",V.QUOTE_SINGLE="QUOTE_SINGLE";const Y="tag:yaml.org,2002:";function J(e,t,n){if(v(e)&&(e=e.contents),A(e))return e;if(k(e)){const t=n.schema[p].createNode?.(n.schema,null,n);return t.items.push(e),t}(e instanceof String||e instanceof Number||e instanceof Boolean||"undefined"!=typeof BigInt&&e instanceof BigInt)&&(e=e.valueOf());const{aliasDuplicateObjects:s,onAnchor:r,onTagObj:i,schema:o,sourceObjects:a}=n;let l;if(s&&e&&"object"==typeof e){if(l=a.get(e),l)return l.anchor||(l.anchor=r(e)),new Z(l.anchor);l={anchor:null,node:null},a.set(e,l)}t?.startsWith("!!")&&(t=Y+t.slice(2));let c=function(e,t,n){if(t){const e=n.filter((e=>e.tag===t)),s=e.find((e=>!e.format))??e[0];if(!s)throw new Error(`Tag ${t} not found`);return s}return n.find((t=>t.identify?.(e)&&!t.format))}(e,t,o.tags);if(!c){if(e&&"function"==typeof e.toJSON&&(e=e.toJSON()),!e||"object"!=typeof e){const t=new V(e);return l&&(l.node=t),t}c=e instanceof Map?o[p]:Symbol.iterator in Object(e)?o[y]:o[p]}i&&(i(c),delete n.onTagObj);const h=c?.createNode?c.createNode(n.schema,e,n):"function"==typeof c?.nodeClass?.from?c.nodeClass.from(n.schema,e,n):new V(e);return t?h.tag=t:c.default||(h.tag=c.tag),l&&(l.node=h),h}function X(e,t,n){let s=n;for(let e=t.length-1;e>=0;--e){const n=t[e];if("number"==typeof n&&Number.isInteger(n)&&n>=0){const e=[];e[n]=s,s=e}else s=new Map([[n,s]])}return J(s,void 0,{aliasDuplicateObjects:!1,keepUndefined:!1,onAnchor:()=>{throw new Error("This should not happen, please report a bug.")},schema:e,sourceObjects:new Map})}const Q=e=>null==e||"object"==typeof e&&!!e[Symbol.iterator]().next().done;class ee extends q{constructor(e,t){super(e),Object.defineProperty(this,"schema",{value:t,configurable:!0,enumerable:!1,writable:!0})}clone(e){const t=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return e&&(t.schema=e),t.items=t.items.map((t=>A(t)||k(t)?t.clone(e):t)),this.range&&(t.range=this.range.slice()),t}addIn(e,t){if(Q(e))this.add(t);else{const[n,...s]=e,r=this.get(n,!0);if(x(r))r.addIn(s,t);else{if(void 0!==r||!this.schema)throw new Error(`Expected YAML collection at ${n}. Remaining path: ${s}`);this.set(n,X(this.schema,s,t))}}}deleteIn(e){const[t,...n]=e;if(0===n.length)return this.delete(t);const s=this.get(t,!0);if(x(s))return s.deleteIn(n);throw new Error(`Expected YAML collection at ${t}. Remaining path: ${n}`)}getIn(e,t){const[n,...s]=e,r=this.get(n,!0);return 0===s.length?!t&&S(r)?r.value:r:x(r)?r.getIn(s,t):void 0}hasAllNullValues(e){return this.items.every((t=>{if(!k(t))return!1;const n=t.value;return null==n||e&&S(n)&&null==n.value&&!n.commentBefore&&!n.comment&&!n.tag}))}hasIn(e){const[t,...n]=e;if(0===n.length)return this.has(t);const s=this.get(t,!0);return!!x(s)&&s.hasIn(n)}setIn(e,t){const[n,...s]=e;if(0===s.length)this.set(n,t);else{const e=this.get(n,!0);if(x(e))e.setIn(s,t);else{if(void 0!==e||!this.schema)throw new Error(`Expected YAML collection at ${n}. Remaining path: ${s}`);this.set(n,X(this.schema,s,t))}}}}ee.maxFlowStringSingleLineLength=60;const te=e=>e.replace(/^(?!$)(?: $)?/gm,"#");function ne(e,t){return/^\n+$/.test(e)?e.substring(1):t?e.replace(/^(?! *$)/gm,t):e}const se=(e,t,n)=>e.endsWith("\n")?ne(n,t):n.includes("\n")?"\n"+ne(n,t):(e.endsWith(" ")?"":" ")+n,re="flow",ie="block",oe="quoted";function ae(e,t,n="flow",{indentAtStart:s,lineWidth:r=80,minContentWidth:i=20,onFold:o,onOverflow:a}={}){if(!r||r<0)return e;const l=Math.max(1+i,1+r-t.length);if(e.length<=l)return e;const c=[],h={};let u,f,d=r-t.length;"number"==typeof s&&(s>r-Math.max(2,i)?c.push(0):d=r-s);let p=!1,m=-1,g=-1,y=-1;n===ie&&(m=le(e,m),-1!==m&&(d=m+l));for(let t;t=e[m+=1];){if(n===oe&&"\\"===t){switch(g=m,e[m+1]){case"x":m+=3;break;case"u":m+=5;break;case"U":m+=9;break;default:m+=1}y=m}if("\n"===t)n===ie&&(m=le(e,m)),d=m+l,u=void 0;else{if(" "===t&&f&&" "!==f&&"\n"!==f&&"\t"!==f){const t=e[m+1];t&&" "!==t&&"\n"!==t&&"\t"!==t&&(u=m)}if(m>=d)if(u)c.push(u),d=u+l,u=void 0;else if(n===oe){for(;" "===f||"\t"===f;)f=t,t=e[m+=1],p=!0;const n=m>y+1?m-2:g-1;if(h[n])return e;c.push(n),h[n]=!0,d=n+l,u=void 0}else p=!0}f=t}if(p&&a&&a(),0===c.length)return e;o&&o();let _=e.slice(0,c[0]);for(let s=0;s<c.length;++s){const r=c[s],i=c[s+1]||e.length;0===r?_=`\n${t}${e.slice(0,i)}`:(n===oe&&h[r]&&(_+=`${e[r]}\\`),_+=`\n${t}${e.slice(r+1,i)}`)}return _}function le(e,t){let n=e[t+1];for(;" "===n||"\t"===n;){do{n=e[t+=1]}while(n&&"\n"!==n);n=e[t+1]}return t}const ce=(e,t)=>({indentAtStart:t?e.indent.length:e.indentAtStart,lineWidth:e.options.lineWidth,minContentWidth:e.options.minContentWidth}),he=e=>/^(%|---|\.\.\.)/m.test(e);function ue(e,t){const n=JSON.stringify(e);if(t.options.doubleQuotedAsJSON)return n;const{implicitKey:s}=t,r=t.options.doubleQuotedMinMultiLineLength,i=t.indent||(he(e)?"  ":"");let o="",a=0;for(let e=0,t=n[e];t;t=n[++e])if(" "===t&&"\\"===n[e+1]&&"n"===n[e+2]&&(o+=n.slice(a,e)+"\\ ",e+=1,a=e,t="\\"),"\\"===t)switch(n[e+1]){case"u":{o+=n.slice(a,e);const t=n.substr(e+2,4);switch(t){case"0000":o+="\\0";break;case"0007":o+="\\a";break;case"000b":o+="\\v";break;case"001b":o+="\\e";break;case"0085":o+="\\N";break;case"00a0":o+="\\_";break;case"2028":o+="\\L";break;case"2029":o+="\\P";break;default:"00"===t.substr(0,2)?o+="\\x"+t.substr(2):o+=n.substr(e,6)}e+=5,a=e+1}break;case"n":if(s||'"'===n[e+2]||n.length<r)e+=1;else{for(o+=n.slice(a,e)+"\n\n";"\\"===n[e+2]&&"n"===n[e+3]&&'"'!==n[e+4];)o+="\n",e+=2;o+=i," "===n[e+2]&&(o+="\\"),e+=1,a=e+1}break;default:e+=1}return o=a?o+n.slice(a):n,s?o:ae(o,i,oe,ce(t,!1))}function fe(e,t){if(!1===t.options.singleQuote||t.implicitKey&&e.includes("\n")||/[ \t]\n|\n[ \t]/.test(e))return ue(e,t);const n=t.indent||(he(e)?"  ":""),s="'"+e.replace(/'/g,"''").replace(/\n+/g,`$&\n${n}`)+"'";return t.implicitKey?s:ae(s,n,re,ce(t,!1))}function de(e,t){const{singleQuote:n}=t.options;let s;if(!1===n)s=ue;else{const t=e.includes('"'),r=e.includes("'");s=t&&!r?fe:r&&!t?ue:n?fe:ue}return s(e,t)}let pe;try{pe=new RegExp("(^|(?<!\n))\n+(?!\n|$)","g")}catch{pe=/\n+(?!\n|$)/g}function me({comment:e,type:t,value:n},s,r,i){const{blockQuote:o,commentString:a,lineWidth:l}=s.options;if(!o||/\n[\t ]+$/.test(n)||/^\s*$/.test(n))return de(n,s);const c=s.indent||(s.forceBlockIndent||he(n)?"  ":""),h="literal"===o||"folded"!==o&&t!==V.BLOCK_FOLDED&&(t===V.BLOCK_LITERAL||!function(e,t,n){if(!t||t<0)return!1;const s=t-n,r=e.length;if(r<=s)return!1;for(let t=0,n=0;t<r;++t)if("\n"===e[t]){if(t-n>s)return!0;if(n=t+1,r-n<=s)return!1}return!0}(n,l,c.length));if(!n)return h?"|\n":">\n";let u,f;for(f=n.length;f>0;--f){const e=n[f-1];if("\n"!==e&&"\t"!==e&&" "!==e)break}let d=n.substring(f);const p=d.indexOf("\n");-1===p?u="-":n===d||p!==d.length-1?(u="+",i&&i()):u="",d&&(n=n.slice(0,-d.length),"\n"===d[d.length-1]&&(d=d.slice(0,-1)),d=d.replace(pe,`$&${c}`));let m,g=!1,y=-1;for(m=0;m<n.length;++m){const e=n[m];if(" "===e)g=!0;else{if("\n"!==e)break;y=m}}let _=n.substring(0,y<m?y+1:m);_&&(n=n.substring(_.length),_=_.replace(/\n+/g,`$&${c}`));let b=(h?"|":">")+(g?c?"2":"1":"")+u;return e&&(b+=" "+a(e.replace(/ ?[\r\n]+/g," ")),r&&r()),h?`${b}\n${c}${_}${n=n.replace(/\n+/g,`$&${c}`)}${d}`:`${b}\n${c}${ae(`${_}${n=n.replace(/\n+/g,"\n$&").replace(/(?:^|\n)([\t ].*)(?:([\n\t ]*)\n(?![\n\t ]))?/g,"$1$2").replace(/\n+/g,`$&${c}`)}${d}`,c,ie,ce(s,!0))}`}function ge(e,t,n,s){const{implicitKey:r,inFlow:i}=t,o="string"==typeof e.value?e:Object.assign({},e,{value:String(e.value)});let{type:a}=e;a!==V.QUOTE_DOUBLE&&/[\x00-\x08\x0b-\x1f\x7f-\x9f\u{D800}-\u{DFFF}]/u.test(o.value)&&(a=V.QUOTE_DOUBLE);const l=e=>{switch(e){case V.BLOCK_FOLDED:case V.BLOCK_LITERAL:return r||i?de(o.value,t):me(o,t,n,s);case V.QUOTE_DOUBLE:return ue(o.value,t);case V.QUOTE_SINGLE:return fe(o.value,t);case V.PLAIN:return function(e,t,n,s){const{type:r,value:i}=e,{actualString:o,implicitKey:a,indent:l,indentStep:c,inFlow:h}=t;if(a&&i.includes("\n")||h&&/[[\]{},]/.test(i))return de(i,t);if(!i||/^[\n\t ,[\]{}#&*!|>'"%@`]|^[?-]$|^[?-][ \t]|[\n:][ \t]|[ \t]\n|[\n\t ]#|[\n\t :]$/.test(i))return a||h||!i.includes("\n")?de(i,t):me(e,t,n,s);if(!a&&!h&&r!==V.PLAIN&&i.includes("\n"))return me(e,t,n,s);if(he(i)){if(""===l)return t.forceBlockIndent=!0,me(e,t,n,s);if(a&&l===c)return de(i,t)}const u=i.replace(/\n+/g,`$&\n${l}`);if(o){const e=e=>e.default&&"tag:yaml.org,2002:str"!==e.tag&&e.test?.test(u),{compat:n,tags:s}=t.doc.schema;if(s.some(e)||n?.some(e))return de(i,t)}return a?u:ae(u,l,re,ce(t,!1))}(o,t,n,s);default:return null}};let c=l(a);if(null===c){const{defaultKeyType:e,defaultStringType:n}=t.options,s=r&&e||n;if(c=l(s),null===c)throw new Error(`Unsupported default string type ${s}`)}return c}function ye(e,t){const n=Object.assign({blockQuote:!0,commentString:te,defaultKeyType:null,defaultStringType:"PLAIN",directives:null,doubleQuotedAsJSON:!1,doubleQuotedMinMultiLineLength:40,falseStr:"false",flowCollectionPadding:!0,indentSeq:!0,lineWidth:80,minContentWidth:20,nullStr:"null",simpleKeys:!1,singleQuote:null,trueStr:"true",verifyAliasOrder:!0},e.schema.toStringOptions,t);let s;switch(n.collectionStyle){case"block":s=!1;break;case"flow":s=!0;break;default:s=null}return{anchors:new Set,doc:e,flowCollectionPadding:n.flowCollectionPadding?" ":"",indent:"",indentStep:"number"==typeof n.indent?" ".repeat(n.indent):"  ",inFlow:s,options:n}}function _e(e,t,n,s){if(k(e))return e.toString(t,n,s);if(b(e)){if(t.doc.directives)return e.toString(t);if(t.resolvedAliases?.has(e))throw new TypeError("Cannot stringify circular structure without alias nodes");t.resolvedAliases?t.resolvedAliases.add(e):t.resolvedAliases=new Set([e]),e=e.resolve(t.doc)}let r;const i=A(e)?e:t.doc.createNode(e,{onTagObj:e=>r=e});r||(r=function(e,t){if(t.tag){const n=e.filter((e=>e.tag===t.tag));if(n.length>0)return n.find((e=>e.format===t.format))??n[0]}let n,s;if(S(t)){s=t.value;const r=e.filter((e=>e.identify?.(s)));n=r.find((e=>e.format===t.format))??r.find((e=>!e.format))}else s=t,n=e.find((e=>e.nodeClass&&s instanceof e.nodeClass));if(!n)throw new Error(`Tag not resolved for ${s?.constructor?.name??typeof s} value`);return n}(t.doc.schema.tags,i));const o=function(e,t,{anchors:n,doc:s}){if(!s.directives)return"";const r=[],i=(S(e)||x(e))&&e.anchor;i&&$(i)&&(n.add(i),r.push(`&${i}`));const o=e.tag?e.tag:t.default?null:t.tag;return o&&r.push(s.directives.tagString(o)),r.join(" ")}(i,r,t);o.length>0&&(t.indentAtStart=(t.indentAtStart??0)+o.length+1);const a="function"==typeof r.stringify?r.stringify(i,t,n,s):S(i)?ge(i,t,n,s):i.toString(t,n,s);return o?S(i)||"{"===a[0]||"["===a[0]?`${o} ${a}`:`${o}\n${t.indent}${a}`:a}function be(e,t){"debug"!==e&&"warn"!==e||("undefined"!=typeof process&&process.emitWarning?process.emitWarning(t):console.warn(t))}function ve(e,t,{key:n,value:s}){if(e?.doc.schema.merge&&we(n))if(s=b(s)?s.resolve(e.doc):s,E(s))for(const n of s.items)ke(e,t,n);else if(Array.isArray(s))for(const n of s)ke(e,t,n);else ke(e,t,s);else{const r=W(n,"",e);if(t instanceof Map)t.set(r,W(s,r,e));else if(t instanceof Set)t.add(r);else{const i=function(e,t,n){if(null===t)return"";if("object"!=typeof t)return String(t);if(A(e)&&n?.doc){const t=ye(n.doc,{});t.anchors=new Set;for(const e of n.anchors.keys())t.anchors.add(e.anchor);t.inFlow=!0,t.inStringifyKey=!0;const s=e.toString(t);if(!n.mapKeyWarned){let e=JSON.stringify(s);e.length>40&&(e=e.substring(0,36)+'..."'),be(n.doc.options.logLevel,`Keys with collection values will be stringified due to JS Object restrictions: ${e}. Set mapAsMap: true to use object keys.`),n.mapKeyWarned=!0}return s}return JSON.stringify(t)}(n,r,e),o=W(s,i,e);i in t?Object.defineProperty(t,i,{value:o,writable:!0,enumerable:!0,configurable:!0}):t[i]=o}}return t}const we=e=>"<<"===e||S(e)&&"<<"===e.value&&(!e.type||e.type===V.PLAIN);function ke(e,t,n){const s=e&&b(n)?n.resolve(e.doc):n;if(!w(s))throw new Error("Merge sources must be maps or map aliases");const r=s.toJSON(null,e,Map);for(const[e,n]of r)t instanceof Map?t.has(e)||t.set(e,n):t instanceof Set?t.add(e):Object.prototype.hasOwnProperty.call(t,e)||Object.defineProperty(t,e,{value:n,writable:!0,enumerable:!0,configurable:!0});return t}function Se(e,t,n){const s=J(e,void 0,n),r=J(t,void 0,n);return new Ee(s,r)}class Ee{constructor(e,t=null){Object.defineProperty(this,_,{value:m}),this.key=e,this.value=t}clone(e){let{key:t,value:n}=this;return A(t)&&(t=t.clone(e)),A(n)&&(n=n.clone(e)),new Ee(t,n)}toJSON(e,t){return ve(t,t?.mapAsMap?new Map:{},this)}toString(e,t,n){return e?.doc?function({key:e,value:t},n,s,r){const{allNullValues:i,doc:o,indent:a,indentStep:l,options:{commentString:c,indentSeq:h,simpleKeys:u}}=n;let f=A(e)&&e.comment||null;if(u){if(f)throw new Error("With simple keys, key nodes cannot have comments");if(x(e))throw new Error("With simple keys, collection cannot be used as a key value")}let d=!u&&(!e||f&&null==t&&!n.inFlow||x(e)||(S(e)?e.type===V.BLOCK_FOLDED||e.type===V.BLOCK_LITERAL:"object"==typeof e));n=Object.assign({},n,{allNullValues:!1,implicitKey:!d&&(u||!i),indent:a+l});let p,m,g,y=!1,_=!1,b=_e(e,n,(()=>y=!0),(()=>_=!0));if(!d&&!n.inFlow&&b.length>1024){if(u)throw new Error("With simple keys, single line scalar must not span more than 1024 characters");d=!0}if(n.inFlow){if(i||null==t)return y&&s&&s(),""===b?"?":d?`? ${b}`:b}else if(i&&!u||null==t&&d)return b=`? ${b}`,f&&!y?b+=se(b,n.indent,c(f)):_&&r&&r(),b;y&&(f=null),d?(f&&(b+=se(b,n.indent,c(f))),b=`? ${b}\n${a}:`):(b=`${b}:`,f&&(b+=se(b,n.indent,c(f)))),A(t)?(p=!!t.spaceBefore,m=t.commentBefore,g=t.comment):(p=!1,m=null,g=null,t&&"object"==typeof t&&(t=o.createNode(t))),n.implicitKey=!1,d||f||!S(t)||(n.indentAtStart=b.length+1),_=!1,h||!(l.length>=2)||n.inFlow||d||!E(t)||t.flow||t.tag||t.anchor||(n.indent=n.indent.substring(2));let v=!1;const w=_e(t,n,(()=>v=!0),(()=>_=!0));let k=" ";if(f||p||m)k=p?"\n":"",m&&(k+=`\n${ne(c(m),n.indent)}`),""!==w||n.inFlow?k+=`\n${n.indent}`:"\n"===k&&(k="\n\n");else if(!d&&x(t)){const e=w[0],s=w.indexOf("\n"),r=-1!==s,i=n.inFlow??t.flow??0===t.items.length;if(r||!i){let t=!1;if(r&&("&"===e||"!"===e)){let n=w.indexOf(" ");"&"===e&&-1!==n&&n<s&&"!"===w[n+1]&&(n=w.indexOf(" ",n+1)),(-1===n||s<n)&&(t=!0)}t||(k=`\n${n.indent}`)}}else""!==w&&"\n"!==w[0]||(k="");return b+=k+w,n.inFlow?v&&s&&s():g&&!v?b+=se(b,n.indent,c(g)):_&&r&&r(),b}(this,e,t,n):JSON.stringify(this)}}function xe(e,t,n){return(t.inFlow??e.flow?Oe:Ae)(e,t,n)}function Ae({comment:e,items:t},n,{blockItemPrefix:s,flowChars:r,itemIndent:i,onChompKeep:o,onComment:a}){const{indent:l,options:{commentString:c}}=n,h=Object.assign({},n,{indent:i,type:null});let u=!1;const f=[];for(let e=0;e<t.length;++e){const r=t[e];let o=null;if(A(r))!u&&r.spaceBefore&&f.push(""),Ce(n,f,r.commentBefore,u),r.comment&&(o=r.comment);else if(k(r)){const e=A(r.key)?r.key:null;e&&(!u&&e.spaceBefore&&f.push(""),Ce(n,f,e.commentBefore,u))}u=!1;let a=_e(r,h,(()=>o=null),(()=>u=!0));o&&(a+=se(a,i,c(o))),u&&o&&(u=!1),f.push(s+a)}let d;if(0===f.length)d=r.start+r.end;else{d=f[0];for(let e=1;e<f.length;++e){const t=f[e];d+=t?`\n${l}${t}`:"\n"}}return e?(d+="\n"+ne(c(e),l),a&&a()):u&&o&&o(),d}function Oe({comment:e,items:t},n,{flowChars:s,itemIndent:r,onComment:i}){const{indent:o,indentStep:a,flowCollectionPadding:l,options:{commentString:c}}=n;r+=a;const h=Object.assign({},n,{indent:r,inFlow:!0,type:null});let u=!1,f=0;const d=[];for(let e=0;e<t.length;++e){const s=t[e];let i=null;if(A(s))s.spaceBefore&&d.push(""),Ce(n,d,s.commentBefore,!1),s.comment&&(i=s.comment);else if(k(s)){const e=A(s.key)?s.key:null;e&&(e.spaceBefore&&d.push(""),Ce(n,d,e.commentBefore,!1),e.comment&&(u=!0));const t=A(s.value)?s.value:null;t?(t.comment&&(i=t.comment),t.commentBefore&&(u=!0)):null==s.value&&e?.comment&&(i=e.comment)}i&&(u=!0);let o=_e(s,h,(()=>i=null));e<t.length-1&&(o+=","),i&&(o+=se(o,r,c(i))),!u&&(d.length>f||o.includes("\n"))&&(u=!0),d.push(o),f=d.length}let p;const{start:m,end:g}=s;if(0===d.length)p=m+g;else if(u||(u=d.reduce(((e,t)=>e+t.length+2),2)>ee.maxFlowStringSingleLineLength),u){p=m;for(const e of d)p+=e?`\n${a}${o}${e}`:"\n";p+=`\n${o}${g}`}else p=`${m}${l}${d.join(" ")}${l}${g}`;return e&&(p+=se(p,o,c(e)),i&&i()),p}function Ce({indent:e,options:{commentString:t}},n,s,r){if(s&&r&&(s=s.replace(/^\n+/,"")),s){const r=ne(t(s),e);n.push(r.trimStart())}}function Ie(e,t){const n=S(t)?t.value:t;for(const s of e)if(k(s)){if(s.key===t||s.key===n)return s;if(S(s.key)&&s.key.value===n)return s}}class Ne extends ee{static get tagName(){return"tag:yaml.org,2002:map"}constructor(e){super(p,e),this.items=[]}static from(e,t,n){const{keepUndefined:s,replacer:r}=n,i=new this(e),o=(e,o)=>{if("function"==typeof r)o=r.call(t,e,o);else if(Array.isArray(r)&&!r.includes(e))return;(void 0!==o||s)&&i.items.push(Se(e,o,n))};if(t instanceof Map)for(const[e,n]of t)o(e,n);else if(t&&"object"==typeof t)for(const e of Object.keys(t))o(e,t[e]);return"function"==typeof e.sortMapEntries&&i.items.sort(e.sortMapEntries),i}add(e,t){let n;n=k(e)?e:e&&"object"==typeof e&&"key"in e?new Ee(e.key,e.value):new Ee(e,e?.value);const s=Ie(this.items,n.key),r=this.schema?.sortMapEntries;if(s){if(!t)throw new Error(`Key ${n.key} already set`);S(s.value)&&H(n.value)?s.value.value=n.value:s.value=n.value}else if(r){const e=this.items.findIndex((e=>r(n,e)<0));-1===e?this.items.push(n):this.items.splice(e,0,n)}else this.items.push(n)}delete(e){const t=Ie(this.items,e);return!!t&&this.items.splice(this.items.indexOf(t),1).length>0}get(e,t){const n=Ie(this.items,e),s=n?.value;return(!t&&S(s)?s.value:s)??void 0}has(e){return!!Ie(this.items,e)}set(e,t){this.add(new Ee(e,t),!0)}toJSON(e,t,n){const s=n?new n:t?.mapAsMap?new Map:{};t?.onCreate&&t.onCreate(s);for(const e of this.items)ve(t,s,e);return s}toString(e,t,n){if(!e)return JSON.stringify(this);for(const e of this.items)if(!k(e))throw new Error(`Map items must all be pairs; found ${JSON.stringify(e)} instead`);return!e.allNullValues&&this.hasAllNullValues(!1)&&(e=Object.assign({},e,{allNullValues:!0})),xe(this,e,{blockItemPrefix:"",flowChars:{start:"{",end:"}"},itemIndent:e.indent||"",onChompKeep:n,onComment:t})}}const Te={collection:"map",default:!0,nodeClass:Ne,tag:"tag:yaml.org,2002:map",resolve:(e,t)=>(w(e)||t("Expected a mapping for this tag"),e),createNode:(e,t,n)=>Ne.from(e,t,n)};class Le extends ee{static get tagName(){return"tag:yaml.org,2002:seq"}constructor(e){super(y,e),this.items=[]}add(e){this.items.push(e)}delete(e){const t=Be(e);return"number"==typeof t&&this.items.splice(t,1).length>0}get(e,t){const n=Be(e);if("number"!=typeof n)return;const s=this.items[n];return!t&&S(s)?s.value:s}has(e){const t=Be(e);return"number"==typeof t&&t<this.items.length}set(e,t){const n=Be(e);if("number"!=typeof n)throw new Error(`Expected a valid index, not ${e}.`);const s=this.items[n];S(s)&&H(t)?s.value=t:this.items[n]=t}toJSON(e,t){const n=[];t?.onCreate&&t.onCreate(n);let s=0;for(const e of this.items)n.push(W(e,String(s++),t));return n}toString(e,t,n){return e?xe(this,e,{blockItemPrefix:"- ",flowChars:{start:"[",end:"]"},itemIndent:(e.indent||"")+"  ",onChompKeep:n,onComment:t}):JSON.stringify(this)}static from(e,t,n){const{replacer:s}=n,r=new this(e);if(t&&Symbol.iterator in Object(t)){let e=0;for(let i of t){if("function"==typeof s){const n=t instanceof Set?i:String(e++);i=s.call(t,n,i)}r.items.push(J(i,void 0,n))}}return r}}function Be(e){let t=S(e)?e.value:e;return t&&"string"==typeof t&&(t=Number(t)),"number"==typeof t&&Number.isInteger(t)&&t>=0?t:null}const ze={collection:"seq",default:!0,nodeClass:Le,tag:"tag:yaml.org,2002:seq",resolve:(e,t)=>(E(e)||t("Expected a sequence for this tag"),e),createNode:(e,t,n)=>Le.from(e,t,n)},De={identify:e=>"string"==typeof e,default:!0,tag:"tag:yaml.org,2002:str",resolve:e=>e,stringify:(e,t,n,s)=>ge(e,t=Object.assign({actualString:!0},t),n,s)},Pe={identify:e=>null==e,createNode:()=>new V(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^(?:~|[Nn]ull|NULL)?$/,resolve:()=>new V(null),stringify:({source:e},t)=>"string"==typeof e&&Pe.test.test(e)?e:t.options.nullStr},Re={identify:e=>"boolean"==typeof e,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:[Tt]rue|TRUE|[Ff]alse|FALSE)$/,resolve:e=>new V("t"===e[0]||"T"===e[0]),stringify:({source:e,value:t},n)=>e&&Re.test.test(e)&&t===("t"===e[0]||"T"===e[0])?e:t?n.options.trueStr:n.options.falseStr};function je({format:e,minFractionDigits:t,tag:n,value:s}){if("bigint"==typeof s)return String(s);const r="number"==typeof s?s:Number(s);if(!isFinite(r))return isNaN(r)?".nan":r<0?"-.inf":".inf";let i=JSON.stringify(s);if(!e&&t&&(!n||"tag:yaml.org,2002:float"===n)&&/^\d/.test(i)){let e=i.indexOf(".");e<0&&(e=i.length,i+=".");let n=t-(i.length-e-1);for(;n-- >0;)i+="0"}return i}const Fe={identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF|nan|NaN|NAN))$/,resolve:e=>"nan"===e.slice(-3).toLowerCase()?NaN:"-"===e[0]?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:je},$e={identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:\.[0-9]+|[0-9]+(?:\.[0-9]*)?)[eE][-+]?[0-9]+$/,resolve:e=>parseFloat(e),stringify(e){const t=Number(e.value);return isFinite(t)?t.toExponential():je(e)}},Ue={identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:\.[0-9]+|[0-9]+\.[0-9]*)$/,resolve(e){const t=new V(parseFloat(e)),n=e.indexOf(".");return-1!==n&&"0"===e[e.length-1]&&(t.minFractionDigits=e.length-n-1),t},stringify:je},Me=e=>"bigint"==typeof e||Number.isInteger(e),Ke=(e,t,n,{intAsBigInt:s})=>s?BigInt(e):parseInt(e.substring(t),n);function We(e,t,n){const{value:s}=e;return Me(s)&&s>=0?n+s.toString(t):je(e)}const qe={identify:e=>Me(e)&&e>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^0o[0-7]+$/,resolve:(e,t,n)=>Ke(e,2,8,n),stringify:e=>We(e,8,"0o")},Ze={identify:Me,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9]+$/,resolve:(e,t,n)=>Ke(e,0,10,n),stringify:je},Ge={identify:e=>Me(e)&&e>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^0x[0-9a-fA-F]+$/,resolve:(e,t,n)=>Ke(e,2,16,n),stringify:e=>We(e,16,"0x")},He=[Te,ze,De,Pe,Re,qe,Ze,Ge,Fe,$e,Ue];function Ve(e){return"bigint"==typeof e||Number.isInteger(e)}const Ye=({value:e})=>JSON.stringify(e),Je=[Te,ze].concat([{identify:e=>"string"==typeof e,default:!0,tag:"tag:yaml.org,2002:str",resolve:e=>e,stringify:Ye},{identify:e=>null==e,createNode:()=>new V(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^null$/,resolve:()=>null,stringify:Ye},{identify:e=>"boolean"==typeof e,default:!0,tag:"tag:yaml.org,2002:bool",test:/^true|false$/,resolve:e=>"true"===e,stringify:Ye},{identify:Ve,default:!0,tag:"tag:yaml.org,2002:int",test:/^-?(?:0|[1-9][0-9]*)$/,resolve:(e,t,{intAsBigInt:n})=>n?BigInt(e):parseInt(e,10),stringify:({value:e})=>Ve(e)?e.toString():JSON.stringify(e)},{identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",test:/^-?(?:0|[1-9][0-9]*)(?:\.[0-9]*)?(?:[eE][-+]?[0-9]+)?$/,resolve:e=>parseFloat(e),stringify:Ye}],{default:!0,tag:"",test:/^/,resolve:(e,t)=>(t(`Unresolved plain scalar ${JSON.stringify(e)}`),e)}),Xe={identify:e=>e instanceof Uint8Array,default:!1,tag:"tag:yaml.org,2002:binary",resolve(e,t){if("function"==typeof Buffer)return Buffer.from(e,"base64");if("function"==typeof atob){const t=atob(e.replace(/[\n\r]/g,"")),n=new Uint8Array(t.length);for(let e=0;e<t.length;++e)n[e]=t.charCodeAt(e);return n}return t("This environment does not support reading binary tags; either Buffer or atob is required"),e},stringify({comment:e,type:t,value:n},s,r,i){const o=n;let a;if("function"==typeof Buffer)a=o instanceof Buffer?o.toString("base64"):Buffer.from(o.buffer).toString("base64");else{if("function"!=typeof btoa)throw new Error("This environment does not support writing binary tags; either Buffer or btoa is required");{let e="";for(let t=0;t<o.length;++t)e+=String.fromCharCode(o[t]);a=btoa(e)}}if(t||(t=V.BLOCK_LITERAL),t!==V.QUOTE_DOUBLE){const e=Math.max(s.options.lineWidth-s.indent.length,s.options.minContentWidth),n=Math.ceil(a.length/e),r=new Array(n);for(let t=0,s=0;t<n;++t,s+=e)r[t]=a.substr(s,e);a=r.join(t===V.BLOCK_LITERAL?"\n":" ")}return ge({comment:e,type:t,value:a},s,r,i)}};function Qe(e,t){if(E(e))for(let n=0;n<e.items.length;++n){let s=e.items[n];if(!k(s)){if(w(s)){s.items.length>1&&t("Each pair must have its own sequence indicator");const e=s.items[0]||new Ee(new V(null));if(s.commentBefore&&(e.key.commentBefore=e.key.commentBefore?`${s.commentBefore}\n${e.key.commentBefore}`:s.commentBefore),s.comment){const t=e.value??e.key;t.comment=t.comment?`${s.comment}\n${t.comment}`:s.comment}s=e}e.items[n]=k(s)?s:new Ee(s)}}else t("Expected a sequence for this tag");return e}function et(e,t,n){const{replacer:s}=n,r=new Le(e);r.tag="tag:yaml.org,2002:pairs";let i=0;if(t&&Symbol.iterator in Object(t))for(let e of t){let o,a;if("function"==typeof s&&(e=s.call(t,String(i++),e)),Array.isArray(e)){if(2!==e.length)throw new TypeError(`Expected [key, value] tuple: ${e}`);o=e[0],a=e[1]}else if(e&&e instanceof Object){const t=Object.keys(e);if(1!==t.length)throw new TypeError(`Expected tuple with one key, not ${t.length} keys`);o=t[0],a=e[o]}else o=e;r.items.push(Se(o,a,n))}return r}const tt={collection:"seq",default:!1,tag:"tag:yaml.org,2002:pairs",resolve:Qe,createNode:et};class nt extends Le{constructor(){super(),this.add=Ne.prototype.add.bind(this),this.delete=Ne.prototype.delete.bind(this),this.get=Ne.prototype.get.bind(this),this.has=Ne.prototype.has.bind(this),this.set=Ne.prototype.set.bind(this),this.tag=nt.tag}toJSON(e,t){if(!t)return super.toJSON(e);const n=new Map;t?.onCreate&&t.onCreate(n);for(const e of this.items){let s,r;if(k(e)?(s=W(e.key,"",t),r=W(e.value,s,t)):s=W(e,"",t),n.has(s))throw new Error("Ordered maps must not include duplicate keys");n.set(s,r)}return n}static from(e,t,n){const s=et(e,t,n),r=new this;return r.items=s.items,r}}nt.tag="tag:yaml.org,2002:omap";const st={collection:"seq",identify:e=>e instanceof Map,nodeClass:nt,default:!1,tag:"tag:yaml.org,2002:omap",resolve(e,t){const n=Qe(e,t),s=[];for(const{key:e}of n.items)S(e)&&(s.includes(e.value)?t(`Ordered maps must not include duplicate keys: ${e.value}`):s.push(e.value));return Object.assign(new nt,n)},createNode:(e,t,n)=>nt.from(e,t,n)};function rt({value:e,source:t},n){return t&&(e?it:ot).test.test(t)?t:e?n.options.trueStr:n.options.falseStr}const it={identify:e=>!0===e,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:Y|y|[Yy]es|YES|[Tt]rue|TRUE|[Oo]n|ON)$/,resolve:()=>new V(!0),stringify:rt},ot={identify:e=>!1===e,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:N|n|[Nn]o|NO|[Ff]alse|FALSE|[Oo]ff|OFF)$/i,resolve:()=>new V(!1),stringify:rt},at={identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?\.(?:inf|Inf|INF|nan|NaN|NAN)$/,resolve:e=>"nan"===e.slice(-3).toLowerCase()?NaN:"-"===e[0]?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:je},lt={identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:[0-9][0-9_]*)?(?:\.[0-9_]*)?[eE][-+]?[0-9]+$/,resolve:e=>parseFloat(e.replace(/_/g,"")),stringify(e){const t=Number(e.value);return isFinite(t)?t.toExponential():je(e)}},ct={identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:[0-9][0-9_]*)?\.[0-9_]*$/,resolve(e){const t=new V(parseFloat(e.replace(/_/g,""))),n=e.indexOf(".");if(-1!==n){const s=e.substring(n+1).replace(/_/g,"");"0"===s[s.length-1]&&(t.minFractionDigits=s.length)}return t},stringify:je},ht=e=>"bigint"==typeof e||Number.isInteger(e);function ut(e,t,n,{intAsBigInt:s}){const r=e[0];if("-"!==r&&"+"!==r||(t+=1),e=e.substring(t).replace(/_/g,""),s){switch(n){case 2:e=`0b${e}`;break;case 8:e=`0o${e}`;break;case 16:e=`0x${e}`}const t=BigInt(e);return"-"===r?BigInt(-1)*t:t}const i=parseInt(e,n);return"-"===r?-1*i:i}function ft(e,t,n){const{value:s}=e;if(ht(s)){const e=s.toString(t);return s<0?"-"+n+e.substr(1):n+e}return je(e)}const dt={identify:ht,default:!0,tag:"tag:yaml.org,2002:int",format:"BIN",test:/^[-+]?0b[0-1_]+$/,resolve:(e,t,n)=>ut(e,2,2,n),stringify:e=>ft(e,2,"0b")},pt={identify:ht,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^[-+]?0[0-7_]+$/,resolve:(e,t,n)=>ut(e,1,8,n),stringify:e=>ft(e,8,"0")},mt={identify:ht,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9][0-9_]*$/,resolve:(e,t,n)=>ut(e,0,10,n),stringify:je},gt={identify:ht,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^[-+]?0x[0-9a-fA-F_]+$/,resolve:(e,t,n)=>ut(e,2,16,n),stringify:e=>ft(e,16,"0x")};class yt extends Ne{constructor(e){super(e),this.tag=yt.tag}add(e){let t;t=k(e)?e:e&&"object"==typeof e&&"key"in e&&"value"in e&&null===e.value?new Ee(e.key,null):new Ee(e,null),Ie(this.items,t.key)||this.items.push(t)}get(e,t){const n=Ie(this.items,e);return!t&&k(n)?S(n.key)?n.key.value:n.key:n}set(e,t){if("boolean"!=typeof t)throw new Error("Expected boolean value for set(key, value) in a YAML set, not "+typeof t);const n=Ie(this.items,e);n&&!t?this.items.splice(this.items.indexOf(n),1):!n&&t&&this.items.push(new Ee(e))}toJSON(e,t){return super.toJSON(e,t,Set)}toString(e,t,n){if(!e)return JSON.stringify(this);if(this.hasAllNullValues(!0))return super.toString(Object.assign({},e,{allNullValues:!0}),t,n);throw new Error("Set items must all have null values")}static from(e,t,n){const{replacer:s}=n,r=new this(e);if(t&&Symbol.iterator in Object(t))for(let e of t)"function"==typeof s&&(e=s.call(t,e,e)),r.items.push(Se(e,null,n));return r}}yt.tag="tag:yaml.org,2002:set";const _t={collection:"map",identify:e=>e instanceof Set,nodeClass:yt,default:!1,tag:"tag:yaml.org,2002:set",createNode:(e,t,n)=>yt.from(e,t,n),resolve(e,t){if(w(e)){if(e.hasAllNullValues(!0))return Object.assign(new yt,e);t("Set items must all have null values")}else t("Expected a mapping for this tag");return e}};function bt(e,t){const n=e[0],s="-"===n||"+"===n?e.substring(1):e,r=e=>t?BigInt(e):Number(e),i=s.replace(/_/g,"").split(":").reduce(((e,t)=>e*r(60)+r(t)),r(0));return"-"===n?r(-1)*i:i}function vt(e){let{value:t}=e,n=e=>e;if("bigint"==typeof t)n=e=>BigInt(e);else if(isNaN(t)||!isFinite(t))return je(e);let s="";t<0&&(s="-",t*=n(-1));const r=n(60),i=[t%r];return t<60?i.unshift(0):(t=(t-i[0])/r,i.unshift(t%r),t>=60&&(t=(t-i[0])/r,i.unshift(t))),s+i.map((e=>String(e).padStart(2,"0"))).join(":").replace(/000000\d*$/,"")}const wt={identify:e=>"bigint"==typeof e||Number.isInteger(e),default:!0,tag:"tag:yaml.org,2002:int",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+$/,resolve:(e,t,{intAsBigInt:n})=>bt(e,n),stringify:vt},kt={identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\.[0-9_]*$/,resolve:e=>bt(e,!1),stringify:vt},St={identify:e=>e instanceof Date,default:!0,tag:"tag:yaml.org,2002:timestamp",test:RegExp("^([0-9]{4})-([0-9]{1,2})-([0-9]{1,2})(?:(?:t|T|[ \\t]+)([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2}(\\.[0-9]+)?)(?:[ \\t]*(Z|[-+][012]?[0-9](?::[0-9]{2})?))?)?$"),resolve(e){const t=e.match(St.test);if(!t)throw new Error("!!timestamp expects a date, starting with yyyy-mm-dd");const[,n,s,r,i,o,a]=t.map(Number),l=t[7]?Number((t[7]+"00").substr(1,3)):0;let c=Date.UTC(n,s-1,r,i||0,o||0,a||0,l);const h=t[8];if(h&&"Z"!==h){let e=bt(h,!1);Math.abs(e)<30&&(e*=60),c-=6e4*e}return new Date(c)},stringify:({value:e})=>e.toISOString().replace(/((T00:00)?:00)?\.000Z$/,"")},Et=[Te,ze,De,Pe,it,ot,dt,pt,mt,gt,at,lt,ct,Xe,st,tt,_t,wt,kt,St],xt=new Map([["core",He],["failsafe",[Te,ze,De]],["json",Je],["yaml11",Et],["yaml-1.1",Et]]),At={binary:Xe,bool:Re,float:Ue,floatExp:$e,floatNaN:Fe,floatTime:kt,int:Ze,intHex:Ge,intOct:qe,intTime:wt,map:Te,null:Pe,omap:st,pairs:tt,seq:ze,set:_t,timestamp:St},Ot={"tag:yaml.org,2002:binary":Xe,"tag:yaml.org,2002:omap":st,"tag:yaml.org,2002:pairs":tt,"tag:yaml.org,2002:set":_t,"tag:yaml.org,2002:timestamp":St};function Ct(e,t){let n=xt.get(t);if(!n){if(!Array.isArray(e)){const e=Array.from(xt.keys()).filter((e=>"yaml11"!==e)).map((e=>JSON.stringify(e))).join(", ");throw new Error(`Unknown schema "${t}"; use one of ${e} or define customTags array`)}n=[]}if(Array.isArray(e))for(const t of e)n=n.concat(t);else"function"==typeof e&&(n=e(n.slice()));return n.map((e=>{if("string"!=typeof e)return e;const t=At[e];if(t)return t;const n=Object.keys(At).map((e=>JSON.stringify(e))).join(", ");throw new Error(`Unknown custom tag "${e}"; use one of ${n}`)}))}const It=(e,t)=>e.key<t.key?-1:e.key>t.key?1:0;class Nt{constructor({compat:e,customTags:t,merge:n,resolveKnownTags:s,schema:r,sortMapEntries:i,toStringDefaults:o}){this.compat=Array.isArray(e)?Ct(e,"compat"):e?Ct(null,e):null,this.merge=!!n,this.name="string"==typeof r&&r||"core",this.knownTags=s?Ot:{},this.tags=Ct(t,this.name),this.toStringOptions=o??null,Object.defineProperty(this,p,{value:Te}),Object.defineProperty(this,g,{value:De}),Object.defineProperty(this,y,{value:ze}),this.sortMapEntries="function"==typeof i?i:!0===i?It:null}clone(){const e=Object.create(Nt.prototype,Object.getOwnPropertyDescriptors(this));return e.tags=this.tags.slice(),e}}class Tt{constructor(e,t,n){this.commentBefore=null,this.comment=null,this.errors=[],this.warnings=[],Object.defineProperty(this,_,{value:d});let s=null;"function"==typeof t||Array.isArray(t)?s=t:void 0===n&&t&&(n=t,t=void 0);const r=Object.assign({intAsBigInt:!1,keepSourceTokens:!1,logLevel:"warn",prettyErrors:!0,strict:!0,uniqueKeys:!0,version:"1.2"},n);this.options=r;let{version:i}=r;n?._directives?(this.directives=n._directives.atDocument(),this.directives.yaml.explicit&&(i=this.directives.yaml.version)):this.directives=new F({version:i}),this.setSchema(i,n),this.contents=void 0===e?null:this.createNode(e,s,n)}clone(){const e=Object.create(Tt.prototype,{[_]:{value:d}});return e.commentBefore=this.commentBefore,e.comment=this.comment,e.errors=this.errors.slice(),e.warnings=this.warnings.slice(),e.options=Object.assign({},this.options),this.directives&&(e.directives=this.directives.clone()),e.schema=this.schema.clone(),e.contents=A(this.contents)?this.contents.clone(e.schema):this.contents,this.range&&(e.range=this.range.slice()),e}add(e){Lt(this.contents)&&this.contents.add(e)}addIn(e,t){Lt(this.contents)&&this.contents.addIn(e,t)}createAlias(e,t){if(!e.anchor){const n=U(this);e.anchor=!t||n.has(t)?M(t||"a",n):t}return new Z(e.anchor)}createNode(e,t,n){let s;if("function"==typeof t)e=t.call({"":e},"",e),s=t;else if(Array.isArray(t)){const e=e=>"number"==typeof e||e instanceof String||e instanceof Number,n=t.filter(e).map(String);n.length>0&&(t=t.concat(n)),s=t}else void 0===n&&t&&(n=t,t=void 0);const{aliasDuplicateObjects:r,anchorPrefix:i,flow:o,keepUndefined:a,onTagObj:l,tag:c}=n??{},{onAnchor:h,setAnchors:u,sourceObjects:f}=function(e,t){const n=[],s=new Map;let r=null;return{onAnchor:s=>{n.push(s),r||(r=U(e));const i=M(t,r);return r.add(i),i},setAnchors:()=>{for(const e of n){const t=s.get(e);if("object"!=typeof t||!t.anchor||!S(t.node)&&!x(t.node)){const t=new Error("Failed to resolve repeated object (this should not happen)");throw t.source=e,t}t.node.anchor=t.anchor}},sourceObjects:s}}(this,i||"a"),d=J(e,c,{aliasDuplicateObjects:r??!0,keepUndefined:a??!1,onAnchor:h,onTagObj:l,replacer:s,schema:this.schema,sourceObjects:f});return o&&x(d)&&(d.flow=!0),u(),d}createPair(e,t,n={}){const s=this.createNode(e,null,n),r=this.createNode(t,null,n);return new Ee(s,r)}delete(e){return!!Lt(this.contents)&&this.contents.delete(e)}deleteIn(e){return Q(e)?null!=this.contents&&(this.contents=null,!0):!!Lt(this.contents)&&this.contents.deleteIn(e)}get(e,t){return x(this.contents)?this.contents.get(e,t):void 0}getIn(e,t){return Q(e)?!t&&S(this.contents)?this.contents.value:this.contents:x(this.contents)?this.contents.getIn(e,t):void 0}has(e){return!!x(this.contents)&&this.contents.has(e)}hasIn(e){return Q(e)?void 0!==this.contents:!!x(this.contents)&&this.contents.hasIn(e)}set(e,t){null==this.contents?this.contents=X(this.schema,[e],t):Lt(this.contents)&&this.contents.set(e,t)}setIn(e,t){Q(e)?this.contents=t:null==this.contents?this.contents=X(this.schema,Array.from(e),t):Lt(this.contents)&&this.contents.setIn(e,t)}setSchema(e,t={}){let n;switch("number"==typeof e&&(e=String(e)),e){case"1.1":this.directives?this.directives.yaml.version="1.1":this.directives=new F({version:"1.1"}),n={merge:!0,resolveKnownTags:!1,schema:"yaml-1.1"};break;case"1.2":case"next":this.directives?this.directives.yaml.version=e:this.directives=new F({version:e}),n={merge:!1,resolveKnownTags:!0,schema:"core"};break;case null:this.directives&&delete this.directives,n=null;break;default:{const t=JSON.stringify(e);throw new Error(`Expected '1.1', '1.2' or null as first argument, but found: ${t}`)}}if(t.schema instanceof Object)this.schema=t.schema;else{if(!n)throw new Error("With a null YAML version, the { schema: Schema } option is required");this.schema=new Nt(Object.assign(n,t))}}toJS({json:e,jsonArg:t,mapAsMap:n,maxAliasCount:s,onAnchor:r,reviver:i}={}){const o={anchors:new Map,doc:this,keep:!e,mapAsMap:!0===n,mapKeyWarned:!1,maxAliasCount:"number"==typeof s?s:100},a=W(this.contents,t??"",o);if("function"==typeof r)for(const{count:e,res:t}of o.anchors.values())r(t,e);return"function"==typeof i?K(i,{"":a},"",a):a}toJSON(e,t){return this.toJS({json:!0,jsonArg:e,mapAsMap:!1,onAnchor:t})}toString(e={}){if(this.errors.length>0)throw new Error("Document with errors cannot be stringified");if("indent"in e&&(!Number.isInteger(e.indent)||Number(e.indent)<=0)){const t=JSON.stringify(e.indent);throw new Error(`"indent" option must be a positive integer, not ${t}`)}return function(e,t){const n=[];let s=!0===t.directives;if(!1!==t.directives&&e.directives){const t=e.directives.toString(e);t?(n.push(t),s=!0):e.directives.docStart&&(s=!0)}s&&n.push("---");const r=ye(e,t),{commentString:i}=r.options;if(e.commentBefore){1!==n.length&&n.unshift("");const t=i(e.commentBefore);n.unshift(ne(t,""))}let o=!1,a=null;if(e.contents){if(A(e.contents)){if(e.contents.spaceBefore&&s&&n.push(""),e.contents.commentBefore){const t=i(e.contents.commentBefore);n.push(ne(t,""))}r.forceBlockIndent=!!e.comment,a=e.contents.comment}const t=a?void 0:()=>o=!0;let l=_e(e.contents,r,(()=>a=null),t);a&&(l+=se(l,"",i(a))),"|"!==l[0]&&">"!==l[0]||"---"!==n[n.length-1]?n.push(l):n[n.length-1]=`--- ${l}`}else n.push(_e(e.contents,r));if(e.directives?.docEnd)if(e.comment){const t=i(e.comment);t.includes("\n")?(n.push("..."),n.push(ne(t,""))):n.push(`... ${t}`)}else n.push("...");else{let t=e.comment;t&&o&&(t=t.replace(/^\n+/,"")),t&&(o&&!a||""===n[n.length-1]||n.push(""),n.push(ne(i(t),"")))}return n.join("\n")+"\n"}(this,e)}}function Lt(e){if(x(e))return!0;throw new Error("Expected a YAML collection as document contents")}class Bt extends Error{constructor(e,t,n,s){super(),this.name=e,this.code=n,this.message=s,this.pos=t}}class zt extends Bt{constructor(e,t,n){super("YAMLParseError",e,t,n)}}class Dt extends Bt{constructor(e,t,n){super("YAMLWarning",e,t,n)}}const Pt=(e,t)=>n=>{if(-1===n.pos[0])return;n.linePos=n.pos.map((e=>t.linePos(e)));const{line:s,col:r}=n.linePos[0];n.message+=` at line ${s}, column ${r}`;let i=r-1,o=e.substring(t.lineStarts[s-1],t.lineStarts[s]).replace(/[\n\r]+$/,"");if(i>=60&&o.length>80){const e=Math.min(i-39,o.length-79);o="…"+o.substring(e),i-=e-1}if(o.length>80&&(o=o.substring(0,79)+"…"),s>1&&/^ *$/.test(o.substring(0,i))){let n=e.substring(t.lineStarts[s-2],t.lineStarts[s-1]);n.length>80&&(n=n.substring(0,79)+"…\n"),o=n+o}if(/[^ ]/.test(o)){let e=1;const t=n.linePos[1];t&&t.line===s&&t.col>r&&(e=Math.max(1,Math.min(t.col-r,80-i)));const a=" ".repeat(i)+"^".repeat(e);n.message+=`:\n\n${o}\n${a}\n`}};function Rt(e,{flow:t,indicator:n,next:s,offset:r,onError:i,startOnNewline:o}){let a=!1,l=o,c=o,h="",u="",f=!1,d=!1,p=!1,m=null,g=null,y=null,_=null,b=null;for(const s of e)switch(p&&("space"!==s.type&&"newline"!==s.type&&"comma"!==s.type&&i(s.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),p=!1),s.type){case"space":!t&&l&&"doc-start"!==n&&"\t"===s.source[0]&&i(s,"TAB_AS_INDENT","Tabs are not allowed as indentation"),c=!0;break;case"comment":{c||i(s,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");const e=s.source.substring(1)||" ";h?h+=u+e:h=e,u="",l=!1;break}case"newline":l?h?h+=s.source:a=!0:u+=s.source,l=!0,f=!0,(m||g)&&(d=!0),c=!0;break;case"anchor":m&&i(s,"MULTIPLE_ANCHORS","A node can have at most one anchor"),s.source.endsWith(":")&&i(s.offset+s.source.length-1,"BAD_ALIAS","Anchor ending in : is ambiguous",!0),m=s,null===b&&(b=s.offset),l=!1,c=!1,p=!0;break;case"tag":g&&i(s,"MULTIPLE_TAGS","A node can have at most one tag"),g=s,null===b&&(b=s.offset),l=!1,c=!1,p=!0;break;case n:(m||g)&&i(s,"BAD_PROP_ORDER",`Anchors and tags must be after the ${s.source} indicator`),_&&i(s,"UNEXPECTED_TOKEN",`Unexpected ${s.source} in ${t??"collection"}`),_=s,l=!1,c=!1;break;case"comma":if(t){y&&i(s,"UNEXPECTED_TOKEN",`Unexpected , in ${t}`),y=s,l=!1,c=!1;break}default:i(s,"UNEXPECTED_TOKEN",`Unexpected ${s.type} token`),l=!1,c=!1}const v=e[e.length-1],w=v?v.offset+v.source.length:r;return p&&s&&"space"!==s.type&&"newline"!==s.type&&"comma"!==s.type&&("scalar"!==s.type||""!==s.source)&&i(s.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),{comma:y,found:_,spaceBefore:a,comment:h,hasNewline:f,hasNewlineAfterProp:d,anchor:m,tag:g,end:w,start:b??w}}function jt(e){if(!e)return null;switch(e.type){case"alias":case"scalar":case"double-quoted-scalar":case"single-quoted-scalar":if(e.source.includes("\n"))return!0;if(e.end)for(const t of e.end)if("newline"===t.type)return!0;return!1;case"flow-collection":for(const t of e.items){for(const e of t.start)if("newline"===e.type)return!0;if(t.sep)for(const e of t.sep)if("newline"===e.type)return!0;if(jt(t.key)||jt(t.value))return!0}return!1;default:return!0}}function Ft(e,t,n){if("flow-collection"===t?.type){const s=t.end[0];s.indent!==e||"]"!==s.source&&"}"!==s.source||!jt(t)||n(s,"BAD_INDENT","Flow end indicator should be more indented than parent",!0)}}function $t(e,t,n){const{uniqueKeys:s}=e.options;if(!1===s)return!1;const r="function"==typeof s?s:(t,n)=>t===n||S(t)&&S(n)&&t.value===n.value&&!("<<"===t.value&&e.schema.merge);return t.some((e=>r(e.key,n)))}const Ut="All mapping items must start at the same column";function Mt(e,t,n,s){let r="";if(e){let i=!1,o="";for(const a of e){const{source:e,type:l}=a;switch(l){case"space":i=!0;break;case"comment":{n&&!i&&s(a,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");const t=e.substring(1)||" ";r?r+=o+t:r=t,o="";break}case"newline":r&&(o+=e),i=!0;break;default:s(a,"UNEXPECTED_TOKEN",`Unexpected ${l} at node end`)}t+=e.length}}return{comment:r,offset:t}}const Kt="Block collections are not allowed within flow collections",Wt=e=>e&&("block-map"===e.type||"block-seq"===e.type);function qt(e,t,n,s,r,i){const o="block-map"===n.type?function({composeNode:e,composeEmptyNode:t},n,s,r,i){const o=new(i?.nodeClass??Ne)(n.schema);n.atRoot&&(n.atRoot=!1);let a=s.offset,l=null;for(const i of s.items){const{start:c,key:h,sep:u,value:f}=i,d=Rt(c,{indicator:"explicit-key-ind",next:h??u?.[0],offset:a,onError:r,startOnNewline:!0}),p=!d.found;if(p){if(h&&("block-seq"===h.type?r(a,"BLOCK_AS_IMPLICIT_KEY","A block sequence may not be used as an implicit map key"):"indent"in h&&h.indent!==s.indent&&r(a,"BAD_INDENT",Ut)),!d.anchor&&!d.tag&&!u){l=d.end,d.comment&&(o.comment?o.comment+="\n"+d.comment:o.comment=d.comment);continue}(d.hasNewlineAfterProp||jt(h))&&r(h??c[c.length-1],"MULTILINE_IMPLICIT_KEY","Implicit keys need to be on a single line")}else d.found?.indent!==s.indent&&r(a,"BAD_INDENT",Ut);const m=d.end,g=h?e(n,h,d,r):t(n,m,c,null,d,r);n.schema.compat&&Ft(s.indent,h,r),$t(n,o.items,g)&&r(m,"DUPLICATE_KEY","Map keys must be unique");const y=Rt(u??[],{indicator:"map-value-ind",next:f,offset:g.range[2],onError:r,startOnNewline:!h||"block-scalar"===h.type});if(a=y.end,y.found){p&&("block-map"!==f?.type||y.hasNewline||r(a,"BLOCK_AS_IMPLICIT_KEY","Nested mappings are not allowed in compact mappings"),n.options.strict&&d.start<y.found.offset-1024&&r(g.range,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit block mapping key"));const l=f?e(n,f,y,r):t(n,a,u,null,y,r);n.schema.compat&&Ft(s.indent,f,r),a=l.range[2];const c=new Ee(g,l);n.options.keepSourceTokens&&(c.srcToken=i),o.items.push(c)}else{p&&r(g.range,"MISSING_CHAR","Implicit map keys need to be followed by map values"),y.comment&&(g.comment?g.comment+="\n"+y.comment:g.comment=y.comment);const e=new Ee(g);n.options.keepSourceTokens&&(e.srcToken=i),o.items.push(e)}}return l&&l<a&&r(l,"IMPOSSIBLE","Map comment with trailing content"),o.range=[s.offset,a,l??a],o}(e,t,n,s,i):"block-seq"===n.type?function({composeNode:e,composeEmptyNode:t},n,s,r,i){const o=new(i?.nodeClass??Le)(n.schema);n.atRoot&&(n.atRoot=!1);let a=s.offset,l=null;for(const{start:i,value:c}of s.items){const h=Rt(i,{indicator:"seq-item-ind",next:c,offset:a,onError:r,startOnNewline:!0});if(!h.found){if(!(h.anchor||h.tag||c)){l=h.end,h.comment&&(o.comment=h.comment);continue}c&&"block-seq"===c.type?r(h.end,"BAD_INDENT","All sequence items must start at the same column"):r(a,"MISSING_CHAR","Sequence item without - indicator")}const u=c?e(n,c,h,r):t(n,h.end,i,null,h,r);n.schema.compat&&Ft(s.indent,c,r),a=u.range[2],o.items.push(u)}return o.range=[s.offset,a,l??a],o}(e,t,n,s,i):function({composeNode:e,composeEmptyNode:t},n,s,r,i){const o="{"===s.start.source,a=o?"flow map":"flow sequence",l=new(i?.nodeClass??(o?Ne:Le))(n.schema);l.flow=!0;const c=n.atRoot;c&&(n.atRoot=!1);let h=s.offset+s.start.source.length;for(let i=0;i<s.items.length;++i){const c=s.items[i],{start:u,key:f,sep:d,value:p}=c,m=Rt(u,{flow:a,indicator:"explicit-key-ind",next:f??d?.[0],offset:h,onError:r,startOnNewline:!1});if(!m.found){if(!(m.anchor||m.tag||d||p)){0===i&&m.comma?r(m.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${a}`):i<s.items.length-1&&r(m.start,"UNEXPECTED_TOKEN",`Unexpected empty item in ${a}`),m.comment&&(l.comment?l.comment+="\n"+m.comment:l.comment=m.comment),h=m.end;continue}!o&&n.options.strict&&jt(f)&&r(f,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line")}if(0===i)m.comma&&r(m.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${a}`);else if(m.comma||r(m.start,"MISSING_CHAR",`Missing , between ${a} items`),m.comment){let e="";e:for(const t of u)switch(t.type){case"comma":case"space":break;case"comment":e=t.source.substring(1);break e;default:break e}if(e){let t=l.items[l.items.length-1];k(t)&&(t=t.value??t.key),t.comment?t.comment+="\n"+e:t.comment=e,m.comment=m.comment.substring(e.length+1)}}if(o||d||m.found){const s=m.end,i=f?e(n,f,m,r):t(n,s,u,null,m,r);Wt(f)&&r(i.range,"BLOCK_IN_FLOW",Kt);const g=Rt(d??[],{flow:a,indicator:"map-value-ind",next:p,offset:i.range[2],onError:r,startOnNewline:!1});if(g.found){if(!o&&!m.found&&n.options.strict){if(d)for(const e of d){if(e===g.found)break;if("newline"===e.type){r(e,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line");break}}m.start<g.found.offset-1024&&r(g.found,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit flow sequence key")}}else p&&("source"in p&&p.source&&":"===p.source[0]?r(p,"MISSING_CHAR",`Missing space after : in ${a}`):r(g.start,"MISSING_CHAR",`Missing , or : between ${a} items`));const y=p?e(n,p,g,r):g.found?t(n,g.end,d,null,g,r):null;y?Wt(p)&&r(y.range,"BLOCK_IN_FLOW",Kt):g.comment&&(i.comment?i.comment+="\n"+g.comment:i.comment=g.comment);const _=new Ee(i,y);if(n.options.keepSourceTokens&&(_.srcToken=c),o){const e=l;$t(n,e.items,i)&&r(s,"DUPLICATE_KEY","Map keys must be unique"),e.items.push(_)}else{const e=new Ne(n.schema);e.flow=!0,e.items.push(_),l.items.push(e)}h=y?y.range[2]:g.end}else{const s=p?e(n,p,m,r):t(n,m.end,d,null,m,r);l.items.push(s),h=s.range[2],Wt(p)&&r(s.range,"BLOCK_IN_FLOW",Kt)}}const u=o?"}":"]",[f,...d]=s.end;let p=h;if(f&&f.source===u)p=f.offset+f.source.length;else{const e=a[0].toUpperCase()+a.substring(1);r(h,c?"MISSING_CHAR":"BAD_INDENT",c?`${e} must end with a ${u}`:`${e} in block collection must be sufficiently indented and end with a ${u}`),f&&1!==f.source.length&&d.unshift(f)}if(d.length>0){const e=Mt(d,p,n.options.strict,r);e.comment&&(l.comment?l.comment+="\n"+e.comment:l.comment=e.comment),l.range=[s.offset,p,e.offset]}else l.range=[s.offset,p,p];return l}(e,t,n,s,i),a=o.constructor;return"!"===r||r===a.tagName?(o.tag=a.tagName,o):(r&&(o.tag=r),o)}function Zt(e){let t,n;try{t=new RegExp("(.*?)(?<![ \t])[ \t]*\r?\n","sy"),n=new RegExp("[ \t]*(.*?)(?:(?<![ \t])[ \t]*)?\r?\n","sy")}catch(e){t=/(.*?)[ \t]*\r?\n/sy,n=/[ \t]*(.*?)[ \t]*\r?\n/sy}let s=t.exec(e);if(!s)return e;let r=s[1],i=" ",o=t.lastIndex;for(n.lastIndex=o;s=n.exec(e);)""===s[1]?"\n"===i?r+=i:i="\n":(r+=i+s[1],i=" "),o=n.lastIndex;const a=/[ \t]*(.*)/sy;return a.lastIndex=o,s=a.exec(e),r+i+(s?.[1]??"")}function Gt(e,t){let n="",s=e[t+1];for(;!(" "!==s&&"\t"!==s&&"\n"!==s&&"\r"!==s||"\r"===s&&"\n"!==e[t+2]);)"\n"===s&&(n+="\n"),s=e[(t+=1)+1];return n||(n=" "),{fold:n,offset:t}}const Ht={0:"\0",a:"",b:"\b",e:"",f:"\f",n:"\n",r:"\r",t:"\t",v:"\v",N:"",_:" ",L:"\u2028",P:"\u2029"," ":" ",'"':'"',"/":"/","\\":"\\","\t":"\t"};function Vt(e,t,n,s){const r=e.substr(t,n),i=r.length===n&&/^[0-9a-fA-F]+$/.test(r)?parseInt(r,16):NaN;if(isNaN(i)){const r=e.substr(t-2,n+2);return s(t-2,"BAD_DQ_ESCAPE",`Invalid escape sequence ${r}`),r}return String.fromCodePoint(i)}function Yt(e,t,n,s){const{value:r,type:i,comment:o,range:a}="block-scalar"===t.type?function(e,t,n){const s=e.offset,r=function({offset:e,props:t},n,s){if("block-scalar-header"!==t[0].type)return s(t[0],"IMPOSSIBLE","Block scalar header not found"),null;const{source:r}=t[0],i=r[0];let o=0,a="",l=-1;for(let t=1;t<r.length;++t){const n=r[t];if(a||"-"!==n&&"+"!==n){const s=Number(n);!o&&s?o=s:-1===l&&(l=e+t)}else a=n}-1!==l&&s(l,"UNEXPECTED_TOKEN",`Block scalar header includes extra characters: ${r}`);let c=!1,h="",u=r.length;for(let e=1;e<t.length;++e){const r=t[e];switch(r.type){case"space":c=!0;case"newline":u+=r.source.length;break;case"comment":n&&!c&&s(r,"MISSING_CHAR","Comments must be separated from other tokens by white space characters"),u+=r.source.length,h=r.source.substring(1);break;case"error":s(r,"UNEXPECTED_TOKEN",r.message),u+=r.source.length;break;default:{s(r,"UNEXPECTED_TOKEN",`Unexpected token in block scalar header: ${r.type}`);const e=r.source;e&&"string"==typeof e&&(u+=e.length)}}}return{mode:i,indent:o,chomp:a,comment:h,length:u}}(e,t,n);if(!r)return{value:"",type:null,comment:"",range:[s,s,s]};const i=">"===r.mode?V.BLOCK_FOLDED:V.BLOCK_LITERAL,o=e.source?function(e){const t=e.split(/\n( *)/),n=t[0],s=n.match(/^( *)/),r=[s?.[1]?[s[1],n.slice(s[1].length)]:["",n]];for(let e=1;e<t.length;e+=2)r.push([t[e],t[e+1]]);return r}(e.source):[];let a=o.length;for(let e=o.length-1;e>=0;--e){const t=o[e][1];if(""!==t&&"\r"!==t)break;a=e}if(0===a){const t="+"===r.chomp&&o.length>0?"\n".repeat(Math.max(1,o.length-1)):"";let n=s+r.length;return e.source&&(n+=e.source.length),{value:t,type:i,comment:r.comment,range:[s,n,n]}}let l=e.indent+r.indent,c=e.offset+r.length,h=0;for(let e=0;e<a;++e){const[t,s]=o[e];if(""!==s&&"\r"!==s){if(t.length<l){const e="Block scalars with more-indented leading empty lines must use an explicit indentation indicator";n(c+t.length,"MISSING_CHAR",e)}0===r.indent&&(l=t.length),h=e;break}0===r.indent&&t.length>l&&(l=t.length),c+=t.length+s.length+1}for(let e=o.length-1;e>=a;--e)o[e][0].length>l&&(a=e+1);let u="",f="",d=!1;for(let e=0;e<h;++e)u+=o[e][0].slice(l)+"\n";for(let e=h;e<a;++e){let[t,s]=o[e];c+=t.length+s.length+1;const a="\r"===s[s.length-1];if(a&&(s=s.slice(0,-1)),s&&t.length<l){const e="Block scalar lines must not be less indented than their "+(r.indent?"explicit indentation indicator":"first line");n(c-s.length-(a?2:1),"BAD_INDENT",e),t=""}i===V.BLOCK_LITERAL?(u+=f+t.slice(l)+s,f="\n"):t.length>l||"\t"===s[0]?(" "===f?f="\n":d||"\n"!==f||(f="\n\n"),u+=f+t.slice(l)+s,f="\n",d=!0):""===s?"\n"===f?u+="\n":f="\n":(u+=f+s,f=" ",d=!1)}switch(r.chomp){case"-":break;case"+":for(let e=a;e<o.length;++e)u+="\n"+o[e][0].slice(l);"\n"!==u[u.length-1]&&(u+="\n");break;default:u+="\n"}const p=s+r.length+e.source.length;return{value:u,type:i,comment:r.comment,range:[s,p,p]}}(t,e.options.strict,s):function(e,t,n){const{offset:s,type:r,source:i,end:o}=e;let a,l;const c=(e,t,r)=>n(s+e,t,r);switch(r){case"scalar":a=V.PLAIN,l=function(e,t){let n="";switch(e[0]){case"\t":n="a tab character";break;case",":n="flow indicator character ,";break;case"%":n="directive indicator character %";break;case"|":case">":n=`block scalar indicator ${e[0]}`;break;case"@":case"`":n=`reserved character ${e[0]}`}return n&&t(0,"BAD_SCALAR_START",`Plain value cannot start with ${n}`),Zt(e)}(i,c);break;case"single-quoted-scalar":a=V.QUOTE_SINGLE,l=function(e,t){return"'"===e[e.length-1]&&1!==e.length||t(e.length,"MISSING_CHAR","Missing closing 'quote"),Zt(e.slice(1,-1)).replace(/''/g,"'")}(i,c);break;case"double-quoted-scalar":a=V.QUOTE_DOUBLE,l=function(e,t){let n="";for(let s=1;s<e.length-1;++s){const r=e[s];if("\r"!==r||"\n"!==e[s+1])if("\n"===r){const{fold:t,offset:r}=Gt(e,s);n+=t,s=r}else if("\\"===r){let r=e[++s];const i=Ht[r];if(i)n+=i;else if("\n"===r)for(r=e[s+1];" "===r||"\t"===r;)r=e[1+ ++s];else if("\r"===r&&"\n"===e[s+1])for(r=e[1+ ++s];" "===r||"\t"===r;)r=e[1+ ++s];else if("x"===r||"u"===r||"U"===r){const i={x:2,u:4,U:8}[r];n+=Vt(e,s+1,i,t),s+=i}else{const r=e.substr(s-1,2);t(s-1,"BAD_DQ_ESCAPE",`Invalid escape sequence ${r}`),n+=r}}else if(" "===r||"\t"===r){const t=s;let i=e[s+1];for(;" "===i||"\t"===i;)i=e[1+ ++s];"\n"===i||"\r"===i&&"\n"===e[s+2]||(n+=s>t?e.slice(t,s+1):r)}else n+=r}return'"'===e[e.length-1]&&1!==e.length||t(e.length,"MISSING_CHAR",'Missing closing "quote'),n}(i,c);break;default:return n(e,"UNEXPECTED_TOKEN",`Expected a flow scalar value, but found: ${r}`),{value:"",type:null,comment:"",range:[s,s+i.length,s+i.length]}}const h=s+i.length,u=Mt(o,h,t,n);return{value:l,type:a,comment:u.comment,range:[s,h,u.offset]}}(t,e.options.strict,s),l=n?e.directives.tagName(n.source,(e=>s(n,"TAG_RESOLVE_FAILED",e))):null,c=n&&l?function(e,t,n,s,r){if("!"===n)return e[g];const i=[];for(const t of e.tags)if(!t.collection&&t.tag===n){if(!t.default||!t.test)return t;i.push(t)}for(const e of i)if(e.test?.test(t))return e;const o=e.knownTags[n];return o&&!o.collection?(e.tags.push(Object.assign({},o,{default:!1,test:void 0})),o):(r(s,"TAG_RESOLVE_FAILED",`Unresolved tag: ${n}`,"tag:yaml.org,2002:str"!==n),e[g])}(e.schema,r,l,n,s):"scalar"===t.type?function({directives:e,schema:t},n,s,r){const i=t.tags.find((e=>e.default&&e.test?.test(n)))||t[g];if(t.compat){const o=t.compat.find((e=>e.default&&e.test?.test(n)))??t[g];i.tag!==o.tag&&r(s,"TAG_RESOLVE_FAILED",`Value may be parsed as either ${e.tagString(i.tag)} or ${e.tagString(o.tag)}`,!0)}return i}(e,r,t,s):e.schema[g];let h;try{const i=c.resolve(r,(e=>s(n??t,"TAG_RESOLVE_FAILED",e)),e.options);h=S(i)?i:new V(i)}catch(e){const i=e instanceof Error?e.message:String(e);s(n??t,"TAG_RESOLVE_FAILED",i),h=new V(r)}return h.range=a,h.source=r,i&&(h.type=i),l&&(h.tag=l),c.format&&(h.format=c.format),o&&(h.comment=o),h}function Jt(e,t,n){if(t){null===n&&(n=t.length);for(let s=n-1;s>=0;--s){let n=t[s];switch(n.type){case"space":case"comment":case"newline":e-=n.source.length;continue}for(n=t[++s];"space"===n?.type;)e+=n.source.length,n=t[++s];break}}return e}const Xt={composeNode:Qt,composeEmptyNode:en};function Qt(e,t,n,s){const{spaceBefore:r,comment:i,anchor:o,tag:a}=n;let l,c=!0;switch(t.type){case"alias":l=function({options:e},{offset:t,source:n,end:s},r){const i=new Z(n.substring(1));""===i.source&&r(t,"BAD_ALIAS","Alias cannot be an empty string"),i.source.endsWith(":")&&r(t+n.length-1,"BAD_ALIAS","Alias ending in : is ambiguous",!0);const o=t+n.length,a=Mt(s,o,e.strict,r);return i.range=[t,o,a.offset],a.comment&&(i.comment=a.comment),i}(e,t,s),(o||a)&&s(t,"ALIAS_PROPS","An alias node must not specify any properties");break;case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"block-scalar":l=Yt(e,t,a,s),o&&(l.anchor=o.source.substring(1));break;case"block-map":case"block-seq":case"flow-collection":l=function(e,t,n,s,r){const i=s?t.directives.tagName(s.source,(e=>r(s,"TAG_RESOLVE_FAILED",e))):null,o="block-map"===n.type?"map":"block-seq"===n.type?"seq":"{"===n.start.source?"map":"seq";if(!s||!i||"!"===i||i===Ne.tagName&&"map"===o||i===Le.tagName&&"seq"===o||!o)return qt(e,t,n,r,i);let a=t.schema.tags.find((e=>e.tag===i&&e.collection===o));if(!a){const l=t.schema.knownTags[i];if(!l||l.collection!==o)return l?.collection?r(s,"BAD_COLLECTION_TYPE",`${l.tag} used for ${o} collection, but expects ${l.collection}`,!0):r(s,"TAG_RESOLVE_FAILED",`Unresolved tag: ${i}`,!0),qt(e,t,n,r,i);t.schema.tags.push(Object.assign({},l,{default:!1})),a=l}const l=qt(e,t,n,r,i,a),c=a.resolve?.(l,(e=>r(s,"TAG_RESOLVE_FAILED",e)),t.options)??l,h=A(c)?c:new V(c);return h.range=l.range,h.tag=i,a?.format&&(h.format=a.format),h}(Xt,e,t,a,s),o&&(l.anchor=o.source.substring(1));break;default:s(t,"UNEXPECTED_TOKEN","error"===t.type?t.message:`Unsupported token (type: ${t.type})`),l=en(e,t.offset,void 0,null,n,s),c=!1}return o&&""===l.anchor&&s(o,"BAD_ALIAS","Anchor cannot be an empty string"),r&&(l.spaceBefore=!0),i&&("scalar"===t.type&&""===t.source?l.comment=i:l.commentBefore=i),e.options.keepSourceTokens&&c&&(l.srcToken=t),l}function en(e,t,n,s,{spaceBefore:r,comment:i,anchor:o,tag:a,end:l},c){const h=Yt(e,{type:"scalar",offset:Jt(t,n,s),indent:-1,source:""},a,c);return o&&(h.anchor=o.source.substring(1),""===h.anchor&&c(o,"BAD_ALIAS","Anchor cannot be an empty string")),r&&(h.spaceBefore=!0),i&&(h.comment=i,h.range[2]=l),h}function tn(e){if("number"==typeof e)return[e,e+1];if(Array.isArray(e))return 2===e.length?e:[e[0],e[1]];const{offset:t,source:n}=e;return[t,t+("string"==typeof n?n.length:1)]}function nn(e){let t="",n=!1,s=!1;for(let r=0;r<e.length;++r){const i=e[r];switch(i[0]){case"#":t+=(""===t?"":s?"\n\n":"\n")+(i.substring(1)||" "),n=!0,s=!1;break;case"%":"#"!==e[r+1]?.[0]&&(r+=1),n=!1;break;default:n||(s=!0),n=!1}}return{comment:t,afterEmptyLine:s}}class sn{constructor(e={}){this.doc=null,this.atDirectives=!1,this.prelude=[],this.errors=[],this.warnings=[],this.onError=(e,t,n,s)=>{const r=tn(e);s?this.warnings.push(new Dt(r,t,n)):this.errors.push(new zt(r,t,n))},this.directives=new F({version:e.version||"1.2"}),this.options=e}decorate(e,t){const{comment:n,afterEmptyLine:s}=nn(this.prelude);if(n){const r=e.contents;if(t)e.comment=e.comment?`${e.comment}\n${n}`:n;else if(s||e.directives.docStart||!r)e.commentBefore=n;else if(x(r)&&!r.flow&&r.items.length>0){let e=r.items[0];k(e)&&(e=e.key);const t=e.commentBefore;e.commentBefore=t?`${n}\n${t}`:n}else{const e=r.commentBefore;r.commentBefore=e?`${n}\n${e}`:n}}t?(Array.prototype.push.apply(e.errors,this.errors),Array.prototype.push.apply(e.warnings,this.warnings)):(e.errors=this.errors,e.warnings=this.warnings),this.prelude=[],this.errors=[],this.warnings=[]}streamInfo(){return{comment:nn(this.prelude).comment,directives:this.directives,errors:this.errors,warnings:this.warnings}}*compose(e,t=!1,n=-1){for(const t of e)yield*this.next(t);yield*this.end(t,n)}*next(e){switch(e.type){case"directive":this.directives.add(e.source,((t,n,s)=>{const r=tn(e);r[0]+=t,this.onError(r,"BAD_DIRECTIVE",n,s)})),this.prelude.push(e.source),this.atDirectives=!0;break;case"document":{const t=function(e,t,{offset:n,start:s,value:r,end:i},o){const a=Object.assign({_directives:t},e),l=new Tt(void 0,a),c={atRoot:!0,directives:l.directives,options:l.options,schema:l.schema},h=Rt(s,{indicator:"doc-start",next:r??i?.[0],offset:n,onError:o,startOnNewline:!0});h.found&&(l.directives.docStart=!0,!r||"block-map"!==r.type&&"block-seq"!==r.type||h.hasNewline||o(h.end,"MISSING_CHAR","Block collection cannot start on same line with directives-end marker")),l.contents=r?Qt(c,r,h,o):en(c,h.end,s,null,h,o);const u=l.contents.range[2],f=Mt(i,u,!1,o);return f.comment&&(l.comment=f.comment),l.range=[n,u,f.offset],l}(this.options,this.directives,e,this.onError);this.atDirectives&&!t.directives.docStart&&this.onError(e,"MISSING_CHAR","Missing directives-end/doc-start indicator line"),this.decorate(t,!1),this.doc&&(yield this.doc),this.doc=t,this.atDirectives=!1;break}case"byte-order-mark":case"space":break;case"comment":case"newline":this.prelude.push(e.source);break;case"error":{const t=e.source?`${e.message}: ${JSON.stringify(e.source)}`:e.message,n=new zt(tn(e),"UNEXPECTED_TOKEN",t);this.atDirectives||!this.doc?this.errors.push(n):this.doc.errors.push(n);break}case"doc-end":{if(!this.doc){const t="Unexpected doc-end without preceding document";this.errors.push(new zt(tn(e),"UNEXPECTED_TOKEN",t));break}this.doc.directives.docEnd=!0;const t=Mt(e.end,e.offset+e.source.length,this.doc.options.strict,this.onError);if(this.decorate(this.doc,!0),t.comment){const e=this.doc.comment;this.doc.comment=e?`${e}\n${t.comment}`:t.comment}this.doc.range[2]=t.offset;break}default:this.errors.push(new zt(tn(e),"UNEXPECTED_TOKEN",`Unsupported token ${e.type}`))}}*end(e=!1,t=-1){if(this.doc)this.decorate(this.doc,!0),yield this.doc,this.doc=null;else if(e){const e=Object.assign({_directives:this.directives},this.options),n=new Tt(void 0,e);this.atDirectives&&this.onError(t,"MISSING_CHAR","Missing directives-end indicator line"),n.range=[0,t,t],this.decorate(n,!1),yield n}}}const rn=Symbol("break visit"),on=Symbol("skip children"),an=Symbol("remove item");function ln(e,t){"type"in e&&"document"===e.type&&(e={start:e.start,value:e.value}),cn(Object.freeze([]),e,t)}function cn(e,t,n){let s=n(t,e);if("symbol"==typeof s)return s;for(const r of["key","value"]){const i=t[r];if(i&&"items"in i){for(let t=0;t<i.items.length;++t){const s=cn(Object.freeze(e.concat([[r,t]])),i.items[t],n);if("number"==typeof s)t=s-1;else{if(s===rn)return rn;s===an&&(i.items.splice(t,1),t-=1)}}"function"==typeof s&&"key"===r&&(s=s(t,e))}}return"function"==typeof s?s(t,e):s}ln.BREAK=rn,ln.SKIP=on,ln.REMOVE=an,ln.itemAtPath=(e,t)=>{let n=e;for(const[e,s]of t){const t=n?.[e];if(!t||!("items"in t))return;n=t.items[s]}return n},ln.parentCollection=(e,t)=>{const n=ln.itemAtPath(e,t.slice(0,-1)),s=t[t.length-1][0],r=n?.[s];if(r&&"items"in r)return r;throw new Error("Parent collection not found")};function hn(e){switch(e){case void 0:case" ":case"\n":case"\r":case"\t":return!0;default:return!1}}const un="0123456789ABCDEFabcdef".split(""),fn="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-#;/?:@&=+$_.!~*'()".split(""),dn=",[]{}".split(""),pn=" ,[]{}\n\r\t".split(""),mn=e=>!e||pn.includes(e);class gn{constructor(){this.atEnd=!1,this.blockScalarIndent=-1,this.blockScalarKeep=!1,this.buffer="",this.flowKey=!1,this.flowLevel=0,this.indentNext=0,this.indentValue=0,this.lineEndPos=null,this.next=null,this.pos=0}*lex(e,t=!1){e&&(this.buffer=this.buffer?this.buffer+e:e,this.lineEndPos=null),this.atEnd=!t;let n=this.next??"stream";for(;n&&(t||this.hasChars(1));)n=yield*this.parseNext(n)}atLineEnd(){let e=this.pos,t=this.buffer[e];for(;" "===t||"\t"===t;)t=this.buffer[++e];return!t||"#"===t||"\n"===t||"\r"===t&&"\n"===this.buffer[e+1]}charAt(e){return this.buffer[this.pos+e]}continueScalar(e){let t=this.buffer[e];if(this.indentNext>0){let n=0;for(;" "===t;)t=this.buffer[++n+e];if("\r"===t){const t=this.buffer[n+e+1];if("\n"===t||!t&&!this.atEnd)return e+n+1}return"\n"===t||n>=this.indentNext||!t&&!this.atEnd?e+n:-1}if("-"===t||"."===t){const t=this.buffer.substr(e,3);if(("---"===t||"..."===t)&&hn(this.buffer[e+3]))return-1}return e}getLine(){let e=this.lineEndPos;return("number"!=typeof e||-1!==e&&e<this.pos)&&(e=this.buffer.indexOf("\n",this.pos),this.lineEndPos=e),-1===e?this.atEnd?this.buffer.substring(this.pos):null:("\r"===this.buffer[e-1]&&(e-=1),this.buffer.substring(this.pos,e))}hasChars(e){return this.pos+e<=this.buffer.length}setNext(e){return this.buffer=this.buffer.substring(this.pos),this.pos=0,this.lineEndPos=null,this.next=e,null}peek(e){return this.buffer.substr(this.pos,e)}*parseNext(e){switch(e){case"stream":return yield*this.parseStream();case"line-start":return yield*this.parseLineStart();case"block-start":return yield*this.parseBlockStart();case"doc":return yield*this.parseDocument();case"flow":return yield*this.parseFlowCollection();case"quoted-scalar":return yield*this.parseQuotedScalar();case"block-scalar":return yield*this.parseBlockScalar();case"plain-scalar":return yield*this.parsePlainScalar()}}*parseStream(){let e=this.getLine();if(null===e)return this.setNext("stream");if("\ufeff"===e[0]&&(yield*this.pushCount(1),e=e.substring(1)),"%"===e[0]){let t=e.length;const n=e.indexOf("#");if(-1!==n){const s=e[n-1];" "!==s&&"\t"!==s||(t=n-1)}for(;;){const n=e[t-1];if(" "!==n&&"\t"!==n)break;t-=1}const s=(yield*this.pushCount(t))+(yield*this.pushSpaces(!0));return yield*this.pushCount(e.length-s),this.pushNewline(),"stream"}if(this.atLineEnd()){const t=yield*this.pushSpaces(!0);return yield*this.pushCount(e.length-t),yield*this.pushNewline(),"stream"}return yield"",yield*this.parseLineStart()}*parseLineStart(){const e=this.charAt(0);if(!e&&!this.atEnd)return this.setNext("line-start");if("-"===e||"."===e){if(!this.atEnd&&!this.hasChars(4))return this.setNext("line-start");const e=this.peek(3);if("---"===e&&hn(this.charAt(3)))return yield*this.pushCount(3),this.indentValue=0,this.indentNext=0,"doc";if("..."===e&&hn(this.charAt(3)))return yield*this.pushCount(3),"stream"}return this.indentValue=yield*this.pushSpaces(!1),this.indentNext>this.indentValue&&!hn(this.charAt(1))&&(this.indentNext=this.indentValue),yield*this.parseBlockStart()}*parseBlockStart(){const[e,t]=this.peek(2);if(!t&&!this.atEnd)return this.setNext("block-start");if(("-"===e||"?"===e||":"===e)&&hn(t)){const e=(yield*this.pushCount(1))+(yield*this.pushSpaces(!0));return this.indentNext=this.indentValue+1,this.indentValue+=e,yield*this.parseBlockStart()}return"doc"}*parseDocument(){yield*this.pushSpaces(!0);const e=this.getLine();if(null===e)return this.setNext("doc");let t=yield*this.pushIndicators();switch(e[t]){case"#":yield*this.pushCount(e.length-t);case void 0:return yield*this.pushNewline(),yield*this.parseLineStart();case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel=1,"flow";case"}":case"]":return yield*this.pushCount(1),"doc";case"*":return yield*this.pushUntil(mn),"doc";case'"':case"'":return yield*this.parseQuotedScalar();case"|":case">":return t+=(yield*this.parseBlockScalarHeader()),t+=(yield*this.pushSpaces(!0)),yield*this.pushCount(e.length-t),yield*this.pushNewline(),yield*this.parseBlockScalar();default:return yield*this.parsePlainScalar()}}*parseFlowCollection(){let e,t,n=-1;do{e=yield*this.pushNewline(),e>0?(t=yield*this.pushSpaces(!1),this.indentValue=n=t):t=0,t+=(yield*this.pushSpaces(!0))}while(e+t>0);const s=this.getLine();if(null===s)return this.setNext("flow");if((-1!==n&&n<this.indentNext&&"#"!==s[0]||0===n&&(s.startsWith("---")||s.startsWith("..."))&&hn(s[3]))&&(n!==this.indentNext-1||1!==this.flowLevel||"]"!==s[0]&&"}"!==s[0]))return this.flowLevel=0,yield"",yield*this.parseLineStart();let r=0;for(;","===s[r];)r+=(yield*this.pushCount(1)),r+=(yield*this.pushSpaces(!0)),this.flowKey=!1;switch(r+=(yield*this.pushIndicators()),s[r]){case void 0:return"flow";case"#":return yield*this.pushCount(s.length-r),"flow";case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel+=1,"flow";case"}":case"]":return yield*this.pushCount(1),this.flowKey=!0,this.flowLevel-=1,this.flowLevel?"flow":"doc";case"*":return yield*this.pushUntil(mn),"flow";case'"':case"'":return this.flowKey=!0,yield*this.parseQuotedScalar();case":":{const e=this.charAt(1);if(this.flowKey||hn(e)||","===e)return this.flowKey=!1,yield*this.pushCount(1),yield*this.pushSpaces(!0),"flow"}default:return this.flowKey=!1,yield*this.parsePlainScalar()}}*parseQuotedScalar(){const e=this.charAt(0);let t=this.buffer.indexOf(e,this.pos+1);if("'"===e)for(;-1!==t&&"'"===this.buffer[t+1];)t=this.buffer.indexOf("'",t+2);else for(;-1!==t;){let e=0;for(;"\\"===this.buffer[t-1-e];)e+=1;if(e%2==0)break;t=this.buffer.indexOf('"',t+1)}const n=this.buffer.substring(0,t);let s=n.indexOf("\n",this.pos);if(-1!==s){for(;-1!==s;){const e=this.continueScalar(s+1);if(-1===e)break;s=n.indexOf("\n",e)}-1!==s&&(t=s-("\r"===n[s-1]?2:1))}if(-1===t){if(!this.atEnd)return this.setNext("quoted-scalar");t=this.buffer.length}return yield*this.pushToIndex(t+1,!1),this.flowLevel?"flow":"doc"}*parseBlockScalarHeader(){this.blockScalarIndent=-1,this.blockScalarKeep=!1;let e=this.pos;for(;;){const t=this.buffer[++e];if("+"===t)this.blockScalarKeep=!0;else if(t>"0"&&t<="9")this.blockScalarIndent=Number(t)-1;else if("-"!==t)break}return yield*this.pushUntil((e=>hn(e)||"#"===e))}*parseBlockScalar(){let e,t=this.pos-1,n=0;e:for(let s=this.pos;e=this.buffer[s];++s)switch(e){case" ":n+=1;break;case"\n":t=s,n=0;break;case"\r":{const e=this.buffer[s+1];if(!e&&!this.atEnd)return this.setNext("block-scalar");if("\n"===e)break}default:break e}if(!e&&!this.atEnd)return this.setNext("block-scalar");if(n>=this.indentNext){-1===this.blockScalarIndent?this.indentNext=n:this.indentNext+=this.blockScalarIndent;do{const e=this.continueScalar(t+1);if(-1===e)break;t=this.buffer.indexOf("\n",e)}while(-1!==t);if(-1===t){if(!this.atEnd)return this.setNext("block-scalar");t=this.buffer.length}}if(!this.blockScalarKeep)for(;;){let e=t-1,s=this.buffer[e];"\r"===s&&(s=this.buffer[--e]);const r=e;for(;" "===s||"\t"===s;)s=this.buffer[--e];if(!("\n"===s&&e>=this.pos&&e+1+n>r))break;t=e}return yield"",yield*this.pushToIndex(t+1,!0),yield*this.parseLineStart()}*parsePlainScalar(){const e=this.flowLevel>0;let t,n=this.pos-1,s=this.pos-1;for(;t=this.buffer[++s];)if(":"===t){const t=this.buffer[s+1];if(hn(t)||e&&","===t)break;n=s}else if(hn(t)){let r=this.buffer[s+1];if("\r"===t&&("\n"===r?(s+=1,t="\n",r=this.buffer[s+1]):n=s),"#"===r||e&&dn.includes(r))break;if("\n"===t){const e=this.continueScalar(s+1);if(-1===e)break;s=Math.max(s,e-2)}}else{if(e&&dn.includes(t))break;n=s}return t||this.atEnd?(yield"",yield*this.pushToIndex(n+1,!0),e?"flow":"doc"):this.setNext("plain-scalar")}*pushCount(e){return e>0?(yield this.buffer.substr(this.pos,e),this.pos+=e,e):0}*pushToIndex(e,t){const n=this.buffer.slice(this.pos,e);return n?(yield n,this.pos+=n.length,n.length):(t&&(yield""),0)}*pushIndicators(){switch(this.charAt(0)){case"!":return(yield*this.pushTag())+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case"&":return(yield*this.pushUntil(mn))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case"-":case"?":case":":{const e=this.flowLevel>0,t=this.charAt(1);if(hn(t)||e&&dn.includes(t))return e?this.flowKey&&(this.flowKey=!1):this.indentNext=this.indentValue+1,(yield*this.pushCount(1))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators())}}return 0}*pushTag(){if("<"===this.charAt(1)){let e=this.pos+2,t=this.buffer[e];for(;!hn(t)&&">"!==t;)t=this.buffer[++e];return yield*this.pushToIndex(">"===t?e+1:e,!1)}{let e=this.pos+1,t=this.buffer[e];for(;t;)if(fn.includes(t))t=this.buffer[++e];else{if("%"!==t||!un.includes(this.buffer[e+1])||!un.includes(this.buffer[e+2]))break;t=this.buffer[e+=3]}return yield*this.pushToIndex(e,!1)}}*pushNewline(){const e=this.buffer[this.pos];return"\n"===e?yield*this.pushCount(1):"\r"===e&&"\n"===this.charAt(1)?yield*this.pushCount(2):0}*pushSpaces(e){let t,n=this.pos-1;do{t=this.buffer[++n]}while(" "===t||e&&"\t"===t);const s=n-this.pos;return s>0&&(yield this.buffer.substr(this.pos,s),this.pos=n),s}*pushUntil(e){let t=this.pos,n=this.buffer[t];for(;!e(n);)n=this.buffer[++t];return yield*this.pushToIndex(t,!1)}}function yn(e,t){for(let n=0;n<e.length;++n)if(e[n].type===t)return!0;return!1}function _n(e){for(let t=0;t<e.length;++t)switch(e[t].type){case"space":case"comment":case"newline":break;default:return t}return-1}function bn(e){switch(e?.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"flow-collection":return!0;default:return!1}}function vn(e){switch(e.type){case"document":return e.start;case"block-map":{const t=e.items[e.items.length-1];return t.sep??t.start}case"block-seq":return e.items[e.items.length-1].start;default:return[]}}function wn(e){if(0===e.length)return[];let t=e.length;e:for(;--t>=0;)switch(e[t].type){case"doc-start":case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":case"newline":break e}for(;"space"===e[++t]?.type;);return e.splice(t,e.length)}function kn(e){if("flow-seq-start"===e.start.type)for(const t of e.items)!t.sep||t.value||yn(t.start,"explicit-key-ind")||yn(t.sep,"map-value-ind")||(t.key&&(t.value=t.key),delete t.key,bn(t.value)?t.value.end?Array.prototype.push.apply(t.value.end,t.sep):t.value.end=t.sep:Array.prototype.push.apply(t.start,t.sep),delete t.sep)}class Sn{constructor(e){this.atNewLine=!0,this.atScalar=!1,this.indent=0,this.offset=0,this.onKeyLine=!1,this.stack=[],this.source="",this.type="",this.lexer=new gn,this.onNewLine=e}*parse(e,t=!1){this.onNewLine&&0===this.offset&&this.onNewLine(0);for(const n of this.lexer.lex(e,t))yield*this.next(n);t||(yield*this.end())}*next(e){if(this.source=e,this.atScalar)return this.atScalar=!1,yield*this.step(),void(this.offset+=e.length);const t=function(e){switch(e){case"\ufeff":return"byte-order-mark";case"":return"doc-mode";case"":return"flow-error-end";case"":return"scalar";case"---":return"doc-start";case"...":return"doc-end";case"":case"\n":case"\r\n":return"newline";case"-":return"seq-item-ind";case"?":return"explicit-key-ind";case":":return"map-value-ind";case"{":return"flow-map-start";case"}":return"flow-map-end";case"[":return"flow-seq-start";case"]":return"flow-seq-end";case",":return"comma"}switch(e[0]){case" ":case"\t":return"space";case"#":return"comment";case"%":return"directive-line";case"*":return"alias";case"&":return"anchor";case"!":return"tag";case"'":return"single-quoted-scalar";case'"':return"double-quoted-scalar";case"|":case">":return"block-scalar-header"}return null}(e);if(t)if("scalar"===t)this.atNewLine=!1,this.atScalar=!0,this.type="scalar";else{switch(this.type=t,yield*this.step(),t){case"newline":this.atNewLine=!0,this.indent=0,this.onNewLine&&this.onNewLine(this.offset+e.length);break;case"space":this.atNewLine&&" "===e[0]&&(this.indent+=e.length);break;case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":this.atNewLine&&(this.indent+=e.length);break;case"doc-mode":case"flow-error-end":return;default:this.atNewLine=!1}this.offset+=e.length}else{const t=`Not a YAML token: ${e}`;yield*this.pop({type:"error",offset:this.offset,message:t,source:e}),this.offset+=e.length}}*end(){for(;this.stack.length>0;)yield*this.pop()}get sourceToken(){return{type:this.type,offset:this.offset,indent:this.indent,source:this.source}}*step(){const e=this.peek(1);if("doc-end"!==this.type||e&&"doc-end"===e.type){if(!e)return yield*this.stream();switch(e.type){case"document":return yield*this.document(e);case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return yield*this.scalar(e);case"block-scalar":return yield*this.blockScalar(e);case"block-map":return yield*this.blockMap(e);case"block-seq":return yield*this.blockSequence(e);case"flow-collection":return yield*this.flowCollection(e);case"doc-end":return yield*this.documentEnd(e)}yield*this.pop()}else{for(;this.stack.length>0;)yield*this.pop();this.stack.push({type:"doc-end",offset:this.offset,source:this.source})}}peek(e){return this.stack[this.stack.length-e]}*pop(e){const t=e??this.stack.pop();if(t)if(0===this.stack.length)yield t;else{const e=this.peek(1);switch("block-scalar"===t.type?t.indent="indent"in e?e.indent:0:"flow-collection"===t.type&&"document"===e.type&&(t.indent=0),"flow-collection"===t.type&&kn(t),e.type){case"document":e.value=t;break;case"block-scalar":e.props.push(t);break;case"block-map":{const n=e.items[e.items.length-1];if(n.value)return e.items.push({start:[],key:t,sep:[]}),void(this.onKeyLine=!0);if(!n.sep)return Object.assign(n,{key:t,sep:[]}),void(this.onKeyLine=!yn(n.start,"explicit-key-ind"));n.value=t;break}case"block-seq":{const n=e.items[e.items.length-1];n.value?e.items.push({start:[],value:t}):n.value=t;break}case"flow-collection":{const n=e.items[e.items.length-1];return void(!n||n.value?e.items.push({start:[],key:t,sep:[]}):n.sep?n.value=t:Object.assign(n,{key:t,sep:[]}))}default:yield*this.pop(),yield*this.pop(t)}if(!("document"!==e.type&&"block-map"!==e.type&&"block-seq"!==e.type||"block-map"!==t.type&&"block-seq"!==t.type)){const n=t.items[t.items.length-1];n&&!n.sep&&!n.value&&n.start.length>0&&-1===_n(n.start)&&(0===t.indent||n.start.every((e=>"comment"!==e.type||e.indent<t.indent)))&&("document"===e.type?e.end=n.start:e.items.push({start:n.start}),t.items.splice(-1,1))}}else{const e="Tried to pop an empty stack";yield{type:"error",offset:this.offset,source:"",message:e}}}*stream(){switch(this.type){case"directive-line":return void(yield{type:"directive",offset:this.offset,source:this.source});case"byte-order-mark":case"space":case"comment":case"newline":return void(yield this.sourceToken);case"doc-mode":case"doc-start":{const e={type:"document",offset:this.offset,start:[]};return"doc-start"===this.type&&e.start.push(this.sourceToken),void this.stack.push(e)}}yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML stream`,source:this.source}}*document(e){if(e.value)return yield*this.lineEnd(e);switch(this.type){case"doc-start":return void(-1!==_n(e.start)?(yield*this.pop(),yield*this.step()):e.start.push(this.sourceToken));case"anchor":case"tag":case"space":case"comment":case"newline":return void e.start.push(this.sourceToken)}const t=this.startBlockValue(e);t?this.stack.push(t):yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML document`,source:this.source}}*scalar(e){if("map-value-ind"===this.type){const t=wn(vn(this.peek(2)));let n;e.end?(n=e.end,n.push(this.sourceToken),delete e.end):n=[this.sourceToken];const s={type:"block-map",offset:e.offset,indent:e.indent,items:[{start:t,key:e,sep:n}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=s}else yield*this.lineEnd(e)}*blockScalar(e){switch(this.type){case"space":case"comment":case"newline":return void e.props.push(this.sourceToken);case"scalar":if(e.source=this.source,this.atNewLine=!0,this.indent=0,this.onNewLine){let e=this.source.indexOf("\n")+1;for(;0!==e;)this.onNewLine(this.offset+e),e=this.source.indexOf("\n",e)+1}yield*this.pop();break;default:yield*this.pop(),yield*this.step()}}*blockMap(e){const t=e.items[e.items.length-1];switch(this.type){case"newline":if(this.onKeyLine=!1,t.value){const n="end"in t.value?t.value.end:void 0,s=Array.isArray(n)?n[n.length-1]:void 0;"comment"===s?.type?n?.push(this.sourceToken):e.items.push({start:[this.sourceToken]})}else t.sep?t.sep.push(this.sourceToken):t.start.push(this.sourceToken);return;case"space":case"comment":if(t.value)e.items.push({start:[this.sourceToken]});else if(t.sep)t.sep.push(this.sourceToken);else{if(this.atIndentedComment(t.start,e.indent)){const n=e.items[e.items.length-2],s=n?.value?.end;if(Array.isArray(s))return Array.prototype.push.apply(s,t.start),s.push(this.sourceToken),void e.items.pop()}t.start.push(this.sourceToken)}return}if(this.indent>=e.indent){const n=!this.onKeyLine&&this.indent===e.indent&&t.sep;let s=[];if(n&&t.sep&&!t.value){const n=[];for(let s=0;s<t.sep.length;++s){const r=t.sep[s];switch(r.type){case"newline":n.push(s);break;case"space":break;case"comment":r.indent>e.indent&&(n.length=0);break;default:n.length=0}}n.length>=2&&(s=t.sep.splice(n[1]))}switch(this.type){case"anchor":case"tag":return void(n||t.value?(s.push(this.sourceToken),e.items.push({start:s}),this.onKeyLine=!0):t.sep?t.sep.push(this.sourceToken):t.start.push(this.sourceToken));case"explicit-key-ind":return t.sep||yn(t.start,"explicit-key-ind")?n||t.value?(s.push(this.sourceToken),e.items.push({start:s})):this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken]}]}):t.start.push(this.sourceToken),void(this.onKeyLine=!0);case"map-value-ind":if(yn(t.start,"explicit-key-ind"))if(t.sep)if(t.value)e.items.push({start:[],key:null,sep:[this.sourceToken]});else if(yn(t.sep,"map-value-ind"))this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:s,key:null,sep:[this.sourceToken]}]});else if(bn(t.key)&&!yn(t.sep,"newline")){const e=wn(t.start),n=t.key,s=t.sep;s.push(this.sourceToken),delete t.key,delete t.sep,this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:e,key:n,sep:s}]})}else s.length>0?t.sep=t.sep.concat(s,this.sourceToken):t.sep.push(this.sourceToken);else if(yn(t.start,"newline"))Object.assign(t,{key:null,sep:[this.sourceToken]});else{const e=wn(t.start);this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:e,key:null,sep:[this.sourceToken]}]})}else t.sep?t.value||n?e.items.push({start:s,key:null,sep:[this.sourceToken]}):yn(t.sep,"map-value-ind")?this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[],key:null,sep:[this.sourceToken]}]}):t.sep.push(this.sourceToken):Object.assign(t,{key:null,sep:[this.sourceToken]});return void(this.onKeyLine=!0);case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{const r=this.flowScalar(this.type);return void(n||t.value?(e.items.push({start:s,key:r,sep:[]}),this.onKeyLine=!0):t.sep?this.stack.push(r):(Object.assign(t,{key:r,sep:[]}),this.onKeyLine=!0))}default:{const r=this.startBlockValue(e);if(r)return n&&"block-seq"!==r.type&&yn(t.start,"explicit-key-ind")&&e.items.push({start:s}),void this.stack.push(r)}}}yield*this.pop(),yield*this.step()}*blockSequence(e){const t=e.items[e.items.length-1];switch(this.type){case"newline":if(t.value){const n="end"in t.value?t.value.end:void 0,s=Array.isArray(n)?n[n.length-1]:void 0;"comment"===s?.type?n?.push(this.sourceToken):e.items.push({start:[this.sourceToken]})}else t.start.push(this.sourceToken);return;case"space":case"comment":if(t.value)e.items.push({start:[this.sourceToken]});else{if(this.atIndentedComment(t.start,e.indent)){const n=e.items[e.items.length-2],s=n?.value?.end;if(Array.isArray(s))return Array.prototype.push.apply(s,t.start),s.push(this.sourceToken),void e.items.pop()}t.start.push(this.sourceToken)}return;case"anchor":case"tag":if(t.value||this.indent<=e.indent)break;return void t.start.push(this.sourceToken);case"seq-item-ind":if(this.indent!==e.indent)break;return void(t.value||yn(t.start,"seq-item-ind")?e.items.push({start:[this.sourceToken]}):t.start.push(this.sourceToken))}if(this.indent>e.indent){const t=this.startBlockValue(e);if(t)return void this.stack.push(t)}yield*this.pop(),yield*this.step()}*flowCollection(e){const t=e.items[e.items.length-1];if("flow-error-end"===this.type){let e;do{yield*this.pop(),e=this.peek(1)}while(e&&"flow-collection"===e.type)}else if(0===e.end.length){switch(this.type){case"comma":case"explicit-key-ind":return void(!t||t.sep?e.items.push({start:[this.sourceToken]}):t.start.push(this.sourceToken));case"map-value-ind":return void(!t||t.value?e.items.push({start:[],key:null,sep:[this.sourceToken]}):t.sep?t.sep.push(this.sourceToken):Object.assign(t,{key:null,sep:[this.sourceToken]}));case"space":case"comment":case"newline":case"anchor":case"tag":return void(!t||t.value?e.items.push({start:[this.sourceToken]}):t.sep?t.sep.push(this.sourceToken):t.start.push(this.sourceToken));case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{const n=this.flowScalar(this.type);return void(!t||t.value?e.items.push({start:[],key:n,sep:[]}):t.sep?this.stack.push(n):Object.assign(t,{key:n,sep:[]}))}case"flow-map-end":case"flow-seq-end":return void e.end.push(this.sourceToken)}const n=this.startBlockValue(e);n?this.stack.push(n):(yield*this.pop(),yield*this.step())}else{const t=this.peek(2);if("block-map"===t.type&&("map-value-ind"===this.type&&t.indent===e.indent||"newline"===this.type&&!t.items[t.items.length-1].sep))yield*this.pop(),yield*this.step();else if("map-value-ind"===this.type&&"flow-collection"!==t.type){const n=wn(vn(t));kn(e);const s=e.end.splice(1,e.end.length);s.push(this.sourceToken);const r={type:"block-map",offset:e.offset,indent:e.indent,items:[{start:n,key:e,sep:s}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=r}else yield*this.lineEnd(e)}}flowScalar(e){if(this.onNewLine){let e=this.source.indexOf("\n")+1;for(;0!==e;)this.onNewLine(this.offset+e),e=this.source.indexOf("\n",e)+1}return{type:e,offset:this.offset,indent:this.indent,source:this.source}}startBlockValue(e){switch(this.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return this.flowScalar(this.type);case"block-scalar-header":return{type:"block-scalar",offset:this.offset,indent:this.indent,props:[this.sourceToken],source:""};case"flow-map-start":case"flow-seq-start":return{type:"flow-collection",offset:this.offset,indent:this.indent,start:this.sourceToken,items:[],end:[]};case"seq-item-ind":return{type:"block-seq",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken]}]};case"explicit-key-ind":{this.onKeyLine=!0;const t=wn(vn(e));return t.push(this.sourceToken),{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:t}]}}case"map-value-ind":{this.onKeyLine=!0;const t=wn(vn(e));return{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:t,key:null,sep:[this.sourceToken]}]}}}return null}atIndentedComment(e,t){return"comment"===this.type&&!(this.indent<=t)&&e.every((e=>"newline"===e.type||"space"===e.type))}*documentEnd(e){"doc-mode"!==this.type&&(e.end?e.end.push(this.sourceToken):e.end=[this.sourceToken],"newline"===this.type&&(yield*this.pop()))}*lineEnd(e){switch(this.type){case"comma":case"doc-start":case"doc-end":case"flow-seq-end":case"flow-map-end":case"map-value-ind":yield*this.pop(),yield*this.step();break;case"newline":this.onKeyLine=!1;default:e.end?e.end.push(this.sourceToken):e.end=[this.sourceToken],"newline"===this.type&&(yield*this.pop())}}}class En{constructor(){this.lineStarts=[],this.addNewLine=e=>this.lineStarts.push(e),this.linePos=e=>{let t=0,n=this.lineStarts.length;for(;t<n;){const s=t+n>>1;this.lineStarts[s]<e?t=s+1:n=s}return this.lineStarts[t]===e?{line:t+1,col:1}:0===t?{line:0,col:e}:{line:t,col:e-this.lineStarts[t-1]+1}}}}function xn(e,t,n){let s;"function"==typeof t?s=t:void 0===n&&t&&"object"==typeof t&&(n=t);const r=function(e,t={}){const{lineCounter:n,prettyErrors:s}=function(e){const t=!1!==e.prettyErrors;return{lineCounter:e.lineCounter||t&&new En||null,prettyErrors:t}}(t),r=new Sn(n?.addNewLine),i=new sn(t);let o=null;for(const t of i.compose(r.parse(e),!0,e.length))if(o){if("silent"!==o.options.logLevel){o.errors.push(new zt(t.range.slice(0,2),"MULTIPLE_DOCS","Source contains multiple documents; please use YAML.parseAllDocuments()"));break}}else o=t;return s&&n&&(o.errors.forEach(Pt(e,n)),o.warnings.forEach(Pt(e,n))),o}(e,n);if(!r)return null;if(r.warnings.forEach((e=>be(r.options.logLevel,e))),r.errors.length>0){if("silent"!==r.options.logLevel)throw r.errors[0];r.errors=[]}return r.toJS(Object.assign({reviver:s},n))}class An{constructor(e){this._server=e}href(e){return this._server.href(e)}get(e){return this._server.get(e)}ready(e){this._server.ready(e)}close(e){this._server.close(e)}gameHeader(){return this._server.get("header.yml").then((e=>xn(e)))}}const On=.01;var Cn;!function(e){e[e.Idle=0]="Idle",e[e.Loading=1]="Loading",e[e.BecomePlaying=2]="BecomePlaying",e[e.Playing=3]="Playing",e[e.Pause=4]="Pause"}(Cn||(Cn={}));class In{constructor(e){this._player=e}get root(){return this._player.root}get gameServer(){return this._player.gameServer}get width(){return this._player.width}set width(e){this.resize({width:e})}get height(){return this._player.height}set height(e){this.resize({height:e})}get resizable(){return this._player.resizable}set resizable(e){this._player.resizable=e}get speed(){return this._player.speed}set speed(e){this._player.speed=e}get url(){return this._player.url}set url(e){this._player.url=e}get header(){return this._player.header}set header(e){this._player.header=e}get autoPlay(){return!1}set autoPlay(e){}resize(e,t){this.resizable&&("object"==typeof e?this._player.resize(e):this._player.resize(e,t))}ready(){this._player.ready()}saveState(){return this._player.saveState()}loadState(e){this._player.loadState(e)}getController(e){return this._player.getController(e)}tick(e){this._player.tick(e)}}class Nn{get isLoading(){return this._state==Cn.Loading}get isPlaying(){return this._state==Cn.Playing}get isPaused(){return this._state==Cn.Pause}constructor(e,t,n){this._state=Cn.Idle,this._ui={},this._exports={},this._speed=1,this._physicsAccumulator=0,this._proxy=new In(this),this._config=e,this._options=n,this._controllerBus=new r({player:this,inputController:e.inputController}),this._tickFromGame=this._tickFromGame.bind(this),void 0!==this._options.onReady&&(this._readyCallback=this._options.onReady),"dataset"in t&&(this._ui.element=t,this._options=Object.assign({},n),void 0===this._options.url&&void 0!==t.dataset.url&&(this._options.url=t.dataset.url),this._attach(),this.autoPlay&&this.play())}_attach(){if(void 0!==this._ui.element){{let e=document.createElement("div");this._ui.wrapper=e,e.addEventListener("mouseenter",(()=>this._onMouseEnter())),e.addEventListener("mousemove",(()=>this._onMouseMove())),e.addEventListener("mouseleave",(()=>this._onMouseLeave())),e.style.position="relative",e.style.backgroundSize="cover",void 0!==this._options.splashart&&(e.style.backgroundImage=`url('${this._options.splashart}')`),this._ui.element.appendChild(e)}{let e=document.createElement("div");this._ui.base=e,e.style.width="100%",e.style.height="100%",e.style.position="absolute",e.style.left="0",e.style.top="0",this._ui.wrapper.appendChild(e)}this.resize({width:this._options.width,height:this._options.height}),this._ui.overlay=new u(this._ui.wrapper),this._ui.overlay.onPlay=()=>this.play(),this._ui.overlay.onSpeed=e=>this.speed=e,this._resizeListener=()=>this._onResize(),window.addEventListener("resize",this._resizeListener)}}_initGame(){return new Promise(((e,t)=>void 0===this._ui.element?t("element is not an HTMLElement"):(console.log("start game server..."),this._startGameServer().then((()=>(console.log("game server started"),this._loadHeader().then((()=>this._loadGame().then(e)))))))))}_startGameServer(){return new Promise((e=>{if(void 0===this._options.url)return e();const t=function(e,t){if(t.endsWith(".zip"))return e.zipServer(t);if(t.endsWith(".yaml")||t.endsWith(".yml")){const e=t.lastIndexOf("/");t=e<0?"":t.substring(0,e)}return e.fileServer(t)}(this._config,this._options.url);this._gameServer=new An(t),this._gameServer.ready(e)}))}_loadHeader(){return console.log("load header..."),new Promise(((e,t)=>void 0!==this._options.header?e(this._options.header):void 0===this._gameServer?t("failed to get header"):this._gameServer.gameHeader().then(e))).then((e=>{console.log("header loaded"),console.log(e),this._options.header=e,this._proxy.resize({width:e.width,height:e.height})}))}_getBootFunction(e){let t={},n={exports:{boot:void 0}};const s=new Function("exports","module","define",e)(t,n,void 0);void 0===t.boot?void 0===n.exports.boot?"object"!==s||void 0===s.boot||(this._exports.boot=s.boot):this._exports.boot=n.exports.boot:this._exports.boot=t.boot}_loadBoot(){var e;console.log("load boot...");const t=this.header.boot;if(void 0!==t){if(!t.endsWith(".js"))return new Promise(((e,n)=>{const s=window[t];return void 0===s||void 0===s.boot?n("invalid boot module"):(this._exports.boot=s.boot,e())}));if(t.startsWith("http"))return fetch(null===(e=this.header)||void 0===e?void 0:e.boot).then((e=>{if(!e.ok)throw new Error(e.statusText);return e.text()})).then((e=>(this._getBootFunction(e),Promise.resolve())));if(void 0!==this._gameServer)return this._gameServer.get(t).then((e=>(this._getBootFunction(e),Promise.resolve())))}return new Promise(((e,t)=>t("failed to load boot")))}_loadGame(){return new Promise(((e,t)=>{this._loadBoot().then((()=>void 0===this._exports.boot?t("missing boot"):(console.log("boot loaded"),this._game=this._exports.boot(this._proxy),this._game.ticker=this._tickFromGame,console.log(this._game),e())))}))}_notifyReady(){this._playTask=void 0,void 0!==this._readyCallback&&this._readyCallback()}_play(e,t,n){return void 0!==e||void 0!==t?(this.stop(),this._options.url=e,this._options.header=t,void((!0===n||this.autoPlay)&&this._play())):this._state===Cn.Pause?(this._state=Cn.Playing,this._ui.overlay&&this._ui.overlay.playing(),void(void 0!==this._game&&this._game.play())):void(this._state===Cn.Idle&&(this._state=Cn.Loading,this._startLoadingDate=new Date,this._ui.overlay&&this._ui.overlay.loading(),this._playTask=this._initGame().catch((e=>{console.error(e),this._notifyReady()}))))}_onMouseEnter(){this._ui.overlay&&this._ui.overlay.mouseEnter()}_onMouseMove(){this._ui.overlay&&this._ui.overlay.mouseMove()}_onMouseLeave(){this._ui.overlay&&this._ui.overlay.mouseLeave()}get root(){return this._ui.base}get gameServer(){return this._gameServer}resize(e,t){void 0!==this._ui.wrapper&&("number"!=typeof e&&(t=e.height,e=e.width),this._ui.wrapper.style.width=void 0!==e?`${e}px`:"100%",this._ui.wrapper.style.height=void 0!==t?`${t}px`:"100%",this._onResize())}_onResize(){void 0!==this._game&&this._game.resize()}get onReady(){return this._readyCallback}set onReady(e){this._readyCallback=e,this.isPlaying&&this._notifyReady()}_ready(){this._state===Cn.BecomePlaying&&(this._state=Cn.Playing,this._ui.overlay&&this._ui.overlay.playing(),this._game&&this._game.play(),this._notifyReady())}ready(){if(this._state!=Cn.Loading)return;this._state=Cn.BecomePlaying;const e=1e3-(+new Date-+this._startLoadingDate);e>0?setTimeout((()=>this._ready()),e):this._ready()}controller(e){return this._controllerBus.get(e)}get width(){return this._ui.wrapper?this._ui.wrapper.clientWidth:0}set width(e){this.resize({width:e})}get height(){return this._ui.wrapper?this._ui.wrapper.clientHeight:0}set height(e){this.resize({height:e})}get resizable(){return!0===this._options.resizable}set resizable(e){this._options.resizable=e}get speed(){return this._speed}set speed(e){this._speed=e}get url(){return this._options.url}set url(e){this.play({url:e})}get header(){return this._options.header}set header(e){this.play({header:e})}get autoPlay(){return!0===this._options.autoPlay}set autoPlay(e){this._options.autoPlay=e}get simulated(){return!0===this._options.simulated}set simulated(e){this._options.simulated=e}play(e){"object"!=typeof e?void 0===e?this._play():this._play(e):this._play(e.url,e.header,e.autoPlay)}pause(){this.isPlaying&&(void 0!==this._game&&this._game.pause(),this._ui.overlay&&this._ui.overlay.paused(),this._state=Cn.Pause)}stop(){void 0!==this._game&&(this._game.stop(),this._game=void 0),this._ui.overlay&&this._ui.overlay.stopped(),void 0!==this._gameServer&&(this._gameServer.close(),this._gameServer=void 0),this._speed=1,this._state=Cn.Idle}reload(){this.stop(),this.play()}remove(){this.stop(),void 0!==this._resizeListener&&window.removeEventListener("resize",this._resizeListener),this._ui.overlay&&(this._ui.overlay.remove(),this._ui.overlay=void 0),this._ui.wrapper&&(this._ui.wrapper.remove(),this._ui.wrapper=void 0)}saveState(){return{physicsAccumulator:this._physicsAccumulator,game:void 0!==this._game?this._game.saveState():{},controllers:this._controllerBus.saveState()}}loadState(e){this._physicsAccumulator=void 0!==e.physicsAccumulator?e.physicsAccumulator:0,void 0!==this._game&&this._game.loadState(void 0!==e.game?e.game:{}),this._controllerBus.loadState(void 0!==e.controllers?e.controllers:[{},{}])}_tickFromGame(e){void 0===this.ticker?this.simulated||this.tick(e):this.ticker(e)}tick(e){if(void 0!==this._game){for(this._physicsAccumulator+=e*this.speed;this._physicsAccumulator>On;)this._tickOneFrame(On),this._physicsAccumulator-=On;this._tickOneFrame(On)}}_tickOneFrame(e){const t=this._game.getStateForAgent();this._game.tick(this._controllerBus.inputs(t),e)}getController(e){return this._controllerBus.get(e)}}function Tn(e){return"length"in e}function Ln(e,t,n){return new Nn(e,t,n)}class Bn{constructor(){this._inputs={left:!1,right:!1,up:!1,down:!1},this._keyDownListener=e=>this._onKey(e,!0),this._keyUpListener=e=>this._onKey(e,!1),document.addEventListener("keydown",this._keyDownListener,!1),document.addEventListener("keyup",this._keyUpListener,!1)}_onKey(e,t){"ArrowDown"===e.code||"KeyS"===e.code?("ArrowDown"===e.code&&e.preventDefault(),this._inputs.down=t):"ArrowUp"===e.code||"KeyW"===e.code?("ArrowUp"===e.code&&e.preventDefault(),this._inputs.up=t):"ArrowLeft"===e.code||"KeyA"===e.code?("ArrowLeft"===e.code&&e.preventDefault(),this._inputs.left=t):"ArrowRight"!==e.code&&"KeyD"!==e.code||("ArrowRight"===e.code&&e.preventDefault(),this._inputs.right=t)}remove(){document.removeEventListener("keydown",this._keyDownListener),document.removeEventListener("keyup",this._keyUpListener)}get inputs(){return this._inputs}}var zn=n(858),Dn=n.n(zn);function Pn(e){return fetch(e).then((e=>e.ok?e.blob():Promise.reject(e.status))).then((e=>e.text()))}class Rn{ready(e){throw new Error("Method not implemented.")}close(e){throw new Error("Method not implemented.")}}class jn extends Rn{constructor(e){super(),this._baseUrl=e}href(e){return`${this._baseUrl}/${e}`}get(e){return Pn(this.href(e))}ready(e){e&&e()}close(e){e&&e(null)}}class Fn extends Rn{constructor(e){super(),this._zip=void 0,this._isClosed=!1,this._task=Pn(e).then(Dn().loadAsync).then((e=>{this._isClosed||(this._zip=e,this._task=void 0,this._notifyReady())}))}href(e){return e}get(e){return new Promise(((t,n)=>{if(void 0===this._zip)return void n(void 0);const s=this._zip.file(e);s?s.async("string").then((e=>{t(e)})).catch(n):n(void 0)}))}ready(e){this._readyCallback=e,void 0===this._task&&this._notifyReady()}_notifyReady(){void 0!==this._readyCallback&&this._readyCallback()}close(e){this._isClosed=!0,this._task=void 0,this._zip=void 0,void 0!==e&&e(null)}}const $n="0.1.0-alpha.20",Un={inputController:()=>new Bn,fileServer:e=>new jn(e),zipServer:e=>new Fn(e)};function Mn(){return{resizable:!0,speed:1}}function Kn(e,t){return function(e,t,n){let s,r={resizable:!0,speed:1};var i;return void 0===(i=t)||Tn(i)||"className"in i?s=t:n=t,void 0!==n&&(r=Object.assign(Object.assign({},r),n)),null==s&&(s=void 0!==r.element?r.element:document.getElementsByClassName("moroboxai-player")),Tn(s)?Array.prototype.map.call(s,(t=>Ln(e,t,r))):Ln(e,s,r)}(Un,e,t)}})(),s})()));